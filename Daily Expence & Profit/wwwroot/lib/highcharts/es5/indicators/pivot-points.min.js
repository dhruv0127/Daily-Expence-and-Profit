"use strict";!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function o(t,o,n,e){t.hasOwnProperty(o)||(t[o]=e.apply(null,n),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t=t?t._modules:{},"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(i){function t(t,o){var n=t.series.pointArrayMap,e=n.length;for(i.seriesTypes.sma.prototype.pointClass.prototype[o].call(t);e--;)t[o="dataLabel"+n[e]]&&t[o].element&&t[o].destroy(),t[o]=null}var e,o,n=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])})(t,o)},function(t,o){function n(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)});return o=i.seriesTypes.sma.prototype.pointClass,n(r,o),r.prototype.destroyElements=function(){t(this,"destroyElements")},r.prototype.destroy=function(){t(this,"destroyElements")},r;function r(){var t=null!==o&&o.apply(this,arguments)||this;return t.P=void 0,t.pivotLine=void 0,t.series=void 0,t}}),o(t,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[t["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o,n){var e,c,i=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])})(t,o)},function(t,o){function n(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),r=o.seriesTypes.sma,a=n.merge,s=n.extend,u=n.defined,f=n.isArray;function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.endPoint=void 0,t.plotEndPoint=void 0,t}return i(p,c=r),p.prototype.toYData=function(t){return[t.P]},p.prototype.translate=function(){var n=this;c.prototype.translate.apply(n),n.points.forEach(function(o){n.pointArrayMap.forEach(function(t){u(o[t])&&(o["plot"+t]=n.yAxis.toPixels(o[t],!0))})}),n.plotEndPoint=n.xAxis.toPixels(n.endPoint,!0)},p.prototype.getGraphPath=function(t){for(var o,n,e,i=this,r=[[],[],[],[],[],[],[],[],[]],a=i.pointArrayMap.length,s=i.plotEndPoint,p=[],l=t.length;l--;){for(n=t[l],e=0;e<a;e++)o=i.pointArrayMap[e],u(n[o])&&r[e].push({plotX:n.plotX,plotY:n["plot"+o],isNull:!1},{plotX:s,plotY:n["plot"+o],isNull:!1},{plotX:s,plotY:null,isNull:!0});s=n.plotX}return r.forEach(function(t){p=p.concat(c.prototype.getGraphPath.call(i,t))}),p},p.prototype.drawDataLabels=function(){var n,e,i,r,a=this,s=a.pointArrayMap;a.options.dataLabels.enabled&&(r=a.points.length,s.concat([!1]).forEach(function(t,o){for(i=r;i--;)e=a.points[i],t?(e.y=e[t],e.pivotLine=t,e.plotY=e["plot"+t],n=e["dataLabel"+t],o&&(e["dataLabel"+s[o-1]]=e.dataLabel),e.dataLabels||(e.dataLabels=[]),e.dataLabels[0]=e.dataLabel=n=n&&n.element?n:null):e["dataLabel"+s[o-1]]=e.dataLabel;c.prototype.drawDataLabels.call(a)}))},p.prototype.getValues=function(t,o){var n,e=o.period,i=t.xData,r=(t=t.yData)?t.length:0,a=(o=this[o.algorithm+"Placement"],[]),s=[],p=[];if(!(i.length<e)&&f(t[0])&&4===t[0].length){for(n=e+1;n<=r+e;n+=e){var l=i.slice(n-e-1,n),c=t.slice(n-e-1,n),u=l.length,d=l[u-1];c=o(this.getPivotAndHLC(c)),c=a.push([d].concat(c)),s.push(d),p.push(a[c-1].slice(1))}return this.endPoint=l[0]+(d-l[0])/u*e,{values:a,xData:s,yData:p}}},p.prototype.getPivotAndHLC=function(t){var o=t[t.length-1][3],n=-1/0,e=1/0;return t.forEach(function(t){n=Math.max(n,t[1]),e=Math.min(e,t[2])}),[(n+e+o)/3,n,e,o]},p.prototype.standardPlacement=function(t){var o=t[1]-t[2];return[null,null,t[0]+o,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-o,null,null]},p.prototype.camarillaPlacement=function(t){var o=t[1]-t[2];return[t[3]+1.5*o,t[3]+1.25*o,t[3]+1.1666*o,t[3]+1.0833*o,t[0],t[3]-1.0833*o,t[3]-1.1666*o,t[3]-1.25*o,t[3]-1.5*o]},p.prototype.fibonacciPlacement=function(t){var o=t[1]-t[2];return[null,t[0]+o,t[0]+.618*o,t[0]+.382*o,t[0],t[0]-.382*o,t[0]-.618*o,t[0]-o,null]},p.defaultOptions=a(r.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),s((n=p).prototype,{nameBase:"Pivot Points",pointArrayMap:"R4 R3 R2 R1 P S1 S2 S3 S4".split(" "),pointValKey:"P",pointClass:t}),o.registerSeriesType("pivotpoints",n),n}),o(t,"masters/indicators/pivot-points.src.js",[],function(){})});