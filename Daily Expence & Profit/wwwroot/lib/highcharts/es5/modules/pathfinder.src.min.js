!function(n){"object"==typeof module&&module.exports?module.exports=n.default=n:"function"==typeof define&&define.amd?define("highcharts/modules/pathfinder",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function n(t,n,i,e){t.hasOwnProperty(n)||(t[n]=e.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:n,module:t[n]}})))}n(t,"Gantt/Connection.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(t,n,i,e){var t=t.defaultOptions,s=e.defined,a=e.error,r=e.extend,h=e.merge,o=e.objectEach,x=(e.pick,n.deg2rad),c=Math.max,M=Math.min;function p(t){var n=t.shapeArgs;return n?{xMin:n.x||0,xMax:(n.x||0)+(n.width||0),yMin:n.y||0,yMax:(n.y||0)+(n.height||0)}:(n=t.graphic&&t.graphic.getBBox())?{xMin:t.plotX-n.width/2,xMax:t.plotX+n.width/2,yMin:t.plotY-n.height/2,yMax:t.plotY+n.height/2}:null}r(t,{connectors:{type:"straight",lineWidth:1,marker:{enabled:!1,align:"center",verticalAlign:"middle",inside:!1,lineWidth:1},startMarker:{symbol:"diamond"},endMarker:{symbol:"arrow-filled"}}});d.prototype.init=function(t,n,i){this.fromPoint=t,this.toPoint=n,this.options=i,this.chart=t.series.chart,this.pathfinder=this.chart.pathfinder},d.prototype.renderPath=function(t,n,i){var e=this.chart,r=e.styledMode,a=e.pathfinder,o=!e.options.chart.forExport&&!1!==i,s=this.graphics&&this.graphics.path;a.group||(a.group=e.renderer.g().addClass("highcharts-pathfinder-group").attr({zIndex:-1}).add(e.seriesGroup)),a.group.translate(e.plotLeft,e.plotTop),s&&s.renderer||(s=e.renderer.path().add(a.group),r||s.attr({opacity:0})),s.attr(n),e={d:t},r||(e.opacity=1),s[o?"animate":"attr"](e,i),this.graphics=this.graphics||{},this.graphics.path=s},d.prototype.addMarker=function(t,n,i){var e,r,a=this,o=a.fromPoint.series.chart,s=o.pathfinder,o=o.renderer,h="start"===t?a.fromPoint:a.toPoint,c=h.getPathfinderAnchorPoint(n);n.enabled&&((i="start"===t?i[1]:i[i.length-2])&&"M"===i[0]||"L"===i[0])&&(i={x:i[1],y:i[2]},i=h.getRadiansToVector(i,c),c=h.getMarkerVector(i,n.radius,c),i=-i/x,n.width&&n.height?(e=n.width,r=n.height):e=r=2*n.radius,a.graphics=a.graphics||{},e={x:c.x-e/2,y:c.y-r/2,width:e,height:r,rotation:i,rotationOriginX:c.x,rotationOriginY:c.y},a.graphics[t]?a.graphics[t].animate(e):(a.graphics[t]=o.symbol(n.symbol).addClass("highcharts-point-connecting-path-"+t+"-marker").attr(e).add(s.group),o.styledMode||a.graphics[t].attr({fill:n.color||a.fromPoint.color,stroke:n.lineColor,"stroke-width":n.lineWidth,opacity:0}).animate({opacity:1},h.series.options.animation)))},d.prototype.getPath=function(t){var n=this.pathfinder,i=this.chart,e=n.algorithms[t.type],r=n.chartObstacles;return"function"!=typeof e?(a('"'+t.type+'" is not a Pathfinder algorithm.'),{path:[],obstacles:[]}):(e.requiresObstacles&&!r&&(r=n.chartObstacles=n.getChartObstacles(t),i.options.connectors.algorithmMargin=t.algorithmMargin,n.chartObstacleMetrics=n.getObstacleMetrics(r)),e(this.fromPoint.getPathfinderAnchorPoint(t.startMarker),this.toPoint.getPathfinderAnchorPoint(t.endMarker),h({chartObstacles:r,lineObstacles:n.lineObstacles||[],obstacleMetrics:n.chartObstacleMetrics,hardBounds:{xMin:0,xMax:i.plotWidth,yMin:0,yMax:i.plotHeight},obstacleOptions:{margin:t.algorithmMargin},startDirectionX:n.getAlgorithmStartDirection(t.startMarker)},t)))},d.prototype.render=function(){var t=this,n=t.fromPoint,i=n.series,e=i.chart,r=e.pathfinder,a=h(e.options.connectors,i.options.connectors,n.options.connectors,t.options),o={};e.styledMode||(o.stroke=a.lineColor||n.color,o["stroke-width"]=a.lineWidth,a.dashStyle&&(o.dashstyle=a.dashStyle)),o.class="highcharts-point-connecting-path highcharts-color-"+n.colorIndex,a=h(o,a),s(a.marker.radius)||(a.marker.radius=M(c(Math.ceil((a.algorithmMargin||8)/2)-1,1),5)),n=(e=t.getPath(a)).path,e.obstacles&&(r.lineObstacles=r.lineObstacles||[],r.lineObstacles=r.lineObstacles.concat(e.obstacles)),t.renderPath(n,o,i.options.animation),t.addMarker("start",h(a.marker,a.startMarker),n),t.addMarker("end",h(a.marker,a.endMarker),n)},d.prototype.destroy=function(){this.graphics&&(o(this.graphics,function(t){t.destroy()}),delete this.graphics)};e=d;function d(t,n,i){this.chart=void 0,this.fromPoint=void 0,this.graphics=void 0,this.pathfinder=void 0,this.toPoint=void 0,this.init(t,n,i)}return n.Connection=e,r(i.prototype,{getPathfinderAnchorPoint:function(t){var n,i,e=p(this);switch(t.align){case"right":n="xMax";break;case"left":n="xMin"}switch(t.verticalAlign){case"top":i="yMin";break;case"bottom":i="yMax"}return{x:n?e[n]:(e.xMin+e.xMax)/2,y:i?e[i]:(e.yMin+e.yMax)/2}},getRadiansToVector:function(t,n){var i;return s(n)||(i=p(this))&&(n={x:(i.xMin+i.xMax)/2,y:(i.yMin+i.yMax)/2}),Math.atan2(n.y-t.y,t.x-n.x)},getMarkerVector:function(t,n,i){for(var e,r=2*Math.PI,a=t,t=p(this),o=t.xMax-t.xMin,s=t.yMax-t.yMin,h=Math.atan2(s,o),c=!1,o=o/2,x=s/2,M=t.xMin+o,t=t.yMin+x,d={x:M,y:t},l=1,y=1;a<-Math.PI;)a+=r;for(;a>Math.PI;)a-=r;return e=Math.tan(a),-h<a&&a<=h?(y=-1,c=!0):h<a&&a<=Math.PI-h?y=-1:a>Math.PI-h||a<=-(Math.PI-h)?(l=-1,c=!0):l=-1,c?(d.x+=l*o,d.y+=y*o*e):(d.x+=l*(s/(2*e)),d.y+=y*x),i.x!==M&&(d.x=i.x),i.y!==t&&(d.y=i.y),{x:d.x+n*Math.cos(a),y:d.y-n*Math.sin(a)}}}),e}),n(t,"Gantt/PathfinderAlgorithms.js",[t["Core/Utilities.js"]],function(t){t.extend;var b=t.pick,P=Math.min,k=Math.max,O=Math.abs;function w(t,n,i){for(var e,r,a=i||0,o=t.length-1,s=n-1e-7;a<=o;)if(0<(r=s-t[e=o+a>>1].xMin))a=1+e;else{if(!(r<0))return e;o=e-1}return 0<a?a-1:0}function C(t,n){for(var i,e,r=w(t,n.x+1)+1;r--;)if(t[r].xMax>=n.x&&(i=t[r],(e=n).x<=i.xMax&&e.x>=i.xMin&&e.y<=i.yMax&&e.y>=i.yMin))return r;return-1}function j(t){var n=[];if(t.length){n.push(["M",t[0].start.x,t[0].start.y]);for(var i=0;i<t.length;++i)n.push(["L",t[i].end.x,t[i].end.y])}return n}function A(t,n){t.yMin=k(t.yMin,n.yMin),t.yMax=P(t.yMax,n.yMax),t.xMin=k(t.xMin,n.xMin),t.xMax=P(t.xMax,n.xMax)}function n(t,n,i){var e,r,a=[],o=b(i.startDirectionX,O(n.x-t.x)>O(n.y-t.y))?"x":"y",s=C(i=i.chartObstacles,t),h=C(i,n);function c(t,n,i,e,r){t={x:t.x,y:t.y};return t[n]=i[e||n]+(r||0),t}function x(t,n,i){var e=O(n[i]-t[i+"Min"])>O(n[i]-t[i+"Max"]);return c(n,i,t,i+(e?"Max":"Min"),e?1:-1)}return h=-1<h?(e={start:r=x(i[h],n,o),end:n},r):n,-1<s&&(r=x(i=i[s],t,o),a.push({start:t,end:r}),r[o]>=t[o]==r[o]>=h[o]&&(s=t[o="y"===o?"x":"y"]<n[o],a.push({start:r,end:c(r,o,i,o+(s?"Max":"Min"),s?1:-1)}),o="y"===o?"x":"y")),r=c(n=a.length?a[a.length-1].end:t,o,h),a.push({start:n,end:r}),i=c(r,o="y"===o?"x":"y",h),a.push({start:r,end:i}),a.push(e),{path:j(a),obstacles:a}}function i(t,n,M){var i,e,r,a,o,s=b(M.startDirectionX,O(n.x-t.x)>O(n.y-t.y)),h=s?"x":"y",c=[],d=!1,x=M.obstacleMetrics,l=P(t.x,n.x)-x.maxWidth-10,y=k(t.x,n.x)+x.maxWidth+10,p=P(t.y,n.y)-x.maxHeight-10,f=k(t.y,n.y)+x.maxHeight+10,u=M.chartObstacles,x=w(u,l),g=w(u,y);function m(t,n,i){for(var e,r,a=t.x<n.x?1:-1,o=t.x<n.x?(e=t,n):(e=n,t),s=t.y<n.y?(r=t,n):(r=n,t),h=a<0?P(w(u,o.x),u.length-1):0;u[h]&&(0<a&&u[h].xMin<=o.x||a<0&&u[h].xMax>=e.x);){if(u[h].xMin<=o.x&&u[h].xMax>=e.x&&u[h].yMin<=s.y&&u[h].yMax>=r.y)return i?{y:t.y,x:t.x<n.x?u[h].xMin-1:u[h].xMax+1,obstacle:u[h]}:{x:t.x,y:t.y<n.y?u[h].yMin-1:u[h].yMax+1,obstacle:u[h]};h+=a}return n}function v(t,n,i,e,r){var a=r.soft,r=r.hard,o=e?"x":"y",s={x:n.x,y:n.y},h={x:n.x,y:n.y},c=t[o+"Max"]>=a[o+"Max"],a=t[o+"Min"]<=a[o+"Min"],x=t[o+"Max"]>=r[o+"Max"],r=t[o+"Min"]<=r[o+"Min"],M=O(t[o+"Min"]-n[o]),d=O(t[o+"Max"]-n[o]),i=O(M-d)<10?n[o]<i[o]:d<M;return h[o]=t[o+"Min"],s[o]=t[o+"Max"],d=m(n,h,e)[o]!==h[o],M=m(n,s,e)[o]!==s[o],i=d?!M||i:!M&&i,i=a?!c||i:!c&&i,i=r?!x||i:!x&&i}for(-1<(g=C(u=u.slice(x,g+1),n))&&(x=u[g],r=n,a=t,o=P(x.xMax-r.x,r.x-x.xMin)<P(x.yMax-r.y,r.y-x.yMin),a=v(x,r,a,o,{soft:M.hardBounds,hard:M.hardBounds}),e=o?{y:r.y,x:x[a?"xMax":"xMin"]+(a?1:-1)}:{x:r.x,y:x[a?"yMax":"yMin"]+(a?1:-1)},c.push({end:n,start:e}),n=e);-1<(g=C(u,n));)i=n[h]-t[h]<0,(e={x:n.x,y:n.y})[h]=u[g][i?h+"Max":h+"Min"]+(i?1:-1),c.push({end:n,start:e}),n=e;return{path:j(o=(o=function t(n,i,e){if(n.x===i.x&&n.y===i.y)return[];var r,a,o,s=e?"x":"y",h=M.obstacleOptions.margin,c={soft:{xMin:l,xMax:y,yMin:p,yMax:f},hard:M.hardBounds},x=C(u,n);return-1<x?(r=v(x=u[x],n,i,e,c),A(x,M.hardBounds),o=e?{y:n.y,x:x[r?"xMax":"xMin"]+(r?1:-1)}:{x:n.x,y:x[r?"yMax":"yMin"]+(r?1:-1)},-1<(a=C(u,o))&&(A(a=u[a],M.hardBounds),o[s]=r?k(x[s+"Max"]-h+1,(a[s+"Min"]+x[s+"Max"])/2):P(x[s+"Min"]+h-1,(a[s+"Max"]+x[s+"Min"])/2),d=n.x===o.x&&n.y===o.y&&(d&&(o[s]=r?k(x[s+"Max"],a[s+"Max"])+1:P(x[s+"Min"],a[s+"Min"])-1),!d)),a=[{start:n,end:o}]):(a=[{start:n,end:{x:(h=m(n,{x:(e?i:n).x,y:(e?n:i).y},e)).x,y:h.y}}],h[e?"x":"y"]!==i[e?"x":"y"]&&(r=v(h.obstacle,h,i,!e,c),A(h.obstacle,M.hardBounds),x={x:e?h.x:h.obstacle[r?"xMax":"xMin"]+(r?1:-1),y:e?h.obstacle[r?"yMax":"yMin"]+(r?1:-1):h.y},a=a.concat(t({x:h.x,y:h.y},x,e=!e)))),a=a.concat(t(a[a.length-1].end,i,!e))}(t,n,s)).concat(c.reverse())),obstacles:o}}return i.requiresObstacles=n.requiresObstacles=!0,{fastAvoid:i,straight:function(t,n){return{path:[["M",t.x,t.y],["L",n.x,n.y]],obstacles:[{start:t,end:n}]}},simpleConnect:n}}),n(t,"Gantt/Pathfinder.js",[t["Gantt/Connection.js"],t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"],t["Gantt/PathfinderAlgorithms.js"]],function(M,t,n,i,d,e,r){var n=n.defaultOptions,a=e.addEvent,x=e.defined,o=e.error,s=e.extend,h=e.merge,l=e.pick,y=e.splat,p=Math.max,f=Math.min;function u(t){var n=t.shapeArgs;return n?{xMin:n.x||0,xMax:(n.x||0)+(n.width||0),yMin:n.y||0,yMax:(n.y||0)+(n.height||0)}:(n=t.graphic&&t.graphic.getBBox())?{xMin:t.plotX-n.width/2,xMax:t.plotX+n.width/2,yMin:t.plotY-n.height/2,yMax:t.plotY+n.height/2}:null}s(n,{connectors:{type:"straight",lineWidth:1,marker:{enabled:!1,align:"center",verticalAlign:"middle",inside:!1,lineWidth:1},startMarker:{symbol:"diamond"},endMarker:{symbol:"arrow-filled"}}});g.prototype.init=function(t){this.chart=t,this.connections=[],a(t,"redraw",function(){this.pathfinder.update()})},g.prototype.update=function(t){var e=this.chart,r=this,n=r.connections;r.connections=[],e.series.forEach(function(t){t.visible&&!t.options.isInternal&&t.points.forEach(function(n){var t=n.options;t&&t.dependency&&(t.connect=t.dependency);var i,t=n.options&&n.options.connect&&y(n.options.connect);n.visible&&!1!==n.isInside&&t&&t.forEach(function(t){(i=e.get("string"==typeof t?t:t.to))instanceof d&&i.series.visible&&i.visible&&!1!==i.isInside&&r.connections.push(new M(n,i,"string"==typeof t?{}:t))})})});for(var i=0,a=void 0,o=void 0,s=n.length,h=r.connections.length;i<s;++i){for(var o=!1,c=n[i],a=0;a<h;++a){var x=r.connections[a];if((c.options&&c.options.type)===(x.options&&x.options.type)&&c.fromPoint===x.fromPoint&&c.toPoint===x.toPoint){x.graphics=c.graphics,o=!0;break}}o||c.destroy()}delete this.chartObstacles,delete this.lineObstacles,r.renderConnections(t)},g.prototype.renderConnections=function(t){t?this.chart.series.forEach(function(n){function t(){var t=n.chart.pathfinder;(t&&t.connections||[]).forEach(function(t){t.fromPoint&&t.fromPoint.series===n&&t.render()}),n.pathfinderRemoveRenderEvent&&(n.pathfinderRemoveRenderEvent(),delete n.pathfinderRemoveRenderEvent)}!1===n.options.animation?t():n.pathfinderRemoveRenderEvent=a(n,"afterAnimate",t)}):this.connections.forEach(function(t){t.render()})},g.prototype.getChartObstacles=function(t){for(var n,i=[],e=this.chart.series,r=l(t.algorithmMargin,0),a=0,o=e.length;a<o;++a)if(e[a].visible&&!e[a].options.isInternal)for(var s,h=0,c=e[a].points.length;h<c;++h)(s=e[a].points[h]).visible&&(s=u(s))&&i.push({xMin:s.xMin-r,xMax:s.xMax+r,yMin:s.yMin-r,yMax:s.yMax+r});return i=i.sort(function(t,n){return t.xMin-n.xMin}),x(t.algorithmMargin)||(n=t.algorithmMargin=function(t){for(var n,i,e=t.length,r=0,a=[],s=function(t,n,i){var i=l(i,10),e=t.yMax+i>n.yMin-i&&t.yMin-i<n.yMax+i,r=t.xMax+i>n.xMin-i&&t.xMin-i<n.xMax+i,a=e?t.xMin>n.xMax?t.xMin-n.xMax:n.xMin-t.xMax:1/0,o=r?t.yMin>n.yMax?t.yMin-n.yMax:n.yMin-t.yMax:1/0;return r&&e?i?s(t,n,Math.floor(i/2)):1/0:f(a,o)};r<e;++r)for(n=r+1;n<e;++n)(i=s(t[r],t[n]))<80&&a.push(i);return a.push(80),p(Math.floor(a.sort(function(t,n){return t-n})[Math.floor(a.length/10)]/2-1),1)}(i),i.forEach(function(t){t.xMin-=n,t.xMax+=n,t.yMin-=n,t.yMax+=n})),i},g.prototype.getObstacleMetrics=function(t){for(var n,i=0,e=0,r=t.length;r--;)i<(n=t[r].xMax-t[r].xMin)&&(i=n),e<(n=t[r].yMax-t[r].yMin)&&(e=n);return{maxHeight:e,maxWidth:i}},g.prototype.getAlgorithmStartDirection=function(t){var n="left"!==t.align&&"right"!==t.align,t="top"!==t.verticalAlign&&"bottom"!==t.verticalAlign;return n?t&&void 0:t||void 0};var c=g;function g(t){this.chart=void 0,this.chartObstacles=void 0,this.chartObstacleMetrics=void 0,this.connections=void 0,this.group=void 0,this.lineObstacles=void 0,this.init(t)}return c.prototype.algorithms=r,i.Pathfinder=c,s(d.prototype,{getPathfinderAnchorPoint:function(t){var n,i,e=u(this);switch(t.align){case"right":n="xMax";break;case"left":n="xMin"}switch(t.verticalAlign){case"top":i="yMin";break;case"bottom":i="yMax"}return{x:n?e[n]:(e.xMin+e.xMax)/2,y:i?e[i]:(e.yMin+e.yMax)/2}},getRadiansToVector:function(t,n){var i;return x(n)||(i=u(this))&&(n={x:(i.xMin+i.xMax)/2,y:(i.yMin+i.yMax)/2}),Math.atan2(n.y-t.y,t.x-n.x)},getMarkerVector:function(t,n,i){for(var e,r=2*Math.PI,a=t,t=u(this),o=t.xMax-t.xMin,s=t.yMax-t.yMin,h=Math.atan2(s,o),c=!1,o=o/2,x=s/2,M=t.xMin+o,t=t.yMin+x,d={x:M,y:t},l=1,y=1;a<-Math.PI;)a+=r;for(;a>Math.PI;)a-=r;return e=Math.tan(a),-h<a&&a<=h?(y=-1,c=!0):h<a&&a<=Math.PI-h?y=-1:a>Math.PI-h||a<=-(Math.PI-h)?(l=-1,c=!0):l=-1,c?(d.x+=l*o,d.y+=y*o*e):(d.x+=l*(s/(2*e)),d.y+=y*x),i.x!==M&&(d.x=i.x),i.y!==t&&(d.y=i.y),{x:d.x+n*Math.cos(a),y:d.y-n*Math.sin(a)}}}),t.prototype.callbacks.push(function(t){!1!==t.options.connectors.enabled&&(((t=t).options.pathfinder||t.series.reduce(function(t,n){return n.options&&h(!0,n.options.connectors=n.options.connectors||{},n.options.pathfinder),t||n.options&&n.options.pathfinder},!1))&&(h(!0,t.options.connectors=t.options.connectors||{},t.options.pathfinder),o('WARNING: Pathfinder options have been renamed. Use "chart.connectors" or "series.connectors" instead.')),this.pathfinder=new c(this),this.pathfinder.update(!0))}),c}),n(t,"Extensions/ArrowSymbols.js",[t["Core/Utilities.js"]],function(n){var i=[];function r(t,n,i,e){return[["M",t,n+e/2],["L",t+i,n],["L",t,n+e/2],["L",t+i,n+e]]}function e(t,n,i,e){return r(t,n,i/2,e)}function a(t,n,i,e){return[["M",t+i,n],["L",t,n+e/2],["L",t+i,n+e],["Z"]]}function o(t,n,i,e){return a(t,n,i/2,e)}return{compose:function(t){n.pushUnique(i,t)&&((t=t.prototype.symbols).arrow=r,t["arrow-filled"]=a,t["arrow-filled-half"]=o,t["arrow-half"]=e,t["triangle-left"]=a,t["triangle-left-half"]=o)}}}),n(t,"masters/modules/pathfinder.src.js",[t["Core/Globals.js"],t["Extensions/ArrowSymbols.js"]],function(t,n){n.compose(t.SVGRenderer)})});