"use strict";!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/flowmap",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function o(t,o,e,i){t.hasOwnProperty(o)||(t[o]=i.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t=t?t._modules:{},"Series/FlowMap/FlowMapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o){var i,e,r=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),n=o.pick,s=o.isString,a=o.isNumber;return e=t.seriesTypes.mapline.prototype.pointClass,r(p,e),p.prototype.isValid=function(){var o=!(!this.options.to||!this.options.from);return[this.options.to,this.options.from].forEach(function(t){o=!!(o&&t&&(s(t)||a(n(t[0],t.lat))&&a(n(t[1],t.lon))))}),o},p;function p(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}}),o(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var o,i,r,t=t.seriesTypes.column.prototype,n=e.addEvent,s=e.defined;function a(t){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:t&&"hover"===t.state?1:0})}return i=o=o||{},r=[],i.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value&&(void 0===this.value||!isNaN(this.value))}},i.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(t){var o={};return!s(t.color)||t.state&&"normal"!==t.state||(o[this.colorProp||"fill"]=t.color),o},pointAttribs:t.pointAttribs},i.compose=function(t){var o=t.prototype.pointClass;return e.pushUnique(r,o)&&n(o,"afterSetState",a),t},o}),o(t,"Maps/MapSymbols.js",[t["Core/Renderer/SVG/SVGRenderer.js"]],function(t){var s=t.prototype.symbols;return s.bottombutton=function(t,o,e,i,r){var n;return r&&(n=(null==r?void 0:r.r)||0,r.brBoxY=o-n,r.brBoxHeight=i+n),s.roundedRect(t,o,e,i,r)},s.topbutton=function(t,o,e,i,r){return r&&(r.brBoxHeight=i+((null==r?void 0:r.r)||0)),s.roundedRect(t,o,e,i,r)},s}),o(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,o,e,i){var r,n,s,a=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),p=o.getOptions,h=i.merge,c=i.pick;function l(){return null!==n&&n.apply(this,arguments)||this}return a(l,n=t),l.prototype.init=function(t,o){var e=p().credits;t=h({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:c(e.mapText,' © <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:c(e.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t),n.prototype.init.call(this,t,o)},(s=t=(t=l)||{}).maps={},s.mapChart=function(t,o,e){return new s(t,o,e)},s.splitPath=function(t){return"string"==typeof t&&(t=(t=t.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(function(t){return/[A-za-z]/.test(t)?t:parseFloat(t)})),e.prototype.pathToSegments(t)},t}),o(t,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(t){var e,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=Number.MAX_VALUE;if(t.forEach(function(t){var o=t[t.length-2];t=t[t.length-1],"number"==typeof o&&"number"==typeof t&&(r=Math.min(r,o),i=Math.max(i,o),s=Math.min(s,t),n=Math.max(n,t),e=!0)}),e)return{x1:r,y1:s,x2:i,y2:n}},pointInPolygon:function(t,o){var e,i=!1,r=t.x,n=t.y;for(t=0,e=o.length-1;t<o.length;e=t++)o[t][1]>n!=o[e][1]>n&&r<(o[e][0]-o[t][0])*(n-o[t][1])/(o[e][1]-o[t][1])+o[t][0]&&(i=!i);return i}}}),o(t,"Series/Map/MapPoint.js",[t["Series/ColorMapComposition.js"],t["Maps/MapUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o,e,i){var r,n,s=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),a=o.boundsFromPath,p=i.extend,h=i.isNumber,c=i.pick;function l(){var t=null!==n&&n.apply(this,arguments)||this;return t.options=void 0,t.path=void 0,t.series=void 0,t}return n=e.seriesTypes.scatter.prototype.pointClass,s(l,n),l.getProjectedPath=function(t,o){return t.projectedPath||(o&&t.geometry?(o.hasCoordinates=!0,t.projectedPath=o.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]},l.prototype.applyOptions=function(t,o){var e=this.series;return t=n.prototype.applyOptions.call(this,t,o),o=e.joinBy,e.mapData&&e.mapMap&&((o=void 0!==(o=n.prototype.getNestedProperty.call(t,o[1]))&&e.mapMap[o])?p(t,o):-1!==e.pointArrayMap.indexOf("value")&&(t.value=t.value||null)),t},l.prototype.getProjectedBounds=function(t){var o,e,i=l.getProjectedPath(this,t),i=a(i),r=this.properties,n=this.series.chart.mapView;if(i)return o=r&&r["hc-middle-lon"],e=r&&r["hc-middle-lat"],n&&h(o)&&h(e)?(t=t.forward([o,e]),i.midX=t[0],i.midY=t[1]):(t=r&&r["hc-middle-x"],r=r&&r["hc-middle-y"],i.midX=i.x1+(i.x2-i.x1)*c(this.middleX,h(t)?t:.5),t=c(this.middleY,h(r)?r:.5),this.geometry||(t=1-t),i.midY=i.y2-(i.y2-i.y1)*t),i},l.prototype.onMouseOver=function(t){i.clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?n.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},l.prototype.setVisible=function(t){var o=t?"show":"hide";this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[o](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))},l.prototype.zoomTo=function(t){var o,e,i=this.series.chart,r=i.mapView,n=this.bounds;r&&n&&((o=h(this.insetIndex)&&r.insets[this.insetIndex])&&(e=o.projectedUnitsToPixels({x:n.x1,y:n.y1}),n=o.projectedUnitsToPixels({x:n.x2,y:n.y2}),e=r.pixelsToProjectedUnits({x:e.x,y:e.y}),n=r.pixelsToProjectedUnits({x:n.x,y:n.y}),n={x1:e.x,y1:e.y,x2:n.x,y2:n.y}),r.fitToBounds(n,void 0,!1),this.series.isDirty=!0,i.redraw(t))},p((o=l).prototype,{dataLabelOnNull:t.pointMembers.dataLabelOnNull,moveToTopOnHover:t.pointMembers.moveToTopOnHover,isValid:t.pointMembers.isValid}),o}),o(t,"Maps/MapViewOptionsDefault.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0}}),o(t,"Maps/MapViewInsetsOptionsDefault.js",[],function(){return{borderColor:"#cccccc",borderWidth:1,center:[0,0],padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}}),o(t,"Extensions/GeoJSON.js",[t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,o,e,i){function r(t,o){if(o=o||Object.keys(t.objects)[0],(o=t.objects[o])["hc-decoded-geojson"])return o["hc-decoded-geojson"];function e(t){return"number"==typeof t[0]?t.reduce(function(t,o,e){var i=o<0?n[~o]:n[o];return o<0?(i=i.slice(0,0===e?i.length:i.length-1)).reverse():e&&(i=i.slice(1)),t.concat(i)},[]):t.map(e)}var i,r,n=t.arcs,s=(t.transform&&(s=t.transform,i=s.scale,r=s.translate,n=t.arcs.map(function(t){var o=0,e=0;return t.map(function(t){return(t=t.slice())[0]=(o+=t[0])*i[0]+r[0],t[1]=(e+=t[1])*i[1]+r[1],t})})),o.geometries.map(function(t){return{type:"Feature",properties:t.properties,geometry:{type:t.type,coordinates:t.coordinates||e(t.arcs)}}}));return t={type:"FeatureCollection",copyright:t.copyright,copyrightShort:t.copyrightShort,copyrightUrl:t.copyrightUrl,features:s,"hc-recommended-mapview":o["hc-recommended-mapview"],bbox:t.bbox,title:t.title},o["hc-decoded-geojson"]=t}function n(t,n,o){void 0===n&&(n="map");var s=[];return(t="Topology"===t.type?r(t):t).features.forEach(function(t){var o,e,i=t.geometry||{},r=i.type;i=i.coordinates,t=t.properties,("map"!==n&&"mapbubble"!==n||"Polygon"!==r&&"MultiPolygon"!==r)&&("mapline"!==n||"LineString"!==r&&"MultiLineString"!==r)?"mappoint"===n&&"Point"===r&&i.length&&(o={geometry:{coordinates:i,type:r}}):i.length&&(o={geometry:{coordinates:i,type:r}}),o&&(r=t&&(t.name||t.NAME),i=t&&t.lon,e=t&&t.lat,s.push(p(o,{lat:"number"==typeof e?e:void 0,lon:"number"==typeof i?i:void 0,name:"string"==typeof r?r:void 0,properties:t})))}),o&&t.copyrightShort&&(o.chart.mapCredits=a(o.chart.options.credits.mapText,{geojson:t}),o.chart.mapCreditsFull=a(o.chart.options.credits.mapTextFull,{geojson:t})),s}var a=o.format,u=e.win,d=i.error,p=i.extend,s=i.merge;return o=i.wrap,t.prototype.transformFromLatLon=function(t,o){var e,i,r,n,s,a,p,h,c,l=this.options.chart.proj4||u.proj4;if(l)return e=void 0===(e=o.jsonmarginX)?0:e,i=void 0===(i=o.jsonmarginY)?0:i,r=void 0===(r=o.jsonres)?1:r,n=void 0===(n=o.scale)?1:n,s=void 0===(s=o.xoffset)?0:s,a=void 0===(a=o.xpan)?0:a,p=void 0===(p=o.yoffset)?0:p,h=void 0===(h=o.ypan)?0:h,t=l(o.crs,[t.lon,t.lat]),l=o.cosAngle||o.rotation&&Math.cos(o.rotation),c=o.sinAngle||o.rotation&&Math.sin(o.rotation),{x:(((o=o.rotation?[t[0]*l+t[1]*c,-t[0]*c+t[1]*l]:t)[0]-s)*n+a)*r+e,y:-(((p-o[1])*n+h)*r-i)};d(21,!1,this)},t.prototype.transformToLatLon=function(t,o){var e,i,r,n,s,a,p,h,c=this.options.chart.proj4||u.proj4;if(c){if(null!==t.y)return e=o.jsonmarginX,i=o.jsonmarginY,r=void 0===(r=o.jsonres)?1:r,n=void 0===(n=o.scale)?1:n,s=o.xoffset,a=o.xpan,p=o.yoffset,h=o.ypan,t={x:((t.x-(void 0===e?0:e))/r-(void 0===a?0:a))/n+(void 0===s?0:s),y:((t.y-(void 0===i?0:i))/r+(void 0===h?0:h))/n+(void 0===p?0:p)},e=o.cosAngle||o.rotation&&Math.cos(o.rotation),i=o.sinAngle||o.rotation&&Math.sin(o.rotation),{lat:(o=c(o.crs,"WGS84",o.rotation?{x:t.x*e+t.y*-i,y:t.x*i+t.y*e}:t)).y,lon:o.x}}else d(21,!1,this)},t.prototype.fromPointToLatLon=function(t){return this.mapView&&this.mapView.projectedUnitsToLonLat(t)},t.prototype.fromLatLonToPoint=function(t){return this.mapView&&this.mapView.lonLatToProjectedUnits(t)},o(t.prototype,"addCredits",function(t,o){o=s(!0,this.options.credits,o),this.mapCredits&&(o.href=null),t.call(this,o),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}),{geojson:e.geojson=n,topo2geo:e.topo2geo=r}}),o(t,"Core/Geometry/PolygonClip.js",[],function(){function c(t,o,e){return(o[0]-t[0])*(e[1]-t[1])>(o[1]-t[1])*(e[0]-t[0])}function l(t,o,e,i){var r=[t[0]-o[0],t[1]-o[1]],n=[e[0]-i[0],e[1]-i[1]];return t=t[0]*o[1]-t[1]*o[0],e=e[0]*i[1]-e[1]*i[0],i=1/(r[0]*n[1]-r[1]*n[0]),(r=[(t*n[0]-e*r[0])*i,(t*n[1]-e*r[1])*i]).isIntersection=!0,r}var t,i;return(i=t=t||{}).clipLineString=function(t,o){var e=[];for(t=i.clipPolygon(t,o,!1),o=1;o<t.length;o++)t[o].isIntersection&&t[o-1].isIntersection&&(e.push(t.splice(0,o)),o=0),o===t.length-1&&e.push(t);return e},i.clipPolygon=function(t,o,e){void 0===e&&(e=!0);for(var i,r=o[o.length-1],n=t,s=0;s<o.length;s++){var a=n;t=o[s];for(var n=[],p=e?a[a.length-1]:a[0],h=0;h<a.length;h++)i=a[h],c(r,t,i)?(c(r,t,p)||n.push(l(r,t,p,i)),n.push(i)):c(r,t,p)&&n.push(l(r,t,p,i)),p=i;r=t}return n},t}),o(t,"Maps/Projections/LambertConformalConic.js",[],function(){var s=Math.sign||function(t){return 0===t?0:0<t?1:-1},a=Math.PI/180,p=Math.PI/2;return t.prototype.forward=function(t){var o=t[0]*a,e=this.c,i=this.n,r=this.projectedBounds,n=(t=t[1]*a,0<e?t<1e-6-p&&(t=1e-6-p):p-1e-6<t&&(t=p-1e-6),e/Math.pow(Math.tan((p+t)/2),i)),e=[t=n*Math.sin(i*o)*63.78137,o=63.78137*(e-n*Math.cos(i*o))];return r&&(t<r.x1||t>r.x2||o<r.y1||o>r.y2)&&(e.outside=!0),e},t.prototype.inverse=function(t){var o=t[0]/63.78137,e=this.c,i=this.n,r=(t=e-t[1]/63.78137,s(i)*Math.sqrt(o*o+t*t)),n=Math.atan2(o,Math.abs(t))*s(t);return t*i<0&&(n-=Math.PI*s(o)*s(t)),[n/i/a,(2*Math.atan(Math.pow(e/r,1/i))-p)/a]},t;function t(t){var o=(e=(t.parallels||[]).map(function(t){return t*a}))[0]||0,e=null!=(i=e[1])?i:o,i=Math.cos(o);"object"==typeof t.projectedBounds&&(this.projectedBounds=t.projectedBounds),t=o===e?Math.sin(o):Math.log(i/Math.cos(e))/Math.log(Math.tan((p+e)/2)/Math.tan((p+o)/2)),Math.abs(t)<1e-10&&(t=1e-10*(s(t)||1)),this.n=t,this.c=i*Math.pow(Math.tan((p+o)/2),t)/t}}),o(t,"Maps/Projections/EqualEarth.js",[],function(){var p=Math.sqrt(3)/2;return t.prototype.forward=function(t){var o=Math.PI/180,e=Math.asin(p*Math.sin(t[1]*o)),i=e*e,r=i*i*i;return[t[0]*o*Math.cos(e)*74.03120656864502/(p*(1.340264+3*-.081106*i+r*(7*893e-6+.034164*i))),74.03120656864502*e*(1.340264+-.081106*i+r*(893e-6+.003796*i))]},t.prototype.inverse=function(t){for(var o=t[0]/74.03120656864502,e=(t=t[1]/74.03120656864502,180/Math.PI),i=t,r=0;r<12;++r){var n=i*i,s=n*n*n,a=i*(1.340264+-.081106*n+s*(893e-6+.003796*n))-t;if(i-=a/=n=1.340264+3*-.081106*n+s*(7*893e-6+.034164*n),Math.abs(a)<1e-9)break}return[e*p*o*(1.340264+3*-.081106*(n=i*i)+n*n*n*(7*893e-6+.034164*n))/Math.cos(i),e*Math.asin(Math.sin(i)/p)]},t;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}}),o(t,"Maps/Projections/Miller.js",[],function(){var o=Math.PI/4,e=Math.PI/180;return t.prototype.forward=function(t){return[t[0]*e*63.78137,79.7267125*Math.log(Math.tan(o+.4*t[1]*e))]},t.prototype.inverse=function(t){return[t[0]/63.78137/e,2.5*(Math.atan(Math.exp(t[1]/63.78137*.8))-o)/e]},t;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}}),o(t,"Maps/Projections/Orthographic.js",[],function(){var n=Math.PI/180;return t.prototype.forward=function(t){var o=t[0];return t=t[1]*n,t=[Math.cos(t)*Math.sin(o*n)*63.78460826781007,63.78460826781007*Math.sin(t)],(o<-90||90<o)&&(t.outside=!0),t},t.prototype.inverse=function(t){var o=t[0]/63.78460826781007,e=(t=t[1]/63.78460826781007,Math.sqrt(o*o+t*t)),i=Math.asin(e),r=Math.sin(i);return[Math.atan2(o*r,e*Math.cos(i))/n,Math.asin(e&&t*r/e)/n]},t;function t(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}}),o(t,"Maps/Projections/WebMercator.js",[],function(){var e=Math.PI/180;return t.prototype.forward=function(t){var o=Math.sin(t[1]*e),o=[63.78137*t[0]*e,63.78137*Math.log((1+o)/(1-o))/2];return 85.0511287798<Math.abs(t[1])&&(o.outside=!0),o},t.prototype.inverse=function(t){return[t[0]/(63.78137*e),(2*Math.atan(Math.exp(t[1]/63.78137))-Math.PI/2)/e]},t;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}}),o(t,"Maps/Projections/ProjectionRegistry.js",[t["Maps/Projections/LambertConformalConic.js"],t["Maps/Projections/EqualEarth.js"],t["Maps/Projections/Miller.js"],t["Maps/Projections/Orthographic.js"],t["Maps/Projections/WebMercator.js"]],function(t,o,e,i,r){return{EqualEarth:o,LambertConformalConic:t,Miller:e,Orthographic:i,WebMercator:r}}),o(t,"Maps/Projection.js",[t["Core/Geometry/PolygonClip.js"],t["Maps/Projections/ProjectionRegistry.js"],t["Core/Utilities.js"]],function(t,o,e){function u(t){return t<-180&&(t+=360),180<t&&(t-=360),t}var d=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,r=0,n=o.length;r<n;r++)!i&&r in o||((i=i||Array.prototype.slice.call(o,0,r))[r]=o[r]);return t.concat(i||Array.prototype.slice.call(o))},M=t.clipLineString,j=t.clipPolygon,f=e.clamp,y=e.erase,v=2*Math.PI/360;return x.add=function(t,o){x.registry[t]=o},x.greatCircle=function(t,o,e){var i=Math.atan2,r=Math.cos,n=Math.sin,s=Math.sqrt,a=t[1]*v,p=t[0]*v,h=o[1]*v,c=o[0]*v,l=h-a,u=c-p,d=(l=2*i(s(l=n(l/2)*n(l/2)+r(a)*r(h)*n(u/2)*n(u/2)),s(1-l)),Math.round(6371e3*l/5e5)),u=[];if(e&&u.push(t),1<d)for(d=t=1/d;d<.999;d+=t){var f=n((1-d)*l)/n(l),y=n(d*l)/n(l),m=f*r(a)*r(p)+y*r(h)*r(c),g=f*r(a)*n(p)+y*r(h)*n(c);f=i(f*n(a)+y*n(h),s(m*m+g*g)),m=i(g,m),u.push([m/v,f/v])}return e&&u.push(o),u},x.insertGreatCircles=function(t){for(var o,e=t.length-1;e--;)10<Math.max(Math.abs(t[e][0]-t[e+1][0]),Math.abs(t[e][1]-t[e+1][1]))&&((o=x.greatCircle(t[e],t[e+1])).length&&t.splice.apply(t,d([e+1,0],o,!1)))},x.toString=function(t){var o=(t=t||{}).rotation;return[t.name,o&&o.join(",")].join(";")},x.prototype.lineIntersectsBounds=function(t){function o(t,o,e){var i=t[0],r=(t=t[1],o?0:1);if("number"==typeof e&&i[o]>=e!=t[o]>=e)return i=i[r]+(e-i[o])/(t[o]-i[o])*(t[r]-i[r]),o?[i,e]:[e,i]}var e=this.bounds||{},i=e.x2,r=e.y1,n=e.y2,s=t[0];return((e=o(t,0,e.x1))||(e=o(t,0,i)))&&(s=e,t[1]=e),s=(e=o(t,1,r))||(e=o(t,1,n))?e:s},x.prototype.getRotator=function(t){var r=t[0]*v,o=(t[1]||0)*v,n=(t=(t[2]||0)*v,Math.cos(o)),s=Math.sin(o),a=Math.cos(t),p=Math.sin(t);if(0!=r||0!=o||0!==t)return{forward:function(t){var o=t[0]*v+r,e=t[1]*v,i=Math.cos(e);return t=Math.cos(o)*i,o=Math.sin(o)*i,i=(e=Math.sin(e))*n+t*s,[Math.atan2(o*a-i*p,t*n-e*s)/v,Math.asin(i*a+o*p)/v]},inverse:function(t){var o=t[0]*v,e=t[1]*v,i=Math.cos(e);return t=Math.cos(o)*i,o=Math.sin(o)*i,i=(e=Math.sin(e))*a-o*p,[(Math.atan2(o*a+e*p,t*n+i*s)-r)/v,Math.asin(i*n-t*s)/v]}}},x.prototype.forward=function(t){return t},x.prototype.inverse=function(t){return t},x.prototype.cutOnAntimeridian=function(n,s){var t,a=[],o=[n];if(n.forEach(function(t,o){var e=n[o-1];if(!o){if(!s)return;e=n[n.length-1]}var i=e[0],r=t[0];(i<-90||90<i)&&(r<-90||90<r)&&0<i!=0<r&&(r=f((180-(i+360)%360)/((r+360)%360-(i+360)%360),0,1),a.push({i:o,lat:e[1]+r*(t[1]-e[1]),direction:i<0?1:-1,previousLonLat:e,lonLat:t}))}),a.length)if(s){1==a.length%2&&(t=a.slice().sort(function(t,o){return Math.abs(o.lat)-Math.abs(t.lat)})[0],y(a,t));for(var e=a.length-2;0<=e;){var i=a[e].i,r=u(180+1e-6*a[e].direction),p=u(180-1e-6*a[e].direction);(i=n.splice.apply(n,d([i,a[e+1].i-i],x.greatCircle([r,a[e].lat],[r,a[e+1].lat],!0),!1))).push.apply(i,x.greatCircle([p,a[e+1].lat],[p,a[e].lat],!0)),o.push(i),e-=2}if(t)for(r=0;r<o.length;r++){var e=t.direction,h=t.lat;if(-1<(i=(p=o[r]).indexOf(t.lonLat))){var r=(h<0?-1:1)*this.maxLatitude,c=u(180+1e-6*e),l=u(180-1e-6*e),h=x.greatCircle([c,h],[c,r],!0);for(c+=120*e;-180<c&&c<180;c+=120*e)h.push([c,r]);h.push.apply(h,x.greatCircle([l,r],[l,t.lat],!0)),p.splice.apply(p,d([i,0],h,!1));break}}}else for(e=a.length;e--;)i=a[e].i,(i=n.splice(i,n.length,[u(180+1e-6*a[e].direction),a[e].lat])).unshift([u(180-1e-6*a[e].direction),a[e].lat]),o.push(i);return o},x.prototype.path=function(t){function o(t){var o=[t=t.map(function(t){var o;return g&&(o=(t=n?n.forward(t):t)[0],t=[o=Math.abs(o-180)<1e-6?o<180?179.999999:180.000001:o,t[1]]),t})];m&&(x.insertGreatCircles(t),g&&(o=e.cutOnAntimeridian(t,y))),o.forEach(function(t){if(!(t.length<2)){var o=!1,e=!1,i=function(t){o?f.push(["L",t[0],t[1]]):(f.push(["M",t[0],t[1]]),o=!0)},r=!1,n=!1,s=t.map(function(t){return(t=v.forward(t)).outside?r=!0:n=!0,1/0===t[1]?t[1]=1e10:-1/0===t[1]&&(t[1]=-1e10),t});if(g){if(y&&s.push(s[0]),r){if(!n)return;if(u)if(y)s=j(s,u);else if(d)return void M(s,u).forEach(function(t){o=!1,t.forEach(i)})}s.forEach(i)}else for(var a=0;a<s.length;a++){var p,h,c=t[a],l=s[a];e=!!l.outside||(y&&!p&&(t.push(p=c),s.push(l)),e&&h&&(y&&m?x.greatCircle(h,c).forEach(function(t){return i(v.forward(t))}):o=!1),i(l),h=c,!1)}}})}var u,e=this,d=this.bounds,i=this.def,r=this.rotator,f=[],y="Polygon"===t.type||"MultiPolygon"===t.type,m=this.hasGeoProjection,g=!i||!1!==i.antimeridianCutting,n=g?r:void 0,v=g&&i||this;d&&(u=[[d.x1,d.y1],[d.x2,d.y1],[d.x2,d.y2],[d.x1,d.y2]]);return"LineString"===t.type?o(t.coordinates):"MultiLineString"===t.type?t.coordinates.forEach(o):"Polygon"===t.type?(t.coordinates.forEach(o),f.length&&f.push(["Z"])):"MultiPolygon"===t.type&&(t.coordinates.forEach(function(t){t.forEach(o)}),f.length&&f.push(["Z"])),f},x.registry=o,x;function x(t){void 0===t&&(t={}),this.hasGeoProjection=this.hasCoordinates=!1,this.maxLatitude=90;var o=(this.options=t).name,e=t.projectedBounds,i=t.rotation,r=(this.rotator=i?this.getRotator(i):void 0,(o=o?x.registry[o]:void 0)&&(this.def=new o(t)),this.def),n=this.rotator;r&&(this.maxLatitude=r.maxLatitude||90,this.hasGeoProjection=!0),n&&r?(this.forward=function(t){return r.forward(n.forward(t))},this.inverse=function(t){return n.inverse(r.inverse(t))}):r?(this.forward=function(t){return r.forward(t)},this.inverse=function(t){return r.inverse(t)}):n&&(this.forward=n.forward,this.inverse=n.inverse),this.bounds="world"===e?r&&r.bounds:e}}),o(t,"Maps/MapView.js",[t["Maps/MapViewOptionsDefault.js"],t["Maps/MapViewInsetsOptionsDefault.js"],t["Extensions/GeoJSON.js"],t["Core/Chart/MapChart.js"],t["Maps/MapUtilities.js"],t["Maps/Projection.js"],t["Core/Utilities.js"]],function(c,i,t,o,e,l,r){function u(t,o){return Math.log(400.979322/Math.max((t.x2-t.x1)/(o.width/256),(t.y2-t.y1)/(o.height/256)))/Math.log(2)}var s,n,a=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),d=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,r=0,n=o.length;r<n;r++)!i&&r in o||((i=i||Array.prototype.slice.call(o,0,r))[r]=o[r]);return t.concat(i||Array.prototype.slice.call(o))},p=t.topo2geo,h=o.maps,f=e.boundsFromPath,y=e.pointInPolygon,m=r.addEvent,g=r.clamp,v=r.fireEvent,M=r.isArray,j=r.isNumber,x=r.isObject,b=r.isString,w=r.merge,P=r.pick,T=r.relativeLength,C=(L.mergeInsets=function(t,o){function e(t){var e={};return t.forEach(function(t,o){e[t&&t.id||"i".concat(o)]=t}),e}var i=w(e(t),e(o));return Object.keys(i).map(function(t){return i[t]})},L.prototype.createInsets=function(){var o=this,e=this.options,t=e.insets;t&&t.forEach(function(t){t=new O(o,w(e.insetOptions,t)),o.insets.push(t)})},L.prototype.fitToBounds=function(t,o,e,i){void 0===e&&(e=!0);var r,n=t||this.getProjectedBounds();n&&(r=P(o,t?0:this.options.padding),o=this.getField(!1),r=M(r)?r:[r,r,r,r],this.padding=[T(r[0],o.height),T(r[1],o.width),T(r[2],o.height),T(r[3],o.width)],this.playingField=this.getField(),o=u(n,this.playingField),t||(this.minZoom=o),t=this.projection.inverse([(n.x2+n.x1)/2,(n.y2+n.y1)/2]),this.setView(t,o,e,i))},L.prototype.getField=function(t){return{x:(t=(t=void 0===t?!0:t)?this.padding:[0,0,0,0])[3],y:t[0],width:this.chart.plotWidth-t[1]-t[3],height:this.chart.plotHeight-t[0]-t[2]}},L.prototype.getGeoMap=function(t){return b(t)?h[t]&&"Topology"===h[t].type?p(h[t]):h[t]:x(t,!0)?"FeatureCollection"===t.type?t:"Topology"===t.type?p(t):void 0:void 0},L.prototype.getMapBBox=function(){var t,o,e=this.getProjectedBounds(),i=this.getScale();if(e)return t=this.padding,o=this.projectedUnitsToPixels({x:e.x1,y:e.y2}),{width:(e.x2-e.x1)*i+t[1]+t[3],height:(e.y2-e.y1)*i+t[0]+t[2],x:o.x-t[3],y:o.y-t[0]}},L.prototype.getProjectedBounds=function(){var o=this.projection,t=this.chart.series.reduce(function(t,o){var e=o.getProjectedBounds&&o.getProjectedBounds();return e&&!1!==o.options.affectsMapView&&t.push(e),t},[]),e=this.options.fitToGeometry;return e?(this.fitToGeometryCache||("MultiPoint"===e.type?(t=(e=e.coordinates.map(function(t){return o.forward(t)})).map(function(t){return t[0]}),e=e.map(function(t){return t[1]}),this.fitToGeometryCache={x1:Math.min.apply(0,t),x2:Math.max.apply(0,t),y1:Math.min.apply(0,e),y2:Math.max.apply(0,e)}):this.fitToGeometryCache=f(o.path(e))),this.fitToGeometryCache):this.projection.bounds||L.compositeBounds(t)},L.prototype.getScale=function(){return 256/400.979322*Math.pow(2,this.zoom)},L.prototype.getSVGTransform=function(){var t=(i=this.playingField).x,o=i.y,e=i.width,i=i.height,r=this.projection.forward(this.center),n=this.projection.hasCoordinates?-1:1,s=this.getScale();return{scaleX:s,scaleY:n*=s,translateX:t+e/2-r[0]*s,translateY:o+i/2-r[1]*n}},L.prototype.lonLatToPixels=function(t){if(t=this.lonLatToProjectedUnits(t))return this.projectedUnitsToPixels(t)},L.prototype.lonLatToProjectedUnits=function(t){var o=this.chart,e=o.mapTransforms;if(e){for(var i in e)if(Object.hasOwnProperty.call(e,i)&&e[i].hitZone){var r=o.transformFromLatLon(t,e[i]);if(r&&y(r,e[i].hitZone.coordinates[0]))return r}return o.transformFromLatLon(t,e.default)}for(e=0,i=this.insets;e<i.length;e++)if((o=i[e]).options.geoBounds&&y({x:t.lon,y:t.lat},o.options.geoBounds.coordinates[0]))return t=o.projection.forward([t.lon,t.lat]),t=o.projectedUnitsToPixels({x:t[0],y:t[1]}),this.pixelsToProjectedUnits(t);if(!(t=this.projection.forward([t.lon,t.lat])).outside)return{x:t[0],y:t[1]}},L.prototype.projectedUnitsToLonLat=function(t){var o=this.chart;if(i=o.mapTransforms){for(var e in i)if(Object.hasOwnProperty.call(i,e)&&i[e].hitZone&&y(t,i[e].hitZone.coordinates[0]))return o.transformToLatLon(t,i[e]);return o.transformToLatLon(t,i.default)}for(var i=this.projectedUnitsToPixels(t),e=0,r=this.insets;e<r.length;e++)if((o=r[e]).hitZone&&y(i,o.hitZone.coordinates[0]))return t=o.pixelsToProjectedUnits(i),{lon:(t=o.projection.inverse([t.x,t.y]))[0],lat:t[1]};return{lon:(t=this.projection.inverse([t.x,t.y]))[0],lat:t[1]}},L.prototype.redraw=function(t){this.chart.series.forEach(function(t){t.useMapGeometry&&(t.isDirty=!0)}),this.chart.redraw(t)},L.prototype.setView=function(t,o,e,i){void 0===e&&(e=!0),t&&(this.center=t),"number"==typeof o&&("number"==typeof this.minZoom&&(o=Math.max(o,this.minZoom)),"number"==typeof this.options.maxZoom&&(o=Math.min(o,this.options.maxZoom)),j(o)&&(this.zoom=o));var r,n,s,a,p,h,c,l,u=this.getProjectedBounds();u&&(t=this.projection.forward(this.center),o=(s=this.playingField).x,r=s.y,n=s.width,s=s.height,a=this.getScale(),l=this.projectedUnitsToPixels({x:u.x1,y:u.y1}),c=this.projectedUnitsToPixels({x:u.x2,y:u.y2}),u=[(u.x1+u.x2)/2,(u.y1+u.y2)/2],this.chart.series.some(function(t){return t.isDrilling})||(p=l.x,h=c.y,c=c.x,l=l.y,c-p<n?t[0]=u[0]:p<o&&c<o+n?t[0]+=Math.max(p-o,c-n-o)/a:o+n<c&&o<p&&(t[0]+=Math.min(c-n-o,p-o)/a),l-h<s?t[1]=u[1]:h<r&&l<r+s?t[1]-=Math.max(h-r,l-s-r)/a:r+s<l&&r<h&&(t[1]-=Math.min(l-s-r,h-r)/a),this.center=this.projection.inverse(t)),this.insets.forEach(function(t){t.options.field&&(t.hitZone=t.getHitZone(),t.playingField=t.getField())}),this.render()),v(this,"afterSetView"),e&&this.redraw(i)},L.prototype.projectedUnitsToPixels=function(t){var o=this.getScale(),e=this.projection.forward(this.center),i=this.playingField;return{x:i.x+i.width/2-o*(e[0]-t.x),y:i.y+i.height/2+o*(e[1]-t.y)}},L.prototype.pixelsToLonLat=function(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))},L.prototype.pixelsToProjectedUnits=function(t){var o=t.x,e=(t=t.y,this.getScale()),i=this.projection.forward(this.center),r=this.playingField;return{x:i[0]+(o-(r.x+r.width/2))/e,y:i[1]-(t-(r.y+r.height/2))/e}},L.prototype.setUpEvents=function(){function t(t){var o,e,i=l.pointer.pinchDown,r=c.projection,n=l.mouseDownX,s=l.mouseDownY;1===i.length&&(n=i[0].chartX,s=i[0].chartY),"number"==typeof n&&"number"==typeof s&&(o="".concat(n,",").concat(s),i=(e=t.originalEvent).chartX,e=e.chartY,o!==p&&(p=o,a=c.projection.forward(c.center),h=(c.projection.options.rotation||[0,0]).slice()),o=(o=r.def&&r.def.bounds)&&u(o,c.playingField)||-1/0,"Orthographic"===r.options.name&&(c.minZoom||1/0)<1.3*o?(r=440/(c.getScale()*Math.min(l.plotWidth,l.plotHeight)),h&&(n=(n-i)*r-h[0],s=g(-h[1]-(s-e)*r,-80,80),i=c.zoom,c.update({projection:{rotation:[-n,-s]}},!1),c.fitToBounds(void 0,void 0,!1),c.zoom=i,l.redraw(!1))):j(i)&&j(e)&&(r=c.getScale(),s=c.projection.inverse([a[0]+(n-i)/r,a[1]-(s-e)/r*(c.projection.hasCoordinates?1:-1)]),c.setView(s,void 0,!0,!1)),t.preventDefault())}var a,p,h,c=this,l=this.chart;m(l,"pan",t),m(l,"touchpan",t),m(l,"selection",function(t){var o,e,i,r;t.resetSelection?c.zoomBy():(r=t.x-l.plotLeft,o=t.y-l.plotTop,e=(i=c.pixelsToProjectedUnits({x:r,y:o})).y,i=i.x,r=c.pixelsToProjectedUnits({x:r+t.width,y:o+t.height}),c.fitToBounds({x1:i,y1:e,x2:r.x,y2:r.y},void 0,!0,!t.originalEvent.touches&&void 0),/^touch/.test(t.originalEvent.type)||l.showResetZoom(),t.preventDefault())})},L.prototype.render=function(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())},L.prototype.update=function(t,o,e){void 0===o&&(o=!0);var i=(i=t.projection)&&l.toString(i)!==l.toString(this.options.projection),r=!1;w(!0,this.userOptions,t),w(!0,this.options,t),"insets"in t&&(this.insets.forEach(function(t){return t.destroy()}),this.insets.length=0,r=!0),(i||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(i||r)&&(this.chart.series.forEach(function(t){var o=t.transformGroups;if(t.clearBounds&&t.clearBounds(),t.isDirty=!0,t.isDirtyData=!0,r&&o)for(;1<o.length;)(t=o.pop())&&t.destroy()}),i&&(this.projection=new l(this.options.projection)),r&&this.createInsets(),t.center||!Object.hasOwnProperty.call(t,"zoom")||j(t.zoom)||this.fitToBounds(void 0,void 0,!1)),t.center||j(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),o&&this.chart.redraw(e)},L.prototype.zoomBy=function(t,o,e,i){var r=this.chart,n=this.projection.forward(this.center),s=(o=o?this.projection.forward(o):[])[0],a=o[1];"number"==typeof t?(t=this.zoom+t,o=void 0,e&&(s=e[0],a=e[1],e=this.getScale(),s=s-r.plotLeft-r.plotWidth/2,r=a-r.plotTop-r.plotHeight/2,s=n[0]+s/e,a=n[1]+r/e),"number"==typeof s&&"number"==typeof a&&(e=1-Math.pow(2,this.zoom)/Math.pow(2,t),s=n[0]-s,r=n[1]-a,n[0]-=s*e,n[1]+=r*e,o=this.projection.inverse(n)),this.setView(o,t,void 0,i)):this.fitToBounds(void 0,void 0,void 0,i)},L.compositeBounds=function(t){if(t.length)return t.slice(1).reduce(function(t,o){return t.x1=Math.min(t.x1,o.x1),t.y1=Math.min(t.y1,o.y1),t.x2=Math.max(t.x2,o.x2),t.y2=Math.max(t.y2,o.y2),t},w(t[0]))},L),O=(a(S,s=C),S.prototype.getField=function(t){if(void 0===t&&(t=!0),o=this.hitZone){var o,e=t?this.padding:[0,0,0,0],i=(o=o.coordinates[0]).map(function(t){return t[0]}),r=o.map(function(t){return t[1]}),n=(o=Math.min.apply(0,i)+e[3],i=Math.max.apply(0,i)-e[1],Math.min.apply(0,r)+e[0]),e=Math.max.apply(0,r)-e[2];if(j(o)&&j(n))return{x:o,y:n,width:i-o,height:e-n}}return s.prototype.getField.call(this,t)},S.prototype.getHitZone=function(){var o,t=this.chart,e=this.mapView,i=this.options,r=(i.field||{}).coordinates;if(r)return r=r[0],"percent"===i.units&&(o="mapBoundingBox"===i.relativeTo&&e.getMapBBox()||w(t.plotBox,{x:0,y:0}),r=r.map(function(t){return[T("".concat(t[0],"%"),o.width,o.x),T("".concat(t[1],"%"),o.height,o.y)]})),{type:"Polygon",coordinates:[r]}},S.prototype.getProjectedBounds=function(){return C.compositeBounds(this.allBounds)},S.prototype.isInside=function(t){var o=this.geoBoundsProjectedBox,e=this.geoBoundsProjectedPolygon;return!!(o&&t.x>=o.x1&&t.x<=o.x2&&t.y>=o.y1&&t.y<=o.y2&&e&&y(t,e))},S.prototype.render=function(){var t,r,n,s=this.chart,o=this.mapView,a=this.options,e=a.borderPath||a.field;e&&o.group&&(t=!0,this.border||(this.border=s.renderer.path().addClass("highcharts-mapview-inset-border").add(o.group),t=!1),s.styledMode||this.border.attr({stroke:a.borderColor,"stroke-width":a.borderWidth}),r=Math.round(this.border.strokeWidth())%2/2,n="mapBoundingBox"===a.relativeTo&&o.getMapBBox()||o.playingField,o=(e.coordinates||[]).reduce(function(t,o){return o.reduce(function(t,o,e){var i=o[0];return o=o[1],"percent"===a.units&&(i=s.plotLeft+T("".concat(i,"%"),n.width,n.x),o=s.plotTop+T("".concat(o,"%"),n.height,n.y)),i=Math.floor(i)+r,o=Math.floor(o)+r,t.push(0===e?["M",i,o]:["L",i,o]),t},t)},[]),this.border[t?"animate":"attr"]({d:o}))},S.prototype.destroy=function(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(function(t){return t()})},S.prototype.setUpEvents=function(){},S);function S(t,o){var e=s.call(this,t.chart,o)||this;return e.id=o.id,e.mapView=t,e.options=w(i,o),e.allBounds=[],e.options.geoBounds&&(t=t.projection.path(e.options.geoBounds),e.geoBoundsProjectedBox=f(t),e.geoBoundsProjectedPolygon=t.map(function(t){return[t[1]||0,t[2]||0]})),e}function L(t,o){var e,i,r,n,s,a,p,h=this;this.allowTransformAnimation=!0,this.insets=[],this.padding=[0,0,0,0],this.eventsToUnbind=[],this instanceof O||(i=d([t.options.chart.map],(t.options.series||[]).map(function(t){return t.mapData}),!0).map(function(t){return h.getGeoMap(t)}),r=[],i.forEach(function(t){t&&(e=e||t["hc-recommended-mapview"],t.bbox&&(t=t.bbox,r.push({x1:t[0],y1:t[1],x2:t[2],y2:t[3]})))}),(a=r.length&&L.compositeBounds(r))&&(p=a.x1,n=a.y1,s=a.x2,a=a.y2,p=180<s-p&&90<a-n?{name:"EqualEarth"}:{name:"LambertConformalConic",parallels:[n,a],rotation:[-(p+s)/2]}),this.geoMap=i[0]),this.userOptions=o||{},i=w(c,{projection:p},e,o),a=e&&e.insets,o=o&&o.insets,a&&o&&(i.insets=L.mergeInsets(a,o)),this.chart=t,this.center=i.center,this.options=i,this.projection=new l(i.projection),this.playingField=t.plotBox,this.zoom=i.zoom||0,this.createInsets(),this.eventsToUnbind.push(m(t,"afterSetChartSize",function(){h.playingField=h.getField(),void 0!==h.minZoom&&h.minZoom!==h.zoom||(h.fitToBounds(void 0,void 0,!1),!h.chart.hasRendered&&j(h.userOptions.zoom)&&(h.zoom=h.userOptions.zoom),h.userOptions.center&&w(!0,h.center,h.userOptions.center))})),this.setUpEvents()}return m(o,"afterInit",function(){this.mapView=new C(this,this.options.mapView)}),C}),o(t,"Series/Map/MapSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/ColorMapComposition.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Maps/MapView.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,o,e,f,i,y,r,n,s,p,a){var h,c,l=this&&this.__extends||(h=function(t,o){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),u=t.animObject,d=(t=f.noop,i.splitPath),m=(i=s.seriesTypes).column,g=i.scatter,v=(i=a.extend,a.find),M=a.fireEvent,j=a.getNestedProperty,x=a.isArray,b=a.defined,w=a.isNumber,P=a.isObject,T=a.merge,C=a.objectEach,O=a.pick,S=a.splat;function L(){var t=null!==c&&c.apply(this,arguments)||this;return t.chart=void 0,t.data=void 0,t.group=void 0,t.joinBy=void 0,t.options=void 0,t.points=void 0,t.processedData=[],t}return l(L,c=g),L.prototype.animate=function(t){var o=this.chart,e=this.group,i=u(this.options.animation);t?e.attr({translateX:o.plotLeft+o.plotWidth/2,translateY:o.plotTop+o.plotHeight/2,scaleX:.001,scaleY:.001}):e.animate({translateX:o.plotLeft,translateY:o.plotTop,scaleX:1,scaleY:1},i)},L.prototype.clearBounds=function(){this.points.forEach(function(t){delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds},L.prototype.doFullTranslate=function(){return!(!this.isDirtyData&&!this.chart.isResizing&&this.hasRendered)},L.prototype.drawMapDataLabels=function(){n.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},L.prototype.drawPoints=function(){var l=this,u=this,d=this.chart,e=this.group,t=this.transformGroups,i=void 0===t?[]:t,f=d.mapView,y=d.renderer;f&&((this.transformGroups=i)[0]||(i[0]=y.g().add(e)),f.insets.forEach(function(t,o){i[o+1]||i.push(y.g().add(e))}),this.doFullTranslate()&&(this.points.forEach(function(t){var o=t.graphic,e=t.shapeArgs;t.group=i["number"==typeof t.insetIndex?t.insetIndex+1:0],o&&o.parentGroup!==t.group&&o.add(t.group),e&&d.hasRendered&&!d.styledMode&&(e.fill=l.pointAttribs(t,t.state).fill)}),m.prototype.drawPoints.apply(this),this.points.forEach(function(t){var s,o,a=t.graphic;a&&(s=a.animate,o="",t.name&&(o+="highcharts-name-"+t.name.replace(/ /g,"-").toLowerCase()),t.properties&&t.properties["hc-key"]&&(o+=" highcharts-key-"+t.properties["hc-key"].toString().toLowerCase()),o&&a.addClass(o),d.styledMode&&a.css(l.pointAttribs(t,t.selected?"select":void 0)),a.animate=function(t,o,e){var i,r=w(t["stroke-width"])&&!w(a["stroke-width"]),n=w(a["stroke-width"])&&!w(t["stroke-width"]);return(r||n)&&(i=O(u.getStrokeWidth(u.options),1)/(d.mapView&&d.mapView.getScale()||1),r&&(a["stroke-width"]=i),n&&(t["stroke-width"]=i)),s.call(a,t,o,n?function(){a.element.removeAttribute("stroke-width"),delete a["stroke-width"],e&&e.apply(this,arguments)}:e)})})),i.forEach(function(e,t){function i(e){(u.points||[]).forEach(function(t){var o=t.graphic;o&&o["stroke-width"]&&(t=l.getStrokeWidth(t.options))&&o.attr({"stroke-width":t/e})})}var r,n,s,o,a=(0===t?f:f.insets[t-1]).getSVGTransform(),p=O(l.getStrokeWidth(l.options),1),h=a.scaleX,c=0<a.scaleY?1:-1;y.globalAnimation&&d.hasRendered&&f.allowTransformAnimation?(r=Number(e.attr("translateX")),n=Number(e.attr("translateY")),s=Number(e.attr("scaleX")),t={},"boolean"!=typeof(t=d.options.chart?T({},d.options.chart.animation):t)&&(o=t.step,t.step=function(t){o&&o.apply(this,arguments),function(t,o){t=s+(h-s)*o.pos,e.attr({translateX:r+(a.translateX-r)*o.pos,translateY:n+(a.translateY-n)*o.pos,scaleX:t,scaleY:t*c,"stroke-width":p/t}),i(t)}.apply(this,arguments)}),e.attr({animator:0}).animate({animator:1},t,function(){"boolean"!=typeof y.globalAnimation&&y.globalAnimation.complete&&y.globalAnimation.complete({applyDrilldown:!0})})):(e.attr(T(a,{"stroke-width":p/h})),i(h))}),this.isDrilling||this.drawMapDataLabels())},L.prototype.getProjectedBounds=function(){var t,n,s,a;return!this.bounds&&this.chart.mapView&&(t=this.chart.mapView,n=t.insets,s=t.projection,a=[],(this.points||[]).forEach(function(t){var o,e,i,r;(t.path||t.geometry)&&("string"==typeof t.path?t.path=d(t.path):x(t.path)&&"M"===t.path[0]&&(t.path=p.prototype.pathToSegments(t.path)),t.bounds||(o=t.getProjectedBounds(s))&&(t.labelrank=O(t.labelrank,(o.x2-o.x1)*(o.y2-o.y1)),e=o.midX,i=o.midY,n&&w(e)&&w(i)&&((r=v(n,function(t){return t.isInside({x:e,y:i})}))&&(delete t.projectedPath,(o=t.getProjectedBounds(r.projection))&&r.allBounds.push(o),t.insetIndex=n.indexOf(r))),t.bounds=o),t.bounds&&void 0===t.insetIndex&&a.push(t.bounds))}),this.bounds=r.compositeBounds(a)),this.bounds},L.prototype.getStrokeWidth=function(t){var o=this.pointAttrToOptions;return t[o&&o["stroke-width"]||"borderWidth"]},L.prototype.hasData=function(){return!!this.processedXData.length},L.prototype.pointAttribs=function(t,o){var e,i=(r=t.series.chart).mapView,r=r.styledMode?this.colorAttribs(t):m.prototype.pointAttribs.call(this,t,o),n=this.getStrokeWidth(t.options);return o&&(o=T(this.options.states[o],t.options.states&&t.options.states[o]||{}),e=this.getStrokeWidth(o),b(e)&&(n=e),r.stroke=null!=(e=o.borderColor)?e:t.color),n&&i&&(n/=i.getScale()),e=this.getStrokeWidth(this.options),r.dashstyle&&i&&w(e)&&(n=e/i.getScale()),t.visible||(r.fill=this.options.nullColor),b(n)?r["stroke-width"]=n:delete r["stroke-width"],r["stroke-linecap"]=r["stroke-linejoin"]=this.options.linecap,r},L.prototype.updateData=function(){return!this.processedData&&c.prototype.updateData.apply(this,arguments)},L.prototype.setData=function(t,o,e,i){void 0===o&&(o=!0),delete this.bounds,c.prototype.setData.call(this,t,!1,void 0,i),this.processData(),this.generatePoints(),o&&this.chart.redraw(e)},L.prototype.processData=function(){var t,o,e,i,r=this.options,n=r.data,s=this.chart.options.chart,a=this.joinBy,p=r.keys||this.pointArrayMap,h=[],c={},l=(l=this.chart.mapView)&&(P(r.mapData,!0)?l.getGeoMap(r.mapData):l.geoMap),u=this.chart.mapTransforms,d=((this.chart.mapTransforms=u=s.mapTransforms||l&&l["hc-transform"]||u)&&C(u,function(t){t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),x(r.mapData)?t=r.mapData:l&&"FeatureCollection"===l.type&&(this.mapTitle=l.title,t=f.geojson(l,this.type,this)),this.processedData=[]);if(n&&n.forEach(function(t,o){var e=0;if(w(t))d[o]={value:t};else if(x(t)){d[o]={},!r.keys&&t.length>p.length&&"string"==typeof t[0]&&(d[o]["hc-key"]=t[0],++e);for(var i=0;i<p.length;++i,++e)p[i]&&void 0!==t[e]&&(0<p[i].indexOf(".")?y.prototype.setNestedProperty(d[o],t[e],p[i]):d[o][p[i]]=t[e])}else d[o]=n[o];a&&"_i"===a[0]&&(d[o]._i=o)}),t){for(this.mapData=t,this.mapMap={},u=0;u<t.length;u++)l=(s=t[u]).properties,s._i=u,a[0]&&l&&l[a[0]]&&(s[a[0]]=l[a[0]]),c[s[a[0]]]=s;this.mapMap=c,a[1]&&(o=a[1],d.forEach(function(t){t=j(o,t),c[t]&&h.push(c[t])})),r.allAreas&&(a[1]&&(e=a[1],d.forEach(function(t){h.push(j(e,t))})),i="|"+h.map(function(t){return t&&t[a[0]]}).join("|")+"|",t.forEach(function(t){a[0]&&-1!==i.indexOf("|"+t[a[0]]+"|")||d.push(T(t,{value:null}))}))}this.processedXData=Array(d.length)},L.prototype.setOptions=function(t){var o=(t=n.prototype.setOptions.call(this,t)).joinBy;return(o=this.joinBy=S(o=null===o?"_i":o))[1]||(o[1]=o[0]),t},L.prototype.translate=function(){var e,i=this.doFullTranslate(),r=this.chart.mapView,n=r&&r.projection;!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints(),delete this.bounds,!r||r.userOptions.center||w(r.userOptions.zoom)||r.zoom!==r.minZoom?this.getProjectedBounds():r.fitToBounds(void 0,void 0,!1)),r&&(e=r.getSVGTransform(),this.points.forEach(function(t){var o=w(t.insetIndex)&&r.insets[t.insetIndex].getSVGTransform()||e;o&&t.bounds&&w(t.bounds.midX)&&w(t.bounds.midY)&&(t.plotX=t.bounds.midX*o.scaleX+o.translateX,t.plotY=t.bounds.midY*o.scaleY+o.translateY),i&&(t.shapeType="path",t.shapeArgs={d:y.getProjectedPath(t,n)}),t.projectedPath&&!t.projectedPath.length?t.setVisible(!1):t.setVisible(!0)})),M(this,"afterTranslate")},L.defaultOptions=T(g.defaultOptions,{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){var t=this.series.chart.numberFormatter,o=this.point.value;return w(o)?t(o,-1):""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}),i((a=L).prototype,{type:"map",axisTypes:o.seriesMembers.axisTypes,colorAttribs:o.seriesMembers.colorAttribs,colorKey:o.seriesMembers.colorKey,directTouch:!0,drawDataLabels:t,drawGraph:t,forceDL:!0,getCenter:e.getCenter,getExtremesFromAll:!0,getSymbol:t,isCartesian:!1,parallelArrays:o.seriesMembers.parallelArrays,pointArrayMap:o.seriesMembers.pointArrayMap,pointClass:y,preserveAspectRatio:!0,searchPoint:t,trackerGroups:o.seriesMembers.trackerGroups,useMapGeometry:!0}),o.compose(a),s.registerSeriesType("map",a),a}),o(t,"Series/FlowMap/FlowMapSeries.js",[t["Series/FlowMap/FlowMapPoint.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,n,s=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),M=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,r=0,n=o.length;r<n;r++)!i&&r in o||((i=i||Array.prototype.slice.call(o,0,r))[r]=o[r]);return t.concat(i||Array.prototype.slice.call(o))},d=o.series.prototype.pointClass,a=(h=o.seriesTypes).column,p=h.mapline,f=i.addEvent,y=i.arrayMax,m=i.arrayMin,j=i.defined,h=i.extend,g=i.isArray,x=i.merge,b=i.pick,w=i.relativeLength;function P(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.smallestWeight=void 0,t.greatestWeight=void 0,t.centerOfPoints=void 0,t}return s(P,n=p),P.getLength=function(t,o){return Math.sqrt(t*t+o*o)},P.normalize=function(t,o){var e=this.getLength(t,o);return[t/e,o/e]},P.markerEndPath=function(t,o,e,i){var r,n,s,a=w(i.width||0,this.getLength(o[0]-t[0],o[1]-t[1])),p=i.markerType||"arrow",h=this.normalize(o[0]-t[0],o[1]-t[1]),c=(i=h[0],h=h[1],[]);return"arrow"===p&&(r=t[0],n=t[1],c.push(["L",r-i*a,n-h*a]),c.push(["L",e[0],e[1]]),r=o[0],n=o[1],c.push(["L",r+i*a,n+h*a])),"mushroom"===p&&(p=t[0],t=t[1],r=o[0],n=((o=o[1])-t)/2+t,s=2*(e[0]-(s=(r-p)/2+p))+s,e=2*(e[1]-n)+n,c.push(["L",p-i*a,t-h*a]),c.push(["Q",s,e,r+i*a,o+h*a])),c},P.prototype.animate=function(t){var o=this.points;t||o.forEach(function(t){if(t.shapeArgs&&g(t.shapeArgs.d)&&t.shapeArgs.d.length){var o=t.shapeArgs.d,e=o[0][1],i=o[0][2];if(e&&i){for(var r=[],n=0;n<o.length;n++){r.push(M([],o[n],!0));for(var s=1;s<o[n].length;s++)r[n][s]=s%2?e:i}t.graphic&&(t.graphic.attr({d:r}),t.graphic.animate({d:o}))}}})},P.prototype.getLinkWidth=function(t){var o=this.options.width,e=t.options.weight||this.options.weight;if(t.options.weight=e,o&&!e)return o;if(t=this.smallestWeight,o=this.greatestWeight,!j(e)||!t||!o)return 0;var i=this.options.minWidth;return(e-t)*(this.options.maxWidth-i)/(o-t||1)+i},P.prototype.autoCurve=function(t,o,e,i,r,n){var s=e-t,a=i-o;return t=(e-t)/2+t-r,o=(i-o)/2+o-n,s=(s=(s=180*(s=Math.atan2(s*o-a*t,s*t+a*o))/Math.PI)<0?360+s:s)*Math.PI/180,.7*-Math.sin(s)},P.prototype.pointAttribs=function(t,o){return(o=e.prototype.pointAttribs.call(this,t,o)).fill=b(t.options.fillColor,t.options.color,"none"===this.options.fillColor?null:this.options.fillColor,this.color),o["fill-opacity"]=b(t.options.fillOpacity,this.options.fillOpacity),o["stroke-width"]=b(t.options.lineWidth,this.options.lineWidth,1),t.options.opacity&&(o.opacity=t.options.opacity),o},P.prototype.translate=function(){var h=this,c=(!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints()),[]),l=0,u=0;this.points.forEach(function(t){function o(){t.series.isDirty=!0}function e(t){if((t=s.get(t))instanceof d&&t.plotX&&t.plotY)return f(t,"update",o),{x:t.plotX,y:t.plotY}}function i(t){return g(t)?{lon:t[0],lat:t[1]}:t}var r,n,s=h.chart,a=s.mapView,p=t.options;"string"==typeof p.from?r=e(p.from):"object"==typeof p.from&&a&&(r=a.lonLatToPixels(i(p.from))),"string"==typeof p.to?n=e(p.to):"object"==typeof p.to&&a&&(n=a.lonLatToPixels(i(p.to))),t.fromPos=r,t.toPos=n,r&&n&&(l+=(r.x+n.x)/2,u+=(r.y+n.y)/2),b(t.options.weight,h.options.weight)&&c.push(b(t.options.weight,h.options.weight))}),this.smallestWeight=m(c),this.greatestWeight=y(c),this.centerOfPoints={x:l/this.points.length,y:u/this.points.length},this.points.forEach(function(t){h.getLinkWidth(t)?(t.fromPos&&(t.plotX=t.fromPos.x,t.plotY=t.fromPos.y),t.shapeType="path",t.shapeArgs=h.getPointShapeArgs(t),t.color=b(t.options.color,t.series.color)):t.shapeArgs={d:[]}})},P.prototype.getPointShapeArgs=function(t){var o,e=t.fromPos,i=t.toPos;if(!e||!i)return{};var r,n,s,a=this.getLinkWidth(t)/2,p=t.options,h=x(this.options.markerEnd,p.markerEnd),c=b(p.growTowards,this.options.growTowards),l=e.x||0,u=e.y||0,e=i.x||0,d=i.y||0,p=b(p.curveFactor,this.options.curveFactor),f=h&&h.enabled&&h.height||0,y=(j(p)||(p=this.autoCurve(l,u,e,d,this.centerOfPoints.x,this.centerOfPoints.y)),f&&(f=w(f,4*a),s=(n=P.normalize((s=l+(r=.5*(e-l)))+(n=.5*(d-u))*p-e,u+n+-r*p-d))[1],e+=n[0]*f,d+=s*f),.5*(d-u)),m=l+(r=.5*(e-l)),g=u+y,v=(s=r,r=y,f=(n=P.normalize(r,y=-s))[0],n=n[1],f*=a*(s=1+.25*Math.sqrt(p*p)),n*=a*s,y=(s=P.normalize((r=m+r*p)-l,(p=g+y*p)-u))[0],m=s[1],s=y,y=m*a,m=-s*a,g=(s=P.normalize(r-e,p-d))[0],s[1]);return s=g,c&&(y/=a,m/=a,f/=4,n/=4),a={d:[["M",l-y,u-m],["Q",r-f,p-n,e-(g=-v*a),d-(v=s*a)],["L",e+g,d+v],["Q",r+f,p+n,l+y,u+m],["Z"]]},h&&h.enabled&&a.d&&(i=P.markerEndPath([e-g,d-v],[e+g,d+v],[i.x,i.y],h),(o=a.d).splice.apply(o,M([2,0],i,!1))),h=t.options.from,i=t.options.to,o=h.lat,h=h.lon,c=i.lat,i=i.lon,o&&h&&(t.options.from="".concat(+o,", ").concat(+h)),c&&i&&(t.options.to="".concat(+c,", ").concat(+i)),a},P.defaultOptions=x(p.defaultOptions,{animation:!0,dataLabels:{enabled:!1},fillOpacity:.5,markerEnd:{enabled:!0,height:"40%",width:"40%",markerType:"arrow"},width:1,maxWidth:25,minWidth:5,lineWidth:void 0,tooltip:{headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:"{point.options.from} → {point.options.to}: <b>{point.options.weight}</b>"}}),h((i=P).prototype,{pointClass:t,pointArrayMap:["from","to","weight"],drawPoints:a.prototype.drawPoints,useMapGeometry:!0}),o.registerSeriesType("flowmap",i),i}),o(t,"masters/modules/flowmap.src.js",[],function(){})});