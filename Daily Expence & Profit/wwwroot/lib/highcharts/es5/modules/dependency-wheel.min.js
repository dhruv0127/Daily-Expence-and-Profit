"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(e,t,n,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,n),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e=e?e._modules:{},"Series/DependencyWheel/DependencyWheelPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var o,n,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=t.wrap;return n=e.seriesTypes.sankey.prototype.pointClass,r(i,n),i.prototype.getDataLabelPath=function(t){var n=this,e=this.series.chart.renderer,o=this.shapeArgs,r=this.angle<0||this.angle>Math.PI,i=o.start||0,s=o.end||0;return this.dataLabelPath?(this.dataLabelPath=this.dataLabelPath.destroy(),delete this.dataLabelPath):a(t,"destroy",function(e){return n.dataLabelPath&&(n.dataLabelPath=n.dataLabelPath.destroy()),e.call(t)}),this.dataLabelPath=e.arc({open:!0,longArc:Math.abs(Math.abs(i)-Math.abs(s))<Math.PI?0:1}).attr({x:o.x,y:o.y,r:o.r+(this.dataLabel.options.distance||0),start:r?i:s,end:r?s:i,clockwise:+r}).add(e.defs)},i.prototype.isValid=function(){return!0},i;function i(){var e=null!==n&&n.apply(this,arguments)||this;return e.angle=void 0,e.fromNode=void 0,e.index=void 0,e.linksFrom=void 0,e.linksTo=void 0,e.options=void 0,e.series=void 0,e.shapeArgs=void 0,e.toNode=void 0,e}}),t(e,"Series/DependencyWheel/DependencyWheelSeriesDefaults.js",[],function(){return{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}}),t(e,"Series/DependencyWheel/DependencyWheelSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/DependencyWheel/DependencyWheelPoint.js"],e["Series/DependencyWheel/DependencyWheelSeriesDefaults.js"],e["Core/Globals.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,n,o,r,i,s){var a,c,p=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=e.animObject,u=o.deg2rad,y=(e=(o=i.seriesTypes).pie,o.sankey),h=(o=s.extend,s.merge);function l(){var e=null!==c&&c.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.nodeColumns=void 0,e.nodes=void 0,e.points=void 0,e}return p(l,c=y),l.prototype.animate=function(e){var o;e||(o=d(this.options.animation).duration/2/this.nodes.length,this.nodes.forEach(function(e,t){var n=e.graphic;n&&(n.attr({opacity:0}),setTimeout(function(){e.graphic&&e.graphic.animate({opacity:1},{duration:o})},o*t))},this),this.points.forEach(function(e){var t=e.graphic;!e.isNode&&t&&t.attr({opacity:0}).animate({opacity:1},this.options.animation)},this))},l.prototype.createNode=function(e){var s=y.prototype.createNode.call(this,e);return s.getSum=function(){return s.linksFrom.concat(s.linksTo).reduce(function(e,t){return e+t.weight},0)},s.offset=function(e){function n(e){return e.fromNode===s?e.toNode:e.fromNode}var t,o=0;for((r=s.linksFrom.concat(s.linksTo)).sort(function(e,t){return n(e).index-n(t).index}),t=0;t<r.length;t++)if(n(r[t]).index>s.index){var r=r.slice(0,t).reverse().concat(r.slice(t).reverse()),i=!0;break}for(i||r.reverse(),t=0;t<r.length;t++){if(r[t]===e)return o;o+=r[t].weight}},s},l.prototype.createNodeColumns=function(){var t=[r.compose([],this)];return this.nodes.forEach(function(e){e.column=0,t[0].push(e)}),t},l.prototype.getNodePadding=function(){return this.options.nodePadding/Math.PI},l.prototype.translate=function(){var d=this.options,h=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),r=this.getCenter(),l=(d.startAngle-90)*u,e=d.borderRadius,i="object"==typeof e?e.radius:e;y.prototype.translate.call(this),this.nodeColumns[0].forEach(function(e){var a,c,t,p,n,o;e.sum&&(o=e.shapeArgs,a=r[0],c=r[1],t=r[2]/2,p=t-d.nodeWidth,n=l+h*(o.y||0),o=l+h*((o.y||0)+(o.height||0)),e.angle=n+(o-n)/2,e.shapeType="arc",e.shapeArgs={x:a,y:c,r:t,innerR:p,start:n,end:o,borderRadius:i},e.dlBox={x:a+Math.cos((n+o)/2)*(t+p)/2,y:c+Math.sin((n+o)/2)*(t+p)/2,width:1,height:1},e.linksFrom.forEach(function(i){var s,e;i.linkBase&&(e=i.linkBase.map(function(e,t){e*=h;var n=Math.cos(l+e)*(1+p),o=Math.sin(l+e)*(1+p),r=d.curveFactor||0;return(s=Math.abs(i.linkBase[3-t]*h-e))>Math.PI&&(s=2*Math.PI-s),(s*=p)<p&&(r*=s/p),{x:a+n,y:c+o,cpX:a+(1-r)*n,cpY:c+(1-r)*o}}),i.shapeArgs={d:[["M",e[0].x,e[0].y],["A",p,p,0,0,1,e[1].x,e[1].y],["C",e[1].cpX,e[1].cpY,e[2].cpX,e[2].cpY,e[2].x,e[2].y],["A",p,p,0,0,1,e[3].x,e[3].y],["C",e[3].cpX,e[3].cpY,e[0].cpX,e[0].cpY,e[0].x,e[0].y]]})}))})},l.defaultOptions=h(y.defaultOptions,n),o((s=l).prototype,{orderNodes:!1,getCenter:e.prototype.getCenter}),s.prototype.pointClass=t,i.registerSeriesType("dependencywheel",s),s}),t(e,"masters/modules/dependency-wheel.src.js",[],function(){})});