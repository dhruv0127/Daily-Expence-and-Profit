"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function i(t,i,o,a){t.hasOwnProperty(i)||(t[i]=a.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t=t?t._modules:{},"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),i(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(e,t){function o(t){var i=t.length;return t=a(t),t=p(t)&&i?s(t/i):t}function a(t){var i=t.length;if(!i&&t.hasNulls)var o=null;else if(i)for(o=0;i--;)o+=t[i];return o}var i=t.arrayMax,n=t.arrayMin,s=t.correctFloat,r=t.extend,p=t.isNumber;return r(e,t={average:o,averages:function(){var i=[];return[].forEach.call(arguments,function(t){i.push(o(t))}),void 0===i[0]?void 0:i},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},high:function(t){return t.length?i(t):t.hasNulls?null:void 0},hlc:function(t,i,o){if(t=e.high(t),i=e.low(i),o=e.close(o),p(t)||p(i)||p(o))return[t,i,o]},low:function(t){return t.length?n(t):t.hasNulls?null:void 0},ohlc:function(t,i,o,a){if(t=e.open(t),i=e.high(i),o=e.low(o),a=e.close(a),p(t)||p(i)||p(o)||p(a))return[t,i,o,a]},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},range:function(t,i){return t=e.low(t),i=e.high(i),p(t)||p(i)?[t,i]:null===t&&null===i?null:void 0},sum:a}),t}),i(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),i(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(s,i){function o(i){var o=this,t=o.series;t.forEach(function(t){t.groupPixelWidth=void 0}),t.forEach(function(t){t.groupPixelWidth=o.getGroupPixelWidth&&o.getGroupPixelWidth(),t.groupPixelWidth&&(t.hasProcessed=!0),t.applyGrouping(!!i.hasExtremesChanged)})}function a(){for(var t,i,o=this.series,a=o.length,e=0,n=!1;a--;)(i=o[a].options.dataGrouping)&&(e=Math.max(e,l(i.groupPixelWidth,s.common.groupPixelWidth)),t=(o[a].processedXData||o[a].data).length,(o[a].groupPixelWidth||t>this.chart.plotSizeX/e||t&&i.forced)&&(n=!0));return n?e:0}function e(){this.series.forEach(function(t){t.hasProcessed=!1})}function n(i,t){var o;if(t=l(t,!0),i=i||{forced:!1,units:null},this instanceof r)for(o=this.series.length;o--;)this.series[o].update({dataGrouping:i},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping="boolean"==typeof i?i:h(i,t.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()}var r,p=i.addEvent,u=i.extend,h=i.merge,l=i.pick,d=[];return{compose:function(t){r=t,i.pushUnique(d,t)&&(p(t,"afterSetScale",e),p(t,"postProcessData",o),u(t.prototype,{applyGrouping:o,getGroupPixelWidth:a,setDataGrouping:n}))}}}),i(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(S,G,y,r,t,o){function a(t){var i=this.chart,o=this.options.dataGrouping,a=!1!==this.allowDG&&o&&A(o.enabled,i.options.isStock),e=this.visible||!i.options.chart.ignoreHiddenSeries,n=this.currentDataGrouping,s=!1;if(a&&!this.requireSorting&&(this.requireSorting=s=!0),t=!1==!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!t)||!a,s&&(this.requireSorting=!1),!t){this.destroyGroupedData();var r=o.groupAll?this.xData:this.processedXData,p=o.groupAll?this.yData:this.processedYData,u=(a=i.plotSizeX,(t=this.xAxis).options.ordinal),s=void 0;if((h=this.groupPixelWidth)&&r&&r.length&&a){this.isDirty=s=!0,this.points=null;var h,l=(d=t.getExtremes()).min,d=d.max,u=u&&t.ordinal&&t.ordinal.getGroupIntervalFactor(l,d,this)||1,a=t.getTimeTicks(y.Additions.prototype.normalizeTimeTickInterval(h*(d-l)/a*u,o.units||G.units),Math.min(l,r[0]),Math.max(d,r[r.length-1]),t.options.startOfWeek,r,this.closestPointRange),r=(h=v.groupData.apply(this,[r,p,a,o.approximation])).groupedXData,p=h.groupedYData,i=(u=0,o&&o.smoothed&&r.length&&(o.firstAnchor="firstPoint",o.anchor="middle",o.lastAnchor="lastPoint",M(32,!1,i,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),r),g=this.options.dataGrouping,l=this.currentDataGrouping&&this.currentDataGrouping.gapSize;if(g&&this.xData&&l&&this.groupMap){var c,f=i.length-1,m=g.anchor,x=A(g.firstAnchor,m),g=A(g.lastAnchor,m);if(m&&"start"!==m)for(var D=l*{middle:.5,end:1}[m],m=i.length-1;m--&&0<m;)i[m]+=D;x&&"start"!==x&&this.xData[0]>=i[0]&&(m=this.groupMap[0].start,D=this.groupMap[0].length,c=void 0,E(m)&&E(D)&&(c=m+(D-1)),i[0]={middle:i[0]+.5*l,end:i[0]+l,firstPoint:this.xData[0],lastPoint:c&&this.xData[c]}[x]),g&&"start"!==g&&l&&i[f]>=d-l&&(d=this.groupMap[this.groupMap.length-1].start,i[f]={middle:i[f]+.5*l,end:i[f]+l,firstPoint:d&&this.xData[d],lastPoint:this.xData[this.xData.length-1]}[g])}for(d=1;d<a.length;d++)a.info.segmentStarts&&-1!==a.info.segmentStarts.indexOf(d)||(u=Math.max(a[d]-a[d-1],u));(d=a.info).gapSize=u,this.closestPointRange=a.info.totalRange,this.groupMap=h.groupMap,e&&(b((e=r)[0])&&E(t.min)&&E(t.dataMin)&&e[0]<t.min&&((!b(t.options.min)&&t.min<=t.dataMin||t.min===t.dataMin)&&(t.min=Math.min(e[0],t.min)),t.dataMin=Math.min(e[0],t.dataMin)),b(e[e.length-1])&&E(t.max)&&E(t.dataMax)&&e[e.length-1]>t.max&&((!b(t.options.max)&&E(t.dataMax)&&t.max>=t.dataMax||t.max===t.dataMax)&&(t.max=Math.max(e[e.length-1],t.max)),t.dataMax=Math.max(e[e.length-1],t.dataMax))),o.groupAll&&(this.allGroupedData=p,r=(o=this.cropData(r,p,t.min,t.max,1)).xData,p=o.yData,this.cropStart=o.start),this.processedXData=r,this.processedYData=p}else this.groupMap=null;this.hasGroupedData=s,this.currentDataGrouping=d,this.preventGraphAnimation=(n&&n.totalRange)!==(d&&d.totalRange)}}function e(){this.groupedData&&(this.groupedData.forEach(function(t,i){t&&(this.groupedData[i]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)}function n(){i.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function s(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")?"sum":"average"}function p(t,i,o,a){var e=this,n=e.data,s=e.options&&e.options.data,r=[],p=[],u=[],h=t.length,l=!!i,d=[],g=e.pointArrayMap,c=g&&g.length,f=["x"].concat(g||["y"]),m=this.options.dataGrouping&&this.options.dataGrouping.groupAll,x=0,D=0;if(a="function"==typeof a?a:a&&S[a]?S[a]:S[e.getDGApproximation&&e.getDGApproximation()||"average"],c)for(var G=g.length;G--;)d.push([]);else d.push([]);for(var G=c||1,y=0;y<=h;y++)if(!(t[y]<o[0])){for(;void 0!==o[x+1]&&t[y]>=o[x+1]||y===h;){var v=o[x],M=(e.dataGroupInfo={start:m?D:e.cropStart+D,length:d[0].length},a.apply(e,d));for(e.pointClass&&!b(e.dataGroupInfo.options)&&(e.dataGroupInfo.options=P(e.pointClass.prototype.optionsToObject.call({series:e},e.options.data[e.cropStart+D])),f.forEach(function(t){delete e.dataGroupInfo.options[t]})),void 0!==M&&(r.push(v),p.push(M),u.push(e.dataGroupInfo)),D=y,v=0;v<G;v++)d[v].length=0,d[v].hasNulls=!1;if(x+=1,y===h)break}if(y===h)break;if(g){var A,v=e.options.dataGrouping&&e.options.dataGrouping.groupAll?y:e.cropStart+y,M=n&&n[v]||e.pointClass.prototype.applyOptions.apply({series:e},[s[v]]);for(v=0;v<c;v++)A=M[g[v]],E(A)?d[v].push(A):null===A&&(d[v].hasNulls=!0)}else v=l?i[y]:null,E(v)?d[0].push(v):null===v&&(d[0].hasNulls=!0)}return{groupedXData:r,groupedYData:p,groupMap:u}}function u(t){t=t.options;var i,o=this.type,a=this.chart.options.plotOptions,e=this.useCommonDataGrouping&&G.common,n=G.seriesSpecific,s=r.defaultOptions.plotOptions[o].dataGrouping;a&&(n[o]||e)&&(i=this.chart.rangeSelector,s=s||P(G.common,n[o]),t.dataGrouping=P(e,s,a.series&&a.series.dataGrouping,a[o].dataGrouping,this.userOptions.dataGrouping,!t.isInternal&&i&&E(i.selected)&&i.buttonOptions[i.selected].dataGrouping))}var v=t.series.prototype,h=o.addEvent,b=o.defined,M=o.error,l=o.extend,E=o.isNumber,P=o.merge,A=o.pick,i=v.generatePoints,d=[];return{compose:function(t){var i=t.prototype.pointClass;o.pushUnique(d,i)&&h(i,"update",function(){if(this.dataGroup)return M(24,!1,this.series.chart),!1}),o.pushUnique(d,t)&&(h(t,"afterSetOptions",u),h(t,"destroy",e),l(t.prototype,{applyGrouping:a,destroyGroupedData:e,generatePoints:n,getDGApproximation:s,groupData:p}))},groupData:p}}),i(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/FormatUtilities.js"],t["Core/Utilities.js"]],function(a,d,e,t,n){function s(t){var i,o,a=this.chart,e=a.time,n=t.labelConfig,s=n.series,r=s.tooltipOptions,p=s.options.dataGrouping,u=s.xAxis,h=r.xDateFormat,l=r[t.isFooter?"footerFormat":"headerFormat"];u&&"datetime"===u.options.type&&p&&f(n.key)&&(i=s.currentDataGrouping,p=p.dateTimeLabelFormats||d.common.dateTimeLabelFormats,i?(r=p[i.unitName],1===i.count?h=r[0]:(h=r[1],o=r[2])):!h&&p&&u.dateTime&&(h=u.dateTime.getXDateFormat(n.x,r.dateTimeLabelFormats)),h=e.dateFormat(h,n.key),o&&(h+=e.dateFormat(o,n.key+i.totalRange-1)),s.chart.styledMode&&(l=this.styledModeFormat(l)),t.text=g(l,{point:c(n.point,{key:h}),series:s},a),t.preventDefault())}var g=t.format,r=n.addEvent,c=n.extend,f=n.isNumber,p=[];return t={compose:function(t,i,o){a.compose(t),e.compose(i),o&&n.pushUnique(p,o)&&r(o,"headerFormatter",s)},groupData:e.groupData}}),i(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(t,i,o,a){t.dataGrouping={approximationDefaults:i,approximations:o},a.compose(t.Axis,t.Series,t.Tooltip)})});