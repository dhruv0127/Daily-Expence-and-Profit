!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/flowmap",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function o(t,o,e,i){t.hasOwnProperty(o)||(t[o]=i.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t,"Series/FlowMap/FlowMapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o){var i,e,r=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),t=t.seriesTypes.mapline.prototype.pointClass,n=o.pick,s=o.isString,a=o.isNumber;function p(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}return r(p,e=t),p.prototype.isValid=function(){var o=!(!this.options.to||!this.options.from);return[this.options.to,this.options.from].forEach(function(t){o=!!(o&&t&&(s(t)||a(n(t[0],t.lat))&&a(n(t[1],t.lon))))}),o},p}),o(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var o,i,r,t=t.seriesTypes.column.prototype,n=e.addEvent,s=e.defined;function a(t){var o=this;o.moveToTopOnHover&&o.graphic&&o.graphic.attr({zIndex:t&&"hover"===t.state?1:0})}return i=o=o||{},r=[],i.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},i.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(t){var o={};!s(t.color)||t.state&&"normal"!==t.state||(o[this.colorProp||"fill"]=t.color);return o},pointAttribs:t.pointAttribs},i.compose=function(t){var o=t.prototype.pointClass;return e.pushUnique(r,o)&&n(o,"afterSetState",a),t},o}),o(t,"Maps/MapSymbols.js",[t["Core/Renderer/SVG/SVGRenderer.js"]],function(t){var s=t.prototype.symbols;return s.bottombutton=function(t,o,e,i,r){var n;return r&&(n=(null==r?void 0:r.r)||0,r.brBoxY=o-n,r.brBoxHeight=i+n),s.roundedRect(t,o,e,i,r)},s.topbutton=function(t,o,e,i,r){var n;return r&&(n=(null==r?void 0:r.r)||0,r.brBoxHeight=i+n),s.roundedRect(t,o,e,i,r)},s}),o(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,o,e,i){var r,n,s,a=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),p=o.getOptions,h=i.merge,c=i.pick,o=(a(l,n=t),l.prototype.init=function(t,o){var e=p().credits,e=h({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:c(e.mapText,' © <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:c(e.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t);n.prototype.init.call(this,e,o)},l);function l(){return null!==n&&n.apply(this,arguments)||this}return(s=o=l||{}).maps={},s.mapChart=function(t,o,e){return new s(t,o,e)},s.splitPath=function(t){return t="string"==typeof t?(t=t.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(function(t){return/[A-za-z]/.test(t)?t:parseFloat(t)}):t,e.prototype.pathToSegments(t)},o}),o(t,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(t){var e,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=Number.MAX_VALUE;if(t.forEach(function(t){var o=t[t.length-2],t=t[t.length-1];"number"==typeof o&&"number"==typeof t&&(r=Math.min(r,o),i=Math.max(i,o),s=Math.min(s,t),n=Math.max(n,t),e=!0)}),e)return{x1:r,y1:s,x2:i,y2:n}},pointInPolygon:function(t,o){for(var e=!1,i=t.x,r=t.y,n=0,s=o.length-1;n<o.length;s=n++)o[n][1]>r!=o[s][1]>r&&i<(o[s][0]-o[n][0])*(r-o[n][1])/(o[s][1]-o[n][1])+o[n][0]&&(e=!e);return e}}}),o(t,"Series/Map/MapPoint.js",[t["Series/ColorMapComposition.js"],t["Maps/MapUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o,e,i){var r,n,s=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),a=o.boundsFromPath,o=e.seriesTypes.scatter,p=i.extend,h=i.isNumber,c=i.pick,e=(n=o.prototype.pointClass,s(l,n),l.getProjectedPath=function(t,o){return t.projectedPath||(o&&t.geometry?(o.hasCoordinates=!0,t.projectedPath=o.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]},l.prototype.applyOptions=function(t,o){var e=this.series,t=n.prototype.applyOptions.call(this,t,o),o=e.joinBy;return e.mapData&&e.mapMap&&(o=o[1],(o=void 0!==(o=n.prototype.getNestedProperty.call(t,o))&&e.mapMap[o])?p(t,o):-1!==e.pointArrayMap.indexOf("value")&&(t.value=t.value||null)),t},l.prototype.getProjectedBounds=function(t){var o,e,i=l.getProjectedPath(this,t),i=a(i),r=this.properties,n=this.series.chart.mapView;if(i)return o=r&&r["hc-middle-lon"],e=r&&r["hc-middle-lat"],n&&h(o)&&h(e)?(n=t.forward([o,e]),i.midX=n[0],i.midY=n[1]):(t=r&&r["hc-middle-x"],o=r&&r["hc-middle-y"],i.midX=i.x1+(i.x2-i.x1)*c(this.middleX,h(t)?t:.5),e=c(this.middleY,h(o)?o:.5),this.geometry||(e=1-e),i.midY=i.y2-(i.y2-i.y1)*e),i},l.prototype.onMouseOver=function(t){i.clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?n.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},l.prototype.setVisible=function(t){var o=t?"show":"hide";this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[o](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))},l.prototype.zoomTo=function(t){var o,e,i=this,r=i.series.chart,n=r.mapView,s=i.bounds;n&&s&&((e=h(i.insetIndex)&&n.insets[i.insetIndex])&&(o=e.projectedUnitsToPixels({x:s.x1,y:s.y1}),e=e.projectedUnitsToPixels({x:s.x2,y:s.y2}),o=n.pixelsToProjectedUnits({x:o.x,y:o.y}),e=n.pixelsToProjectedUnits({x:e.x,y:e.y}),s={x1:o.x,y1:o.y,x2:e.x,y2:e.y}),n.fitToBounds(s,void 0,!1),i.series.isDirty=!0,r.redraw(t))},l);function l(){var t=null!==n&&n.apply(this,arguments)||this;return t.options=void 0,t.path=void 0,t.series=void 0,t}return p(e.prototype,{dataLabelOnNull:t.pointMembers.dataLabelOnNull,moveToTopOnHover:t.pointMembers.moveToTopOnHover,isValid:t.pointMembers.isValid}),e}),o(t,"Maps/MapViewOptionsDefault.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0}}),o(t,"Maps/MapViewInsetsOptionsDefault.js",[],function(){return{borderColor:"#cccccc",borderWidth:1,center:[0,0],padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}}),o(t,"Extensions/GeoJSON.js",[t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,o,e,i){var r=o.format,u=e.win,d=i.error,a=i.extend,n=i.merge,o=i.wrap;function p(t,o){o=o||Object.keys(t.objects)[0];o=t.objects[o];if(o["hc-decoded-geojson"])return o["hc-decoded-geojson"];function e(t){return"number"==typeof t[0]?t.reduce(function(t,o,e){var i=o<0?n[~o]:n[o];return o<0?(i=i.slice(0,0===e?i.length:i.length-1)).reverse():e&&(i=i.slice(1)),t.concat(i)},[]):t.map(e)}var i,r,n=t.arcs,s=(t.transform&&(s=t.transform,i=s.scale,r=s.translate,n=t.arcs.map(function(t){var o=0,e=0;return t.map(function(t){return(t=t.slice())[0]=(o+=t[0])*i[0]+r[0],t[1]=(e+=t[1])*i[1]+r[1],t})})),o.geometries.map(function(t){return{type:"Feature",properties:t.properties,geometry:{type:t.type,coordinates:t.coordinates||e(t.arcs)}}})),s={type:"FeatureCollection",copyright:t.copyright,copyrightShort:t.copyrightShort,copyrightUrl:t.copyrightUrl,features:s,"hc-recommended-mapview":o["hc-recommended-mapview"],bbox:t.bbox,title:t.title};return o["hc-decoded-geojson"]=s}function s(t,n,o){void 0===n&&(n="map");var s=[],t="Topology"===t.type?p(t):t;return t.features.forEach(function(t){var o,e,i=t.geometry||{},r=i.type,i=i.coordinates,t=t.properties;("map"!==n&&"mapbubble"!==n||"Polygon"!==r&&"MultiPolygon"!==r)&&("mapline"!==n||"LineString"!==r&&"MultiLineString"!==r)?"mappoint"===n&&"Point"===r&&i.length&&(o={geometry:{coordinates:i,type:r}}):i.length&&(o={geometry:{coordinates:i,type:r}}),o&&(i=t&&(t.name||t.NAME),r=t&&t.lon,e=t&&t.lat,s.push(a(o,{lat:"number"==typeof e?e:void 0,lon:"number"==typeof r?r:void 0,name:"string"==typeof i?i:void 0,properties:t})))}),o&&t.copyrightShort&&(o.chart.mapCredits=r(o.chart.options.credits.mapText,{geojson:t}),o.chart.mapCreditsFull=r(o.chart.options.credits.mapTextFull,{geojson:t})),s}return t.prototype.transformFromLatLon=function(t,o){var e,i,r,n,s,a,p,h,c,l=this.options.chart.proj4||u.proj4;{if(l)return e=void 0===(e=o.jsonmarginX)?0:e,i=void 0===(i=o.jsonmarginY)?0:i,r=void 0===(r=o.jsonres)?1:r,n=void 0===(n=o.scale)?1:n,s=void 0===(s=o.xoffset)?0:s,a=void 0===(a=o.xpan)?0:a,p=void 0===(p=o.yoffset)?0:p,h=void 0===(h=o.ypan)?0:h,l=l(o.crs,[t.lon,t.lat]),t=o.cosAngle||o.rotation&&Math.cos(o.rotation),c=o.sinAngle||o.rotation&&Math.sin(o.rotation),{x:(((o=o.rotation?[l[0]*t+l[1]*c,-l[0]*c+l[1]*t]:l)[0]-s)*n+a)*r+e,y:-(((p-o[1])*n+h)*r-i)};d(21,!1,this)}},t.prototype.transformToLatLon=function(t,o){var e,i,r,n,s,a,p,h,c=this.options.chart.proj4||u.proj4;if(c){if(null!==t.y)return i=o.jsonmarginX,e=o.jsonmarginY,r=o.jsonres,p=o.scale,h=o.xoffset,a=o.xpan,n=o.yoffset,s=o.ypan,a={x:((t.x-(void 0===i?0:i))/(i=void 0===r?1:r)-(void 0===a?0:a))/(r=void 0===p?1:p)+(void 0===h?0:h),y:((t.y-(void 0===e?0:e))/i+(void 0===s?0:s))/r+(void 0===n?0:n)},p=o.cosAngle||o.rotation&&Math.cos(o.rotation),h=o.sinAngle||o.rotation&&Math.sin(o.rotation),{lat:(t=c(o.crs,"WGS84",o.rotation?{x:a.x*p+a.y*-h,y:a.x*h+a.y*p}:a)).y,lon:t.x}}else d(21,!1,this)},t.prototype.fromPointToLatLon=function(t){return this.mapView&&this.mapView.projectedUnitsToLonLat(t)},t.prototype.fromLatLonToPoint=function(t){return this.mapView&&this.mapView.lonLatToProjectedUnits(t)},o(t.prototype,"addCredits",function(t,o){o=n(!0,this.options.credits,o),this.mapCredits&&(o.href=null),t.call(this,o),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}),{geojson:e.geojson=s,topo2geo:e.topo2geo=p}}),o(t,"Core/Geometry/PolygonClip.js",[],function(){function l(t,o,e){return(o[0]-t[0])*(e[1]-t[1])>(o[1]-t[1])*(e[0]-t[0])}function u(t,o,e,i){var r=[t[0]-o[0],t[1]-o[1]],n=[e[0]-i[0],e[1]-i[1]],t=t[0]*o[1]-t[1]*o[0],o=e[0]*i[1]-e[1]*i[0],e=1/(r[0]*n[1]-r[1]*n[0]);return(i=[(t*n[0]-o*r[0])*e,(t*n[1]-o*r[1])*e]).isIntersection=!0,i}var t,n;return(n=t=t||{}).clipLineString=function(t,o){for(var e=[],i=n.clipPolygon(t,o,!1),r=1;r<i.length;r++)i[r].isIntersection&&i[r-1].isIntersection&&(e.push(i.splice(0,r)),r=0),r===i.length-1&&e.push(i);return e},n.clipPolygon=function(t,o,e){void 0===e&&(e=!0);for(var i,r=o[o.length-1],n=t,s=0;s<o.length;s++){for(var a=n,p=o[s],n=[],h=e?a[a.length-1]:a[0],c=0;c<a.length;c++)i=a[c],l(r,p,i)?(l(r,p,h)||n.push(u(r,p,h,i)),n.push(i)):l(r,p,h)&&n.push(u(r,p,h,i)),h=i;r=p}return n},t}),o(t,"Maps/Projections/LambertConformalConic.js",[],function(){function s(t){return Math.tan((c+t)/2)}var a=Math.sign||function(t){return 0===t?0:0<t?1:-1},p=63.78137,h=Math.PI/180,c=Math.PI/2;function t(t){var o=(t.parallels||[]).map(function(t){return t*h}),e=o[0]||0,o=null!=(o=o[1])?o:e,i=Math.cos(e),t=("object"==typeof t.projectedBounds&&(this.projectedBounds=t.projectedBounds),e===o?Math.sin(e):Math.log(i/Math.cos(o))/Math.log(s(o)/s(e)));Math.abs(t)<1e-10&&(t=1e-10*(a(t)||1)),this.n=t,this.c=i*Math.pow(s(e),t)/t}return t.prototype.forward=function(t){var o=t[0]*h,e=this.c,i=this.n,r=this.projectedBounds,t=t[1]*h,t=(0<e?t<1e-6-c&&(t=1e-6-c):c-1e-6<t&&(t=c-1e-6),e/Math.pow(s(t),i)),n=t*Math.sin(i*o)*p,e=(e-t*Math.cos(i*o))*p,t=[n,e];return r&&(n<r.x1||n>r.x2||e<r.y1||e>r.y2)&&(t.outside=!0),t},t.prototype.inverse=function(t){var o=t[0]/p,t=t[1]/p,e=this.c,i=this.n,t=e-t,r=a(i)*Math.sqrt(o*o+t*t),n=Math.atan2(o,Math.abs(t))*a(t);return t*i<0&&(n-=Math.PI*a(o)*a(t)),[n/i/h,(2*Math.atan(Math.pow(e/r,1/i))-c)/h]},t}),o(t,"Maps/Projections/EqualEarth.js",[],function(){var p=1.340264,h=-.081106,c=893e-6,l=.003796,u=Math.sqrt(3)/2,d=74.03120656864502;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}return t.prototype.forward=function(t){var o=Math.PI/180,e=Math.asin(u*Math.sin(t[1]*o)),i=e*e,r=i*i*i;return[t[0]*o*Math.cos(e)*d/(u*(p+3*h*i+r*(7*c+9*l*i))),e*d*(p+h*i+r*(c+l*i))]},t.prototype.inverse=function(t){for(var o,e,i,r=t[0]/d,n=t[1]/d,t=180/Math.PI,s=n,a=0;a<12&&(s-=o=(s*(p+h*(e=s*s)+(i=e*e*e)*(c+l*e))-n)/(p+3*h*e+i*(7*c+9*l*e)),!(Math.abs(o)<1e-9));++a);return[t*u*r*(p+3*h*(e=s*s)+(i=e*e*e)*(7*c+9*l*e))/Math.cos(s),t*Math.asin(Math.sin(s)/u)]},t}),o(t,"Maps/Projections/Miller.js",[],function(){var o=Math.PI/4,e=Math.PI/180,i=63.78137;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}return t.prototype.forward=function(t){return[t[0]*e*i,1.25*i*Math.log(Math.tan(o+.4*t[1]*e))]},t.prototype.inverse=function(t){return[t[0]/i/e,2.5*(Math.atan(Math.exp(t[1]/i*.8))-o)/e]},t}),o(t,"Maps/Projections/Orthographic.js",[],function(){var n=Math.PI/180,s=63.78460826781007;function t(){this.antimeridianCutting=!1,this.bounds={x1:-s,x2:s,y1:-s,y2:s}}return t.prototype.forward=function(t){var o=t[0],t=t[1]*n,t=[Math.cos(t)*Math.sin(o*n)*s,Math.sin(t)*s];return(o<-90||90<o)&&(t.outside=!0),t},t.prototype.inverse=function(t){var o=t[0]/s,t=t[1]/s,e=Math.sqrt(o*o+t*t),i=Math.asin(e),r=Math.sin(i),i=Math.cos(i);return[Math.atan2(o*r,e*i)/n,Math.asin(e&&t*r/e)/n]},t}),o(t,"Maps/Projections/WebMercator.js",[],function(){var e=85.0511287798,i=63.78137,r=Math.PI/180;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=e}return t.prototype.forward=function(t){var o=Math.sin(t[1]*r),o=[i*t[0]*r,i*Math.log((1+o)/(1-o))/2];return Math.abs(t[1])>e&&(o.outside=!0),o},t.prototype.inverse=function(t){return[t[0]/(i*r),(2*Math.atan(Math.exp(t[1]/i))-Math.PI/2)/r]},t}),o(t,"Maps/Projections/ProjectionRegistry.js",[t["Maps/Projections/LambertConformalConic.js"],t["Maps/Projections/EqualEarth.js"],t["Maps/Projections/Miller.js"],t["Maps/Projections/Orthographic.js"],t["Maps/Projections/WebMercator.js"]],function(t,o,e,i,r){return{EqualEarth:o,LambertConformalConic:t,Miller:e,Orthographic:i,WebMercator:r}}),o(t,"Maps/Projection.js",[t["Core/Geometry/PolygonClip.js"],t["Maps/Projections/ProjectionRegistry.js"],t["Core/Utilities.js"]],function(t,o,e){function j(t){return t<-180&&(t+=360),180<t&&(t-=360),t}var x=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,r=0,n=o.length;r<n;r++)!i&&r in o||((i=i||Array.prototype.slice.call(o,0,r))[r]=o[r]);return t.concat(i||Array.prototype.slice.call(o))},M=t.clipLineString,b=t.clipPolygon,w=e.clamp,P=e.erase,T=2*Math.PI/360,C=1e-6;function L(t){void 0===t&&(t={}),this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90;var o=(this.options=t).name,e=t.projectedBounds,i=t.rotation,i=(this.rotator=i?this.getRotator(i):void 0,o?L.registry[o]:void 0),r=(i&&(this.def=new i(t)),this.def),n=this.rotator;r&&(this.maxLatitude=r.maxLatitude||90,this.hasGeoProjection=!0),n&&r?(this.forward=function(t){return r.forward(n.forward(t))},this.inverse=function(t){return n.inverse(r.inverse(t))}):r?(this.forward=function(t){return r.forward(t)},this.inverse=function(t){return r.inverse(t)}):n&&(this.forward=n.forward,this.inverse=n.inverse),this.bounds="world"===e?r&&r.bounds:e}return L.add=function(t,o){L.registry[t]=o},L.greatCircle=function(t,o,e){var i=Math.atan2,r=Math.cos,n=Math.sin,s=Math.sqrt,a=t[1]*T,p=t[0]*T,h=o[1]*T,c=o[0]*T,l=h-a,u=c-p,l=n(l/2)*n(l/2)+r(a)*r(h)*n(u/2)*n(u/2),d=2*i(s(l),s(1-l)),u=Math.round(6371e3*d/5e5),f=[];if(e&&f.push(t),1<u)for(var y=1/u,m=y;m<.999;m+=y){var g=n((1-m)*d)/n(d),v=n(m*d)/n(d),M=g*r(a)*r(p)+v*r(h)*r(c),j=g*r(a)*n(p)+v*r(h)*n(c),g=i(g*n(a)+v*n(h),s(M*M+j*j)),v=i(j,M);f.push([v/T,g/T])}return e&&f.push(o),f},L.insertGreatCircles=function(t){for(var o,e=t.length-1;e--;)10<Math.max(Math.abs(t[e][0]-t[e+1][0]),Math.abs(t[e][1]-t[e+1][1]))&&((o=L.greatCircle(t[e],t[e+1])).length&&t.splice.apply(t,x([e+1,0],o,!1)))},L.toString=function(t){var t=t||{},o=t.name,t=t.rotation;return[o,t&&t.join(",")].join(";")},L.prototype.lineIntersectsBounds=function(t){function o(t,o,e){var i,r=t[0],t=t[1],n=o?0:1;if("number"==typeof e&&r[o]>=e!=t[o]>=e)return i=(e-r[o])/(t[o]-r[o]),i=r[n]+i*(t[n]-r[n]),o?[i,e]:[e,i]}var e=this.bounds||{},i=e.x1,r=e.x2,n=e.y1,e=e.y2,s=t[0];return((i=o(t,0,i))||(i=o(t,0,r)))&&(s=i,t[1]=i),s=(i=o(t,1,n))||(i=o(t,1,e))?i:s},L.prototype.getRotator=function(t){var r=t[0]*T,o=(t[1]||0)*T,t=(t[2]||0)*T,n=Math.cos(o),s=Math.sin(o),a=Math.cos(t),p=Math.sin(t);if(0!=r||0!=o||0!=t)return{forward:function(t){var o=t[0]*T+r,t=t[1]*T,e=Math.cos(t),i=Math.cos(o)*e,o=Math.sin(o)*e,e=Math.sin(t),t=e*n+i*s;return[Math.atan2(o*a-t*p,i*n-e*s)/T,Math.asin(t*a+o*p)/T]},inverse:function(t){var o=t[0]*T,t=t[1]*T,e=Math.cos(t),i=Math.cos(o)*e,o=Math.sin(o)*e,e=Math.sin(t),t=e*a-o*p;return[(Math.atan2(o*a+e*p,i*n+t*s)-r)/T,Math.asin(t*n-i*s)/T]}}},L.prototype.forward=function(t){return t},L.prototype.inverse=function(t){return t},L.prototype.cutOnAntimeridian=function(n,s){var t,a=[],o=[n];if(n.forEach(function(t,o){var e=n[o-1];if(!o){if(!s)return;e=n[n.length-1]}var i=e[0],r=t[0];(i<-90||90<i)&&(r<-90||90<r)&&0<i!=0<r&&(r=w((180-(i+360)%360)/((r+360)%360-(i+360)%360),0,1),r=e[1]+r*(t[1]-e[1]),a.push({i:o,lat:r,direction:i<0?1:-1,previousLonLat:e,lonLat:t}))}),a.length)if(s){a.length%2==1&&(t=a.slice().sort(function(t,o){return Math.abs(o.lat)-Math.abs(t.lat)})[0],P(a,t));for(var e=a.length-2;0<=e;){var i=a[e].i,r=j(180+a[e].direction*C),p=j(180-a[e].direction*C);(M=n.splice.apply(n,x([i,a[e+1].i-i],L.greatCircle([r,a[e].lat],[r,a[e+1].lat],!0),!1))).push.apply(M,L.greatCircle([p,a[e+1].lat],[p,a[e].lat],!0)),o.push(M),e-=2}if(t)for(var h=0;h<o.length;h++){var c=t.direction,l=t.lat,u=o[h],d=u.indexOf(t.lonLat);if(-1<d){for(var f=(l<0?-1:1)*this.maxLatitude,y=j(180+c*C),m=j(180-c*C),g=L.greatCircle([y,l],[y,f],!0),v=y+120*c;-180<v&&v<180;v+=120*c)g.push([v,f]);g.push.apply(g,L.greatCircle([m,f],[m,t.lat],!0)),u.splice.apply(u,x([d,0],g,!1));break}}}else for(e=a.length;e--;){var M,i=a[e].i;(M=n.splice(i,n.length,[j(180+a[e].direction*C),a[e].lat])).unshift([j(180-a[e].direction*C),a[e].lat]),o.push(M)}return o},L.prototype.path=function(t){function o(t){var o=[t=t.map(function(t){var o;return g&&(o=(t=n?n.forward(t):t)[0],t=[o=Math.abs(o-180)<C?o<180?180-C:180+C:o,t[1]]),t})];m&&(L.insertGreatCircles(t),g&&(o=e.cutOnAntimeridian(t,y))),o.forEach(function(t){if(!(t.length<2)){var o,e,i=!1,r=!1,n=function(t){i?f.push(["L",t[0],t[1]]):(f.push(["M",t[0],t[1]]),i=!0)},s=!1,a=!1,p=t.map(function(t){t=v.forward(t);return t.outside?s=!0:a=!0,t[1]===1/0?t[1]=1e10:t[1]===-1/0&&(t[1]=-1e10),t});if(g){if(y&&p.push(p[0]),s){if(!a)return;if(u)if(y)p=b(p,u);else if(d)return void M(p,u).forEach(function(t){i=!1,t.forEach(n)})}p.forEach(n)}else for(var h=0;h<p.length;h++)var c=t[h],l=p[h],r=!!l.outside||(y&&!o&&(t.push(o=c),p.push(l)),r&&e&&(y&&m?L.greatCircle(e,c).forEach(function(t){return n(v.forward(t))}):i=!1),n(l),e=c,!1)}})}var u,e=this,d=this.bounds,i=this.def,r=this.rotator,f=[],y="Polygon"===t.type||"MultiPolygon"===t.type,m=this.hasGeoProjection,g=!i||!1!==i.antimeridianCutting,n=g?r:void 0,v=g&&i||this;d&&(u=[[d.x1,d.y1],[d.x2,d.y1],[d.x2,d.y2],[d.x1,d.y2]]);return"LineString"===t.type?o(t.coordinates):"MultiLineString"===t.type?t.coordinates.forEach(o):"Polygon"===t.type?(t.coordinates.forEach(o),f.length&&f.push(["Z"])):"MultiPolygon"===t.type&&(t.coordinates.forEach(function(t){t.forEach(o)}),f.length&&f.push(["Z"])),f},L.registry=o,L}),o(t,"Maps/MapView.js",[t["Maps/MapViewOptionsDefault.js"],t["Maps/MapViewInsetsOptionsDefault.js"],t["Extensions/GeoJSON.js"],t["Core/Chart/MapChart.js"],t["Maps/MapUtilities.js"],t["Maps/Projection.js"],t["Core/Utilities.js"]],function(c,i,t,o,e,l,r){function d(t,o){var e=o.width,o=o.height,e=Math.max((t.x2-t.x1)/(e/256),(t.y2-t.y1)/(o/256));return Math.log(T/e)/Math.log(2)}var n,s=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),u=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,r=0,n=o.length;r<n;r++)!i&&r in o||((i=i||Array.prototype.slice.call(o,0,r))[r]=o[r]);return t.concat(i||Array.prototype.slice.call(o))},a=t.topo2geo,p=o.maps,h=e.boundsFromPath,f=e.pointInPolygon,y=r.addEvent,m=r.clamp,g=r.fireEvent,v=r.isArray,M=r.isNumber,j=r.isObject,x=r.isString,b=r.merge,w=r.pick,P=r.relativeLength,T=400.979322,C=(L.mergeInsets=function(t,o){function e(t){var e={};return t.forEach(function(t,o){e[t&&t.id||"i".concat(o)]=t}),e}var i=b(e(t),e(o));return Object.keys(i).map(function(t){return i[t]})},L.prototype.createInsets=function(){var o=this,e=this.options,t=e.insets;t&&t.forEach(function(t){t=new S(o,b(e.insetOptions,t));o.insets.push(t)})},L.prototype.fitToBounds=function(t,o,e,i){void 0===e&&(e=!0);var r,n=t||this.getProjectedBounds();n&&(o=w(o,t?0:this.options.padding),r=this.getField(!1),o=v(o)?o:[o,o,o,o],this.padding=[P(o[0],r.height),P(o[1],r.width),P(o[2],r.height),P(o[3],r.width)],this.playingField=this.getField(),o=d(n,this.playingField),t||(this.minZoom=o),r=this.projection.inverse([(n.x2+n.x1)/2,(n.y2+n.y1)/2]),this.setView(r,o,e,i))},L.prototype.getField=function(t){t=(t=void 0===t?!0:t)?this.padding:[0,0,0,0];return{x:t[3],y:t[0],width:this.chart.plotWidth-t[1]-t[3],height:this.chart.plotHeight-t[0]-t[2]}},L.prototype.getGeoMap=function(t){return x(t)?p[t]&&"Topology"===p[t].type?a(p[t]):p[t]:j(t,!0)?"FeatureCollection"===t.type?t:"Topology"===t.type?a(t):void 0:void 0},L.prototype.getMapBBox=function(){var t,o,e=this.getProjectedBounds(),i=this.getScale();if(e)return t=this.padding,o=this.projectedUnitsToPixels({x:e.x1,y:e.y2}),{width:(e.x2-e.x1)*i+t[1]+t[3],height:(e.y2-e.y1)*i+t[0]+t[2],x:o.x-t[3],y:o.y-t[0]}},L.prototype.getProjectedBounds=function(){var t,o,e=this.projection,i=this.chart.series.reduce(function(t,o){var e=o.getProjectedBounds&&o.getProjectedBounds();return e&&!1!==o.options.affectsMapView&&t.push(e),t},[]),r=this.options.fitToGeometry;return r?(this.fitToGeometryCache||("MultiPoint"===r.type?(t=(o=r.coordinates.map(function(t){return e.forward(t)})).map(function(t){return t[0]}),o=o.map(function(t){return t[1]}),this.fitToGeometryCache={x1:Math.min.apply(0,t),x2:Math.max.apply(0,t),y1:Math.min.apply(0,o),y2:Math.max.apply(0,o)}):this.fitToGeometryCache=h(e.path(r))),this.fitToGeometryCache):this.projection.bounds||L.compositeBounds(i)},L.prototype.getScale=function(){return 256/T*Math.pow(2,this.zoom)},L.prototype.getSVGTransform=function(){var t=this.playingField,o=t.x,e=t.y,i=t.width,t=t.height,r=this.projection.forward(this.center),n=this.projection.hasCoordinates?-1:1,s=this.getScale(),n=s*n;return{scaleX:s,scaleY:n,translateX:o+i/2-r[0]*s,translateY:e+t/2-r[1]*n}},L.prototype.lonLatToPixels=function(t){t=this.lonLatToProjectedUnits(t);if(t)return this.projectedUnitsToPixels(t)},L.prototype.lonLatToProjectedUnits=function(t){var o=this.chart,e=o.mapTransforms;if(e){for(var i in e)if(Object.hasOwnProperty.call(e,i)&&e[i].hitZone){var r=o.transformFromLatLon(t,e[i]);if(r&&f(r,e[i].hitZone.coordinates[0]))return r}return o.transformFromLatLon(t,e.default)}for(var n=0,s=this.insets;n<s.length;n++){var a,p=s[n];if(p.options.geoBounds&&f({x:t.lon,y:t.lat},p.options.geoBounds.coordinates[0]))return a=p.projection.forward([t.lon,t.lat]),p=p.projectedUnitsToPixels({x:a[0],y:a[1]}),this.pixelsToProjectedUnits(p)}var h=this.projection.forward([t.lon,t.lat]);if(!h.outside)return{x:h[0],y:h[1]}},L.prototype.projectedUnitsToLonLat=function(t){var o=this.chart,e=o.mapTransforms;if(e){for(var i in e)if(Object.hasOwnProperty.call(e,i)&&e[i].hitZone&&f(t,e[i].hitZone.coordinates[0]))return o.transformToLatLon(t,e[i]);return o.transformToLatLon(t,e.default)}for(var r=this.projectedUnitsToPixels(t),n=0,s=this.insets;n<s.length;n++){var a,p=s[n];if(p.hitZone&&f(r,p.hitZone.coordinates[0]))return a=p.pixelsToProjectedUnits(r),{lon:(p=p.projection.inverse([a.x,a.y]))[0],lat:p[1]}}var h=this.projection.inverse([t.x,t.y]);return{lon:h[0],lat:h[1]}},L.prototype.redraw=function(t){this.chart.series.forEach(function(t){t.useMapGeometry&&(t.isDirty=!0)}),this.chart.redraw(t)},L.prototype.setView=function(t,o,e,i){void 0===e&&(e=!0),t&&(this.center=t),"number"==typeof o&&("number"==typeof this.minZoom&&(o=Math.max(o,this.minZoom)),"number"==typeof this.options.maxZoom&&(o=Math.min(o,this.options.maxZoom)),M(o)&&(this.zoom=o));var r,n,s,a,p,h,c,l,u,t=this.getProjectedBounds();t&&(o=this.projection.forward(this.center),r=(a=this.playingField).x,n=a.y,s=a.width,a=a.height,p=this.getScale(),u=this.projectedUnitsToPixels({x:t.x1,y:t.y1}),l=this.projectedUnitsToPixels({x:t.x2,y:t.y2}),t=[(t.x1+t.x2)/2,(t.y1+t.y2)/2],this.chart.series.some(function(t){return t.isDrilling})||(h=u.x,c=l.y,l=l.x,u=u.y,l-h<s?o[0]=t[0]:h<r&&l<r+s?o[0]+=Math.max(h-r,l-s-r)/p:r+s<l&&r<h&&(o[0]+=Math.min(l-s-r,h-r)/p),u-c<a?o[1]=t[1]:c<n&&u<n+a?o[1]-=Math.max(c-n,u-a-n)/p:n+a<u&&n<c&&(o[1]-=Math.min(u-a-n,c-n)/p),this.center=this.projection.inverse(o)),this.insets.forEach(function(t){t.options.field&&(t.hitZone=t.getHitZone(),t.playingField=t.getField())}),this.render()),g(this,"afterSetView"),e&&this.redraw(i)},L.prototype.projectedUnitsToPixels=function(t){var o=this.getScale(),e=this.projection.forward(this.center),i=this.playingField,r=i.x+i.width/2,i=i.y+i.height/2;return{x:r-o*(e[0]-t.x),y:i+o*(e[1]-t.y)}},L.prototype.pixelsToLonLat=function(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))},L.prototype.pixelsToProjectedUnits=function(t){var o=t.x,t=t.y,e=this.getScale(),i=this.projection.forward(this.center),r=this.playingField,n=r.x+r.width/2,r=r.y+r.height/2;return{x:i[0]+(o-n)/e,y:i[1]-(t-r)/e}},L.prototype.setUpEvents=function(){function t(t){var o,e,i,r=u.pointer.pinchDown,n=l.projection,s=u.mouseDownX,a=u.mouseDownY;1===r.length&&(s=r[0].chartX,a=r[0].chartY),"number"==typeof s&&"number"==typeof a&&(r=""+s+",".concat(a),o=(e=t.originalEvent).chartX,e=e.chartY,r!==h&&(h=r,p=l.projection.forward(l.center),c=(l.projection.options.rotation||[0,0]).slice()),r=(r=n.def&&n.def.bounds)&&d(r,l.playingField)||-1/0,"Orthographic"===n.options.name&&(l.minZoom||1/0)<1.3*r?(n=440/(l.getScale()*Math.min(u.plotWidth,u.plotHeight)),c&&(r=(s-o)*n-c[0],n=m(-c[1]-(a-e)*n,-80,80),i=l.zoom,l.update({projection:{rotation:[-r,-n]}},!1),l.fitToBounds(void 0,void 0,!1),l.zoom=i,u.redraw(!1))):M(o)&&M(e)&&(r=l.getScale(),n=l.projection.hasCoordinates?1:-1,i=l.projection.inverse([p[0]+(s-o)/r,p[1]-(a-e)/r*n]),l.setView(i,void 0,!0,!1)),t.preventDefault())}var p,h,c,l=this,u=this.chart;y(u,"pan",t),y(u,"touchpan",t),y(u,"selection",function(t){var o,e,i,r;t.resetSelection?l.zoomBy():(r=t.x-u.plotLeft,i=t.y-u.plotTop,o=(e=l.pixelsToProjectedUnits({x:r,y:i})).y,e=e.x,i=(r=l.pixelsToProjectedUnits({x:r+t.width,y:i+t.height})).y,r=r.x,l.fitToBounds({x1:e,y1:o,x2:r,y2:i},void 0,!0,!t.originalEvent.touches&&void 0),/^touch/.test(t.originalEvent.type)||u.showResetZoom(),t.preventDefault())})},L.prototype.render=function(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())},L.prototype.update=function(t,o,e){void 0===o&&(o=!0);var i=t.projection,i=i&&l.toString(i)!==l.toString(this.options.projection),r=!1;b(!0,this.userOptions,t),b(!0,this.options,t),"insets"in t&&(this.insets.forEach(function(t){return t.destroy()}),this.insets.length=0,r=!0),(i||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(i||r)&&(this.chart.series.forEach(function(t){var o=t.transformGroups;if(t.clearBounds&&t.clearBounds(),t.isDirty=!0,t.isDirtyData=!0,r&&o)for(;1<o.length;){var e=o.pop();e&&e.destroy()}}),i&&(this.projection=new l(this.options.projection)),r&&this.createInsets(),t.center||!Object.hasOwnProperty.call(t,"zoom")||M(t.zoom)||this.fitToBounds(void 0,void 0,!1)),t.center||M(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),o&&this.chart.redraw(e)},L.prototype.zoomBy=function(t,o,e,i){var r,n,s,a,p=this.chart,h=this.projection.forward(this.center),o=o?this.projection.forward(o):[],c=o[0],o=o[1];"number"==typeof t?(t=this.zoom+t,r=void 0,e&&(s=e[0],e=e[1],n=this.getScale(),s=s-p.plotLeft-p.plotWidth/2,a=e-p.plotTop-p.plotHeight/2,c=h[0]+s/n,o=h[1]+a/n),"number"==typeof c&&"number"==typeof o&&(n=1-Math.pow(2,this.zoom)/Math.pow(2,t),s=h[0]-c,a=h[1]-o,h[0]-=s*n,h[1]+=a*n,r=this.projection.inverse(h)),this.setView(r,t,void 0,i)):this.fitToBounds(void 0,void 0,void 0,i)},L.compositeBounds=function(t){if(t.length)return t.slice(1).reduce(function(t,o){return t.x1=Math.min(t.x1,o.x1),t.y1=Math.min(t.y1,o.y1),t.x2=Math.max(t.x2,o.x2),t.y2=Math.max(t.y2,o.y2),t},b(t[0]))},L);function L(t,o){var r,e,n,i,s=this,a=(this.allowTransformAnimation=!0,this.insets=[],this.padding=[0,0,0,0],this.eventsToUnbind=[],this instanceof S||(e=u([t.options.chart.map],(t.options.series||[]).map(function(t){return t.mapData}),!0).map(function(t){return s.getGeoMap(t)}),n=[],e.forEach(function(t){var o,e,i;t&&(r=r||t["hc-recommended-mapview"],t.bbox&&(o=(t=t.bbox)[0],e=t[1],i=t[2],t=t[3],n.push({x1:o,y1:e,x2:i,y2:t})))}),(a=n.length&&L.compositeBounds(n))&&(p=a.x1,i=a.y1,h=a.x2,a=a.y2,i=180<h-p&&90<a-i?{name:"EqualEarth"}:{name:"LambertConformalConic",parallels:[i,a],rotation:[-(p+h)/2]}),this.geoMap=e[0]),this.userOptions=o||{},b(c,{projection:i},r,o)),p=r&&r.insets,h=o&&o.insets;p&&h&&(a.insets=L.mergeInsets(p,h)),this.chart=t,this.center=a.center,this.options=a,this.projection=new l(a.projection),this.playingField=t.plotBox,this.zoom=a.zoom||0,this.createInsets(),this.eventsToUnbind.push(y(t,"afterSetChartSize",function(){s.playingField=s.getField(),void 0!==s.minZoom&&s.minZoom!==s.zoom||(s.fitToBounds(void 0,void 0,!1),!s.chart.hasRendered&&M(s.userOptions.zoom)&&(s.zoom=s.userOptions.zoom),s.userOptions.center&&b(!0,s.center,s.userOptions.center))})),this.setUpEvents()}s(A,O=C),A.prototype.getField=function(t){void 0===t&&(t=!0);var o=this.hitZone;if(o){var e=t?this.padding:[0,0,0,0],o=o.coordinates[0],i=o.map(function(t){return t[0]}),o=o.map(function(t){return t[1]}),r=Math.min.apply(0,i)+e[3],i=Math.max.apply(0,i)-e[1],n=Math.min.apply(0,o)+e[0],o=Math.max.apply(0,o)-e[2];if(M(r)&&M(n))return{x:r,y:n,width:i-r,height:o-n}}return O.prototype.getField.call(this,t)},A.prototype.getHitZone=function(){var o,t=this.chart,e=this.mapView,i=this.options,r=(i.field||{}).coordinates;if(r)return r=r[0],"percent"===i.units&&(o="mapBoundingBox"===i.relativeTo&&e.getMapBBox()||b(t.plotBox,{x:0,y:0}),r=r.map(function(t){return[P(t[0]+"%",o.width,o.x),P(t[1]+"%",o.height,o.y)]})),{type:"Polygon",coordinates:[r]}},A.prototype.getProjectedBounds=function(){return C.compositeBounds(this.allBounds)},A.prototype.isInside=function(t){var o=this.geoBoundsProjectedBox,e=this.geoBoundsProjectedPolygon;return Boolean(o&&t.x>=o.x1&&t.x<=o.x2&&t.y>=o.y1&&t.y<=o.y2&&e&&f(t,e))},A.prototype.render=function(){var t,r,n,s=this.chart,o=this.mapView,a=this.options,e=a.borderPath||a.field;e&&o.group&&(t=!0,this.border||(this.border=s.renderer.path().addClass("highcharts-mapview-inset-border").add(o.group),t=!1),s.styledMode||this.border.attr({stroke:a.borderColor,"stroke-width":a.borderWidth}),r=Math.round(this.border.strokeWidth())%2/2,n="mapBoundingBox"===a.relativeTo&&o.getMapBBox()||o.playingField,o=(e.coordinates||[]).reduce(function(t,o){return o.reduce(function(t,o,e){var i=o[0],o=o[1];return"percent"===a.units&&(i=s.plotLeft+P(i+"%",n.width,n.x),o=s.plotTop+P(o+"%",n.height,n.y)),i=Math.floor(i)+r,o=Math.floor(o)+r,t.push(0===e?["M",i,o]:["L",i,o]),t},t)},[]),this.border[t?"animate":"attr"]({d:o}))},A.prototype.destroy=function(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(function(t){return t()})},A.prototype.setUpEvents=function(){};var O,S=A;function A(t,o){var e=O.call(this,t.chart,o)||this;return e.id=o.id,e.mapView=t,e.options=b(i,o),e.allBounds=[],e.options.geoBounds&&(o=t.projection.path(e.options.geoBounds),e.geoBoundsProjectedBox=h(o),e.geoBoundsProjectedPolygon=o.map(function(t){return[t[1]||0,t[2]||0]})),e}return y(o,"afterInit",function(){this.mapView=new C(this,this.options.mapView)}),C}),o(t,"Series/Map/MapSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/ColorMapComposition.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Maps/MapView.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,o,e,g,i,v,r,n,s,p,a){var h,c,l=this&&this.__extends||(h=function(t,o){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}h(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),u=t.animObject,t=g.noop,d=i.splitPath,i=s.seriesTypes,M=i.column,i=i.scatter,f=a.extend,y=a.find,m=a.fireEvent,j=a.getNestedProperty,x=a.isArray,b=a.defined,w=a.isNumber,P=a.isObject,T=a.merge,C=a.objectEach,L=a.pick,O=a.splat,a=(l(S,c=i),S.prototype.animate=function(t){var o=this.chart,e=this.group,i=u(this.options.animation);t?e.attr({translateX:o.plotLeft+o.plotWidth/2,translateY:o.plotTop+o.plotHeight/2,scaleX:.001,scaleY:.001}):e.animate({translateX:o.plotLeft,translateY:o.plotTop,scaleX:1,scaleY:1},i)},S.prototype.clearBounds=function(){this.points.forEach(function(t){delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds},S.prototype.doFullTranslate=function(){return Boolean(this.isDirtyData||this.chart.isResizing||!this.hasRendered)},S.prototype.drawMapDataLabels=function(){n.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},S.prototype.drawPoints=function(){var u=this,d=this,f=this.chart,e=this.group,t=this.transformGroups,i=void 0===t?[]:t,y=f.mapView,m=f.renderer;y&&((this.transformGroups=i)[0]||(i[0]=m.g().add(e)),y.insets.forEach(function(t,o){i[o+1]||i.push(m.g().add(e))}),this.doFullTranslate()&&(this.points.forEach(function(t){var o=t.graphic,e=t.shapeArgs;t.group=i["number"==typeof t.insetIndex?t.insetIndex+1:0],o&&o.parentGroup!==t.group&&o.add(t.group),e&&f.hasRendered&&!f.styledMode&&(e.fill=u.pointAttribs(t,t.state).fill)}),M.prototype.drawPoints.apply(this),this.points.forEach(function(t){var s,o,a=t.graphic;a&&(s=a.animate,o="",t.name&&(o+="highcharts-name-"+t.name.replace(/ /g,"-").toLowerCase()),t.properties&&t.properties["hc-key"]&&(o+=" highcharts-key-"+t.properties["hc-key"].toString().toLowerCase()),o&&a.addClass(o),f.styledMode&&a.css(u.pointAttribs(t,t.selected?"select":void 0)),a.animate=function(t,o,e){var i,r=w(t["stroke-width"])&&!w(a["stroke-width"]),n=w(a["stroke-width"])&&!w(t["stroke-width"]);return(r||n)&&(i=L(d.getStrokeWidth(d.options),1)/(f.mapView&&f.mapView.getScale()||1),r&&(a["stroke-width"]=i),n&&(t["stroke-width"]=i)),s.call(a,t,o,n?function(){a.element.removeAttribute("stroke-width"),delete a["stroke-width"],e&&e.apply(this,arguments)}:e)})})),i.forEach(function(i,t){function r(e){(d.points||[]).forEach(function(t){var o=t.graphic;o&&o["stroke-width"]&&(t=u.getStrokeWidth(t.options))&&o.attr({"stroke-width":t/e})})}var n,s,a,o,p=(0===t?y:y.insets[t-1]).getSVGTransform(),h=L(u.getStrokeWidth(u.options),1),c=p.scaleX,l=0<p.scaleY?1:-1;m.globalAnimation&&f.hasRendered&&y.allowTransformAnimation?(n=Number(i.attr("translateX")),s=Number(i.attr("translateY")),a=Number(i.attr("scaleX")),t={},"boolean"!=typeof(t=f.options.chart?T({},f.options.chart.animation):t)&&(o=t.step,t.step=function(t){o&&o.apply(this,arguments),function(t,o){var e=a+(c-a)*o.pos;i.attr({translateX:n+(p.translateX-n)*o.pos,translateY:s+(p.translateY-s)*o.pos,scaleX:e,scaleY:e*l,"stroke-width":h/e}),r(e)}.apply(this,arguments)}),i.attr({animator:0}).animate({animator:1},t,function(){"boolean"!=typeof m.globalAnimation&&m.globalAnimation.complete&&m.globalAnimation.complete({applyDrilldown:!0})})):(i.attr(T(p,{"stroke-width":h/c})),r(c))}),this.isDrilling||this.drawMapDataLabels())},S.prototype.getProjectedBounds=function(){var t,n,s,a;return!this.bounds&&this.chart.mapView&&(t=this.chart.mapView,n=t.insets,s=t.projection,a=[],(this.points||[]).forEach(function(t){var o,e,i,r;(t.path||t.geometry)&&("string"==typeof t.path?t.path=d(t.path):x(t.path)&&"M"===t.path[0]&&(t.path=p.prototype.pathToSegments(t.path)),t.bounds||(o=t.getProjectedBounds(s))&&(t.labelrank=L(t.labelrank,(o.x2-o.x1)*(o.y2-o.y1)),e=o.midX,i=o.midY,n&&w(e)&&w(i)&&((r=y(n,function(t){return t.isInside({x:e,y:i})}))&&(delete t.projectedPath,(o=t.getProjectedBounds(r.projection))&&r.allBounds.push(o),t.insetIndex=n.indexOf(r))),t.bounds=o),t.bounds&&void 0===t.insetIndex&&a.push(t.bounds))}),this.bounds=r.compositeBounds(a)),this.bounds},S.prototype.getStrokeWidth=function(t){var o=this.pointAttrToOptions;return t[o&&o["stroke-width"]||"borderWidth"]},S.prototype.hasData=function(){return!!this.processedXData.length},S.prototype.pointAttribs=function(t,o){var e,i=t.series.chart,r=i.mapView,i=i.styledMode?this.colorAttribs(t):M.prototype.pointAttribs.call(this,t,o),n=this.getStrokeWidth(t.options),o=(o&&(o=T(this.options.states[o],t.options.states&&t.options.states[o]||{}),e=this.getStrokeWidth(o),b(e)&&(n=e),i.stroke=null!=(e=o.borderColor)?e:t.color),n&&r&&(n/=r.getScale()),this.getStrokeWidth(this.options));return i.dashstyle&&r&&w(o)&&(n=o/r.getScale()),t.visible||(i.fill=this.options.nullColor),b(n)?i["stroke-width"]=n:delete i["stroke-width"],i["stroke-linecap"]=i["stroke-linejoin"]=this.options.linecap,i},S.prototype.updateData=function(){return!this.processedData&&c.prototype.updateData.apply(this,arguments)},S.prototype.setData=function(t,o,e,i){void 0===o&&(o=!0),delete this.bounds,c.prototype.setData.call(this,t,!1,void 0,i),this.processData(),this.generatePoints(),o&&this.chart.redraw(e)},S.prototype.processData=function(){var t,o,e,i,r,n,s,a=this.options,p=a.data,h=this.chart.options.chart,c=this.joinBy,l=a.keys||this.pointArrayMap,u=[],d={},f=this.chart.mapView,f=f&&(P(a.mapData,!0)?f.getGeoMap(a.mapData):f.geoMap),y=this.chart.mapTransforms,m=(this.chart.mapTransforms=y=h.mapTransforms||f&&f["hc-transform"]||y,y&&C(y,function(t){t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),x(a.mapData)?i=a.mapData:f&&"FeatureCollection"===f.type&&(this.mapTitle=f.title,i=g.geojson(f,this.type,this)),this.processedData=[],this.processedData);if(p&&p.forEach(function(t,o){var e=0;if(w(t))m[o]={value:t};else if(x(t)){m[o]={},!a.keys&&t.length>l.length&&"string"==typeof t[0]&&(m[o]["hc-key"]=t[0],++e);for(var i=0;i<l.length;++i,++e)l[i]&&void 0!==t[e]&&(0<l[i].indexOf(".")?v.prototype.setNestedProperty(m[o],t[e],l[i]):m[o][l[i]]=t[e])}else m[o]=p[o];c&&"_i"===c[0]&&(m[o]._i=o)}),i){for(this.mapData=i,this.mapMap={},e=0;e<i.length;e++)o=(t=i[e]).properties,t._i=e,c[0]&&o&&o[c[0]]&&(t[c[0]]=o[c[0]]),d[t[c[0]]]=t;this.mapMap=d,c[1]&&(r=c[1],m.forEach(function(t){t=j(r,t);d[t]&&u.push(d[t])})),a.allAreas&&(c[1]&&(n=c[1],m.forEach(function(t){u.push(j(n,t))})),s="|"+u.map(function(t){return t&&t[c[0]]}).join("|")+"|",i.forEach(function(t){c[0]&&-1!==s.indexOf("|"+t[c[0]]+"|")||m.push(T(t,{value:null}))}))}this.processedXData=new Array(m.length)},S.prototype.setOptions=function(t){var t=n.prototype.setOptions.call(this,t),o=t.joinBy;return(o=this.joinBy=O(o=null===o?"_i":o))[1]||(o[1]=o[0]),t},S.prototype.translate=function(){var e,i=this.doFullTranslate(),r=this.chart.mapView,n=r&&r.projection;!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints(),delete this.bounds,!r||r.userOptions.center||w(r.userOptions.zoom)||r.zoom!==r.minZoom?this.getProjectedBounds():r.fitToBounds(void 0,void 0,!1)),r&&(e=r.getSVGTransform(),this.points.forEach(function(t){var o=w(t.insetIndex)&&r.insets[t.insetIndex].getSVGTransform()||e;o&&t.bounds&&w(t.bounds.midX)&&w(t.bounds.midY)&&(t.plotX=t.bounds.midX*o.scaleX+o.translateX,t.plotY=t.bounds.midY*o.scaleY+o.translateY),i&&(t.shapeType="path",t.shapeArgs={d:v.getProjectedPath(t,n)}),t.projectedPath&&!t.projectedPath.length?t.setVisible(!1):t.setVisible(!0)})),m(this,"afterTranslate")},S.defaultOptions=T(i.defaultOptions,{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){var t=this.series.chart.numberFormatter,o=this.point.value;return w(o)?t(o,-1):""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}),S);function S(){var t=null!==c&&c.apply(this,arguments)||this;return t.chart=void 0,t.data=void 0,t.group=void 0,t.joinBy=void 0,t.options=void 0,t.points=void 0,t.processedData=[],t}return f(a.prototype,{type:"map",axisTypes:o.seriesMembers.axisTypes,colorAttribs:o.seriesMembers.colorAttribs,colorKey:o.seriesMembers.colorKey,directTouch:!0,drawDataLabels:t,drawGraph:t,forceDL:!0,getCenter:e.getCenter,getExtremesFromAll:!0,getSymbol:t,isCartesian:!1,parallelArrays:o.seriesMembers.parallelArrays,pointArrayMap:o.seriesMembers.pointArrayMap,pointClass:v,preserveAspectRatio:!0,searchPoint:t,trackerGroups:o.seriesMembers.trackerGroups,useMapGeometry:!0}),o.compose(a),s.registerSeriesType("map",a),a}),o(t,"Series/FlowMap/FlowMapSeries.js",[t["Series/FlowMap/FlowMapPoint.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,n,s=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),v=this&&this.__spreadArray||function(t,o,e){if(e||2===arguments.length)for(var i,r=0,n=o.length;r<n;r++)!i&&r in o||((i=i||Array.prototype.slice.call(o,0,r))[r]=o[r]);return t.concat(i||Array.prototype.slice.call(o))},d=o.series.prototype.pointClass,a=o.seriesTypes,p=a.column,a=a.mapline,f=i.addEvent,y=i.arrayMax,m=i.arrayMin,M=i.defined,h=i.extend,g=i.isArray,j=i.merge,x=i.pick,b=i.relativeLength,i=(s(w,n=a),w.getLength=function(t,o){return Math.sqrt(t*t+o*o)},w.normalize=function(t,o){var e=this.getLength(t,o);return[t/e,o/e]},w.markerEndPath=function(t,o,e,i){var r,n,s=b(i.width||0,this.getLength(o[0]-t[0],o[1]-t[1])),i=i.markerType||"arrow",a=this.normalize(o[0]-t[0],o[1]-t[1]),p=a[0],a=a[1],h=[];return"arrow"===i&&(r=t[0],n=t[1],h.push(["L",r-=p*s,n-=a*s]),h.push(["L",e[0],e[1]]),r=o[0],n=o[1],h.push(["L",r+=p*s,n+=a*s])),"mushroom"===i&&(r=t[0],n=t[1],i=o[0],t=o[1],o=2*(e[0]-(o=(i-r)/2+r))+o,e=2*(e[1]-(e=(t-n)/2+n))+e,h.push(["L",r-=p*s,n-=a*s]),h.push(["Q",o,e,i+=p*s,t+=a*s])),h},w.prototype.animate=function(t){var o=this.points;t||o.forEach(function(t){if(t.shapeArgs&&g(t.shapeArgs.d)&&t.shapeArgs.d.length){var o=t.shapeArgs.d,e=o[0][1],i=o[0][2];if(e&&i){for(var r=[],n=0;n<o.length;n++){r.push(v([],o[n],!0));for(var s=1;s<o[n].length;s++)r[n][s]=s%2?e:i}t.graphic&&(t.graphic.attr({d:r}),t.graphic.animate({d:o}))}}})},w.prototype.getLinkWidth=function(t){var o=this.options.width,e=t.options.weight||this.options.weight;if(t.options.weight=e,o&&!e)return o;t=this.smallestWeight,o=this.greatestWeight;if(!M(e)||!t||!o)return 0;var i=this.options.minWidth;return(e-t)*(this.options.maxWidth-i)/(o-t||1)+i},w.prototype.autoCurve=function(t,o,e,i,r,n){var s=e-t,a=i-o,e=(e-t)/2+t-r,t=(i-o)/2+o-n,r=180*Math.atan2(s*t-a*e,s*e+a*t)/Math.PI,i=(r=r<0?360+r:r)*Math.PI/180;return.7*-Math.sin(i)},w.prototype.pointAttribs=function(t,o){o=e.prototype.pointAttribs.call(this,t,o);return o.fill=x(t.options.fillColor,t.options.color,"none"===this.options.fillColor?null:this.options.fillColor,this.color),o["fill-opacity"]=x(t.options.fillOpacity,this.options.fillOpacity),o["stroke-width"]=x(t.options.lineWidth,this.options.lineWidth,1),t.options.opacity&&(o.opacity=t.options.opacity),o},w.prototype.translate=function(){var h=this,c=(!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints()),[]),l=0,u=0;this.points.forEach(function(t){function o(){t.series.isDirty=!0}function e(t){if((t=s.get(t))instanceof d&&t.plotX&&t.plotY)return f(t,"update",o),{x:t.plotX,y:t.plotY}}function i(t){return g(t)?{lon:t[0],lat:t[1]}:t}var r,n,s=h.chart,a=s.mapView,p=t.options;"string"==typeof p.from?r=e(p.from):"object"==typeof p.from&&a&&(r=a.lonLatToPixels(i(p.from))),"string"==typeof p.to?n=e(p.to):"object"==typeof p.to&&a&&(n=a.lonLatToPixels(i(p.to))),t.fromPos=r,t.toPos=n,r&&n&&(l+=(r.x+n.x)/2,u+=(r.y+n.y)/2),x(t.options.weight,h.options.weight)&&c.push(x(t.options.weight,h.options.weight))}),this.smallestWeight=m(c),this.greatestWeight=y(c),this.centerOfPoints={x:l/this.points.length,y:u/this.points.length},this.points.forEach(function(t){h.getLinkWidth(t)?(t.fromPos&&(t.plotX=t.fromPos.x,t.plotY=t.fromPos.y),t.shapeType="path",t.shapeArgs=h.getPointShapeArgs(t),t.color=x(t.options.color,t.series.color)):t.shapeArgs={d:[]}})},w.prototype.getPointShapeArgs=function(t){var o=t.fromPos,e=t.toPos;if(!o||!e)return{};var i=this.getLinkWidth(t)/2,r=t.options,n=j(this.options.markerEnd,r.markerEnd),s=x(r.growTowards,this.options.growTowards),a=o.x||0,o=o.y||0,p=e.x||0,h=e.y||0,r=x(r.curveFactor,this.options.curveFactor),c=n&&n.enabled&&n.height||0,l=(M(r)||(r=this.autoCurve(a,o,p,h,this.centerOfPoints.x,this.centerOfPoints.y)),c&&(c=b(c,4*i),d=p-a,l=h-o,u=a+(d*=.5),f=d,d=(u=w.normalize(u+(d=l*=.5)*r-p,o+l+(l=-f)*r-h))[0],f=u[1],p+=d*=c,h+=f*=c),p-a),u=h-o,d=a+(l*=.5),c=o+(u*=.5),f=l,y=w.normalize(l=u,u=-f),m=y[0],y=y[1],g=1+.25*Math.sqrt(r*r),g=(m*=i*g,y*=i*g,d+l*r),d=c+u*r,l=w.normalize(g-a,d-o),f=c=l[0],c=u=l[1],u=-f,r=(c*=i,u*=i,w.normalize(g-p,d-h)),f=(f=r[0],l=-r[1],r=f,s&&(c/=i,u/=i,m/=4,y/=4),{d:[["M",a-c,o-u],["Q",g-m,d-y,p-(l*=i),h-(r*=i)],["L",p+l,h+r],["Q",g+m,d+y,a+c,o+u],["Z"]]}),g=(n&&n.enabled&&f.d&&(s=w.markerEndPath([p-l,h-r],[p+l,h+r],[e.x,e.y],n),(i=f.d).splice.apply(i,v([2,0],s,!1))),t.options.from),m=t.options.to,d=g.lat,y=g.lon,a=m.lat,c=m.lon;return d&&y&&(t.options.from=""+ +d+", ".concat(+y)),a&&c&&(t.options.to=""+ +a+", ".concat(+c)),f},w.defaultOptions=j(a.defaultOptions,{animation:!0,dataLabels:{enabled:!1},fillOpacity:.5,markerEnd:{enabled:!0,height:"40%",width:"40%",markerType:"arrow"},width:1,maxWidth:25,minWidth:5,lineWidth:void 0,tooltip:{headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:"{point.options.from} → {point.options.to}: <b>{point.options.weight}</b>"}}),w);function w(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.smallestWeight=void 0,t.greatestWeight=void 0,t.centerOfPoints=void 0,t}return h(i.prototype,{pointClass:t,pointArrayMap:["from","to","weight"],drawPoints:p.prototype.drawPoints,useMapGeometry:!0}),o.registerSeriesType("flowmap",i),i}),o(t,"masters/modules/flowmap.src.js",[],function(){})});