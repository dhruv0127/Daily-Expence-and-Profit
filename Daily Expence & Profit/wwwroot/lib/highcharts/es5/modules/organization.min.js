"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/organization",["highcharts","highcharts/modules/sankey"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function i(t,i,e,o){t.hasOwnProperty(i)||(t[i]=o.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t=t?t._modules:{},"Series/Organization/OrganizationPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,i){var o,r,e=this&&this.__extends||(o=function(t,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");o(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),n=t.seriesTypes.sankey.prototype.pointClass,s=i.defined,a=i.find,h=i.pick;return e(l,r=n),l.prototype.init=function(){return n.prototype.init.apply(this,arguments),this.isNode||(this.dataLabelOnNull=!0,this.formatPrefix="link"),this},l.prototype.getSum=function(){return 1},l.prototype.setNodeColumn=function(){r.prototype.setNodeColumn.call(this);var e=this,t=e.getFromNode().fromNode;if(!s(e.options.column)&&0!==e.linksTo.length&&t&&"hanging"===t.options.layout){e.options.layout=h(e.options.layout,"hanging"),e.hangsFrom=t;var o=-1;a(t.linksFrom,function(t,i){return(t=t.toNode===e)&&(o=i),t});for(var i=0;i<t.linksFrom.length;i++){var n=t.linksFrom[i];n.toNode.id===e.id?i=t.linksFrom.length:o+=function i(t){var e=t.linksFrom.length;return t.linksFrom.forEach(function(t){t.id===t.toNode.linksTo[0].id?e+=i(t.toNode):e--}),e}(n.toNode)}e.column=(e.column||0)+o}},l;function l(){var t=null!==r&&r.apply(this,arguments)||this;return t.fromNode=void 0,t.linksFrom=void 0,t.linksTo=void 0,t.options=void 0,t.series=void 0,t.toNode=void 0,t}}),i(t,"Series/Organization/OrganizationSeriesDefaults.js",[],function(){return{borderColor:"#666666",borderRadius:3,link:{color:"#666666",lineWidth:1,radius:10,type:"default"},borderWidth:1,dataLabels:{nodeFormatter:function(){function t(e){return Object.keys(e).reduce(function(t,i){return t+i+":"+e[i]+";"},'style="')+'"'}var i={width:"100%",height:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"},e={"max-height":"100%","border-radius":"50%"},o={width:"100%",padding:0,"text-align":"center","white-space":"normal"},n=(s=this.point).description,r=s.image,s=s.title;return r&&(e["max-width"]="30%",o.width="70%"),this.series.chart.renderer.forExport&&(i.display="block",o.position="absolute",o.left=r?"30%":0,o.top=0),i="<div "+t(i)+">",r&&(i+='<img src="'+r+'" '+t(e)+">"),i+="<div "+t(o)+">",this.point.name&&(i+="<h4 "+t({margin:0})+">"+this.point.name+"</h4>"),s&&(i+="<p "+t({margin:0})+">"+(s||"")+"</p>"),n&&(i+="<p "+t({opacity:.75,margin:"5px"})+">"+n+"</p>"),i+"</div></div>"},style:{fontWeight:"normal",fontSize:"0.9em"},useHTML:!0,linkTextPath:{attributes:{startOffset:"95%",textAnchor:"end"}}},hangingIndent:20,hangingIndentTranslation:"inherit",minNodeLength:10,nodeWidth:50,tooltip:{nodeFormat:"{point.name}<br>{point.title}<br>{point.description}"}}}),i(t,"Series/PathUtilities.js",[],function(){function l(t,i){for(var e=[],o=0;o<t.length;o++){var n,r,s,a,h,l,p=t[o][1],d=t[o][2];"number"==typeof p&&"number"==typeof d&&(0===o?e.push(["M",p,d]):o!==t.length-1&&i?(r=t[o-1],l=t[o+1],r&&l&&(n=r[1],r=r[2],s=l[1],l=l[2],"number"==typeof n&&"number"==typeof s&&"number"==typeof r&&"number"==typeof l&&n!==s&&r!==l&&(h=r<l?1:-1,e.push(["L",p-(a=n<s?1:-1)*Math.min(Math.abs(p-n),i),d-h*Math.min(Math.abs(d-r),i)],["C",p,d,p,d,p+a*Math.min(Math.abs(p-s),i),d+h*Math.min(Math.abs(d-l),i)])))):e.push(["L",p,d]))}return e}return{applyRadius:l,getLinkPath:{default:function(t){var i=t.x1,e=t.y1,o=t.x2,n=t.y2,r=void 0===(r=t.width)?0:r,s=void 0!==(s=t.inverted)&&s,a=t.radius,h=[["M",i,e],["L",i,e],["C",i,e,i,n,i,n],["L",i,n],["C",i,e,i,n,i,n],["L",i,n]];return t.parentVisible?l([["M",i,e],["L",i+r*(s?-.5:.5),e],["L",i+r*(s?-.5:.5),n],["L",o,n]],a):h},straight:function(t){var i=t.x1,e=t.y1,o=t.x2,n=t.y2,r=t.width,s=t.inverted;return t.parentVisible?[["M",i,e],["L",i+(void 0===r?0:r)*(void 0!==s&&s?-1:1),n],["L",o,n]]:[["M",i,e],["L",i,n],["L",i,n]]},curved:function(t){var i=t.x1,e=t.y1,o=t.x2,n=t.y2,r=void 0===(r=t.offset)?0:r,s=void 0===(s=t.width)?0:s,a=void 0!==(a=t.inverted)&&a;return t.parentVisible?[["M",i,e],["C",i+r,e,i-r+s*(a?-1:1),n,i+s*(a?-1:1),n],["L",o,n]]:[["M",i,e],["C",i,e,i,n,i,n],["L",o,n]]}}}}),i(t,"Series/Organization/OrganizationSeries.js",[t["Series/Organization/OrganizationPoint.js"],t["Series/Organization/OrganizationSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Series/PathUtilities.js"],t["Core/Utilities.js"]],function(t,i,e,g,o){var n,r,s=this&&this.__extends||(n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),h=e.seriesTypes.sankey,a=o.css,l=o.extend,p=o.isNumber,d=o.merge,y=o.pick;function u(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return s(u,r=h),u.prototype.alignDataLabel=function(t,i,e){var o,n,t=t.shapeArgs;e.useHTML&&t&&(o=t.width||0,n=t.height||0,e=this.options.borderWidth+2*this.options.dataLabels.padding,this.chart.inverted&&(o=n,n=t.width||0),n-=e,o-=e,(t=i.text)&&(a(t.element.parentNode,{width:o+"px",height:n+"px"}),a(t.element,{left:0,top:0,width:"100%",height:"100%",overflow:"hidden"})),i.getBBox=function(){return{width:o,height:n,x:0,y:0}},i.width=o,i.height=n),r.prototype.alignDataLabel.apply(this,arguments)},u.prototype.createNode=function(t){return(t=r.prototype.createNode.call(this,t)).getSum=function(){return 1},t},u.prototype.pointAttribs=function(t,i){var e=h.prototype.pointAttribs.call(this,t,i),o=this.mapOptionsToLevel[(t.isNode?t:t.fromNode).level||0]||{},n=t.options,r=o.states&&o.states[i]||{},s=(i=y(r.borderRadius,n.borderRadius,o.borderRadius,this.options.borderRadius),y(r.linkColor,n.linkColor,o.linkColor,this.options.linkColor,r.link&&r.link.color,n.link&&n.link.color,o.link&&o.link.color,this.options.link&&this.options.link.color)),a=y(r.linkLineWidth,n.linkLineWidth,o.linkLineWidth,this.options.linkLineWidth,r.link&&r.link.lineWidth,n.link&&n.link.lineWidth,o.link&&o.link.lineWidth,this.options.link&&this.options.link.lineWidth),o=y(r.linkOpacity,n.linkOpacity,o.linkOpacity,this.options.linkOpacity,r.link&&r.link.linkOpacity,n.link&&n.link.linkOpacity,o.link&&o.link.linkOpacity,this.options.link&&this.options.link.linkOpacity);return t.isNode?p(i)&&(e.r=i):(e.stroke=s,e["stroke-width"]=a,e.opacity=o,delete e.fill),e},u.prototype.translateLink=function(t){var i,e,o,n,r,s,a,h,l=t.fromNode,p=t.toNode,d=y(this.options.linkLineWidth,this.options.link.lineWidth),u=Math.round(d)%2/2,c=y(this.options.link.offset,.5),f=y(t.options.link&&t.options.link.type,this.options.link.type);l.shapeArgs&&p.shapeArgs&&(i=Math.floor((l.shapeArgs.x||0)+(l.shapeArgs.width||0))+u,e=Math.floor((l.shapeArgs.y||0)+(l.shapeArgs.height||0)/2)+u,o=Math.floor(p.shapeArgs.x||0)+u,n=Math.floor((p.shapeArgs.y||0)+(p.shapeArgs.height||0)/2)+u,r=this.options.hangingIndent,s=p.options.offset,a=/%$/.test(s)&&parseInt(s,10),(h=this.chart.inverted)&&(i-=l.shapeArgs.width||0,o+=p.shapeArgs.width||0),s=this.colDistance?Math.floor(o+(h?1:-1)*(this.colDistance-this.nodeWidth)/2)+u:Math.floor((o+i)/2)+u,a&&(50<=a||a<=-50)&&(s=o=Math.floor(o+(h?-.5:.5)*(p.shapeArgs.width||0))+u,n=p.shapeArgs.y||0,0<a&&(n+=p.shapeArgs.height||0)),p.hangsFrom===l&&(this.chart.inverted?(e=Math.floor((l.shapeArgs.y||0)+(l.shapeArgs.height||0)-r/2)+u,n=(p.shapeArgs.y||0)+(p.shapeArgs.height||0)):e=Math.floor((l.shapeArgs.y||0)+r/2)+u,s=o=Math.floor((p.shapeArgs.x||0)+(p.shapeArgs.width||0)/2)+u),t.plotX=s,t.plotY=(e+n)/2,t.shapeType="path","straight"===f?t.shapeArgs={d:[["M",i,e],["L",o,n]]}:"curved"===f?(l=Math.abs(o-i)*c*(h?-1:1),t.shapeArgs={d:[["M",i,e],["C",i+l,e,o-l,n,o,n]]}):t.shapeArgs={d:g.applyRadius([["M",i,e],["L",s,e],["L",s,n],["L",o,n]],y(this.options.linkRadius,this.options.link.radius))},t.dlBox={x:(i+o)/2,y:(e+n)/2,height:d,width:0})},u.prototype.translateNode=function(t,i){h.prototype.translateNode.call(this,t,i),i=t.hangsFrom;var e=this.options.hangingIndent||0,o=this.chart.inverted?-1:1,n=t.shapeArgs,r=this.options.hangingIndentTranslation,s=this.options.minNodeLength||10;if(i)if("cumulative"===r)for(n.height-=e,n.y-=o*e;i;)n.y+=o*e,i=i.hangsFrom;else if("shrink"===r)for(;i&&n.height>e+s;)n.height-=e,i=i.hangsFrom;else n.height-=e,this.chart.inverted||(n.y+=e);t.nodeHeight=this.chart.inverted?n.width:n.height},u.prototype.drawDataLabels=function(){if((t=this.options.dataLabels).linkTextPath&&t.linkTextPath.enabled)for(var t=0,i=this.points;t<i.length;t++){var e=i[t];e.options.dataLabels=d(e.options.dataLabels,{useHTML:!1})}r.prototype.drawDataLabels.call(this)},u.defaultOptions=d(h.defaultOptions,i),l((o=u).prototype,{pointClass:t}),e.registerSeriesType("organization",o),o}),i(t,"masters/modules/organization.src.js",[],function(){})});