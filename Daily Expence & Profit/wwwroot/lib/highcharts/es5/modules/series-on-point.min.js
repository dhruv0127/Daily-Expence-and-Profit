"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-on-point",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}var i=e?e._modules:{};t(i,"Series/SeriesOnPointComposition.js",[i["Core/Series/Point.js"],i["Core/Series/Series.js"],i["Core/Series/SeriesRegistry.js"],i["Core/Renderer/SVG/SVGRenderer.js"],i["Core/Utilities.js"]],function(a,h,t,p,d){var e,c,f,i=(t=t.seriesTypes).bubble,u=t.pie,l=d.addEvent,y=d.defined,o=d.find,s=d.isNumber;function n(t){this.getRadii=i.prototype.getRadii,this.getRadius=i.prototype.getRadius,this.getPxExtremes=i.prototype.getPxExtremes,this.getZExtremes=i.prototype.getZExtremes,this.chart=t.chart,this.series=t,this.options=t.options.onPoint}return t=e=e||{},c=[],t.compose=function(t,e){var i=(a=f.prototype).chartGetZData,o=a.seriesAfterInit,s=a.seriesAfterRender,n=a.seriesGetCenter,r=a.seriesShowOrHide,a=a.seriesTranslate;return u.prototype.onPointSupported=!0,d.pushUnique(c,t)&&(l(h,"afterInit",o),l(h,"afterRender",s),l(h,"afterGetCenter",n),l(h,"hide",r),l(h,"show",r),l(h,"translate",a)),d.pushUnique(c,e)&&(l(e,"beforeRender",i),l(e,"beforeRedraw",i)),t},n.prototype.drawConnector=function(){this.connector||(this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup));var t=this.getConnectorAttributes();t&&this.connector.animate(t)},n.prototype.getConnectorAttributes=function(){var t=this.series.chart;if(e=this.options){var e,i,o,s=e.connectorOptions||{},n=e.position,r=t.get(e.id);if(r instanceof a&&n&&y(r.plotX)&&y(r.plotY))return e=y(n.x)?n.x:r.plotX,i=y(n.y)?n.y:r.plotY,o=s.width||1,r=s.stroke||this.series.color,s=s.dashstyle,n={d:p.prototype.crispLine([["M",e,i],["L",e+(n.offsetX||0),i+(n.offsetY||0)]],o,"ceil"),"stroke-width":o},t.styledMode||(n.stroke=r,n.dashstyle=s),n}},n.prototype.seriesAfterInit=function(){this.onPointSupported&&this.options.onPoint&&(this.useMapGeometry=this.bubblePadding=!0,this.onPoint=new n(this))},n.prototype.seriesAfterRender=function(){delete this.chart.bubbleZExtremes,this.onPoint&&this.onPoint.drawConnector()},n.prototype.seriesGetCenter=function(t){var e,i=this.options.onPoint,o=t.positions;i&&((e=this.chart.get(i.id))instanceof a&&y(e.plotX)&&y(e.plotY)&&(o[0]=e.plotX,o[1]=e.plotY),(i=i.position)&&(y(i.x)&&(o[0]=i.x),y(i.y)&&(o[1]=i.y),i.offsetX&&(o[0]+=i.offsetX),i.offsetY&&(o[1]+=i.offsetY))),i=this.radii&&this.radii[this.index],s(i)&&(o[2]=2*i),t.positions=o},n.prototype.seriesShowOrHide=function(){var i=this.chart.series;this.points.forEach(function(e){var t=o(i,function(t){return!!(t=((t.onPoint||{}).options||{}).id)&&t===e.id});t&&t.setVisible(!t.visible,!1)})},n.prototype.seriesTranslate=function(){this.onPoint&&(this.onPoint.getRadii(),this.radii=this.onPoint.radii)},n.prototype.chartGetZData=function(){var e=[];this.series.forEach(function(t){t=t.options.onPoint,e.push(t&&t.z?t.z:null)}),this.series.forEach(function(t){t.onPoint&&(t.onPoint.zData=t.zData=e)})},f=n,t.Additions=f,e}),t(i,"masters/modules/series-on-point.src.js",[i["Series/SeriesOnPointComposition.js"]],function(t){t.compose(e.Series,e.Chart)})});