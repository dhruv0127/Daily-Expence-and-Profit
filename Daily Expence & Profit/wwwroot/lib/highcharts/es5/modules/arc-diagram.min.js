"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Series/ArcDiagram/ArcDiagramPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,n,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.fromNode=void 0,t.index=void 0,t.linksFrom=void 0,t.linksTo=void 0,t.options=void 0,t.series=void 0,t.scale=void 0,t.shapeArgs=void 0,t.toNode=void 0,t}return o=o.extend,n=e.seriesTypes.sankey.prototype.pointClass,s(r,n),r.prototype.isValid=function(){return!0},o((e=r).prototype,{setState:t.setNodeState}),e}),e(t,"Series/ArcDiagram/ArcDiagramSeries.js",[t["Series/ArcDiagram/ArcDiagramPoint.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,i,n,s){var r,a,l=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__rest||function(t,e){var o={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(o[n[i]]=t[n[i]]);return o},d=n.prototype.symbols,h=(n=i.seriesTypes).column,c=n.sankey,u=(n=s.extend,s.merge),f=s.pick,y=s.relativeLength;function m(){var t=null!==a&&a.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.nodeColumns=void 0,t.nodes=void 0,t.points=void 0,t}return l(m,a=c),m.prototype.createNodeColumns=function(){var d=this,p=this,c=p.chart,u=e.compose([],p);return u.sankeyColumn.maxLength=c.inverted?c.plotHeight:c.plotWidth,u.sankeyColumn.getTranslationFactor=function(t){for(var e,o=u.slice(),i=d.options.minLinkWidth||0,n=0,s=0,r=1,a=0,l=(c.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(u.length-1)*t.nodePadding;u.length;){for(n=l/u.sankeyColumn.sum(),t=!1,e=u.length;e--;){var p=u[e].getSum()*n*r,h=Math.min(c.plotHeight,c.plotWidth);h<p?r=Math.min(h/p,r):p<i&&(u.splice(e,1),l-=i,p=i,t=!0),a+=p*(1-r)/2,s=Math.max(s,p)}if(!t)break}return u.length=0,o.forEach(function(t){t.scale=r,u.push(t)}),u.sankeyColumn.maxRadius=s,u.sankeyColumn.scale=r,u.sankeyColumn.additionalSpace=a,n},u.sankeyColumn.offset=function(t,e){for(var o=t.series.options.equalNodes,i=u.sankeyColumn.additionalSpace||0,n=p.nodePadding,s=Math.min(c.plotWidth,c.plotHeight,(u.sankeyColumn.maxLength||0)/p.nodes.length-n),r=0;r<u.length;r++){var a=u[r].getSum()*(u.sankeyColumn.scale||0),l=o?s:Math.max(a*e,p.options.minLinkWidth||0);if(a=a?l+n:0,u[r]===t)return{relativeLeft:i+y(t.options.offset||0,a)};i+=a}},p.nodes.forEach(function(t){t.column=0,u.push(t)}),[u]},m.prototype.translateLink=function(o){function t(t,e){return e=(t.offset(o,e)||0)*s,Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-a)}var e=o.fromNode,i=o.toNode,n=this.chart,s=this.translationFactor,r=this.options,a=f(o.options.linkWeight,r.linkWeight,Math.max((o.weight||0)*s*e.scale,this.options.minLinkWidth||0)),l=o.series.options.centeredLinks,p=e.nodeY,h=l?e.nodeX+((e.shapeArgs.height||0)-a)/2:t(e,"linksFrom");(i=l?i.nodeX+((i.shapeArgs.height||0)-a)/2:t(i,"linksTo"))<h&&(h=(i=[i,h])[0],i=i[1]),r.reversed&&(h=(i=[i,h])[0],i=i[1],p=(n.plotSizeY||0)-p),o.shapeType="path",o.linkBase=[h,h+a,i,i+a],r=(i+a-h)/Math.abs(i+a-h)*f(r.linkRadius,Math.min(Math.abs(i+a-h)/2,e.nodeY-Math.abs(a))),o.shapeArgs={d:[["M",h,p],["A",(i+a-h)/2,r,0,0,1,i+a,p],["L",i,p],["A",(i-h-a)/2,r-a,0,0,0,h+a,p],["Z"]]},o.dlBox={x:h+(i-h)/2,y:p-r,height:a,width:0},o.tooltipPos=n.inverted?[(n.plotSizeY||0)-o.dlBox.y-a/2,(n.plotSizeX||0)-o.dlBox.x]:[o.dlBox.x,o.dlBox.y+a/2],o.y=o.plotY=1,o.x=o.plotX=1,o.color||(o.color=e.color)},m.prototype.translateNode=function(t,e){var o=this.translationFactor,i=this.chart,n=this.options,s=Math.min(i.plotWidth,i.plotHeight,(i.inverted?i.plotWidth:i.plotHeight)/t.series.nodes.length-this.nodePadding),r=t.getSum()*(e.sankeyColumn.scale||0),s=n.equalNodes?s:Math.max(r*o,this.options.minLinkWidth||0),a=Math.round(n.marker&&n.marker.lineWidth||0)%2/2,l=e.sankeyColumn.offset(t,o),o=Math.floor(f(l&&l.absoluteLeft,(e.sankeyColumn.left(o)||0)+(l&&l.relativeLeft||0)))+a,p=u(n.marker,t.options.marker),l=p.symbol,h=p.radius;e=parseInt(n.offset,10)*((i.inverted?i.plotWidth:i.plotHeight)-(Math.floor(this.colDistance*(t.column||0)+(p.lineWidth||0)/2)+a+(e.sankeyColumn.scale||0)*(e.sankeyColumn.maxRadius||0)/2))/100,(t.sum=r)?(t.nodeX=o,t.nodeY=e,r=t.options.width||n.width||s,s=t.options.height||n.height||s,a=e,n.reversed&&(a=(i.plotSizeY||0)-e,i.inverted&&(a=(i.plotSizeY||0)-e)),this.mapOptionsToLevel&&(t.dlOptions=c.getDLOptions({level:this.mapOptionsToLevel[t.level],optionsPoint:t.options})),t.plotX=1,t.plotY=1,t.tooltipPos=i.inverted?[(i.plotSizeY||0)-a-s/2,(i.plotSizeX||0)-o-r/2]:[o+r/2,a+s/2],t.shapeType="path",t.shapeArgs={d:d[l||"circle"](o,a-(h||s)/2,h||r,h||s),width:h||r,height:h||s},t.dlBox={x:o+r/2,y:a,height:0,width:0}):t.dlOptions={enabled:!1}},m.prototype.drawDataLabels=function(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,h.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,h.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=t)},m.prototype.pointAttribs=function(t,e){return t&&t.isNode?(t=o.prototype.pointAttribs.apply(this,arguments),p(t,["opacity"])):a.prototype.pointAttribs.apply(this,arguments)},m.prototype.markerAttribs=function(t){return t.isNode?a.prototype.markerAttribs.apply(this,arguments):{}},m.defaultOptions=u(c.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,lineWidth:0,states:{}}}),n((s=m).prototype,{orderNodes:!1}),s.prototype.pointClass=t,i.registerSeriesType("arcdiagram",s),s}),e(t,"masters/modules/arc-diagram.src.js",[],function(){})});