"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,r,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,r,o,i,a){return 0<(t=(a-e)*(r-t)-(o-e)*(i-t))||!(t<0)}function l(t,e,r,o,i,a,n,s){return h(t,e,i,a,n,s)!==h(r,o,i,a,n,s)&&h(t,e,r,o,i,a)!==h(t,e,r,o,n,s)}return{boxIntersectLine:function(t,e,r,o,i,a,n,s){return l(t,e,t+r,e,i,a,n,s)||l(t+r,e,t+r,e+o,i,a,n,s)||l(t,e+o,t+r,e+o,i,a,n,s)||l(t,e,t,e+o,i,a,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Defaults.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,r,e,o,i,a,s){function X(t,e,r,o,i){for(var a=t.chart,n=t.options.label||{},s=v(n.onArea,!!t.area),h=s||n.connectorAllowed,l=a.boxesToAvoid,c=Number.MAX_VALUE,p=Number.MAX_VALUE,u=0;l&&u<l.length;u+=1)if(w(l[u],{left:e,right:e+o.width,top:r,bottom:r+o.height}))return!1;for(u=0;u<a.series.length;u+=1){var d=a.series[u],l=d.interpolatedPoints&&y([],d.interpolatedPoints,!0);if(d.visible&&l){var f,x,b,m,g=a.plotHeight/10;for(f=a.plotTop;f<=a.plotTop+a.plotHeight;f+=g)l.unshift({chartX:a.plotLeft,chartY:f}),l.push({chartX:a.plotLeft+a.plotWidth,chartY:f});for(g=1;g<l.length;g+=1){if(l[g].chartX>=e-16&&l[g-1].chartX<=e+o.width+16){if(Y(e,r,o.width,o.height,l[g-1].chartX,l[g-1].chartY,l[g].chartX,l[g].chartY))return!1;t===d&&!m&&i&&(m=Y(e-16,r-16,o.width+32,o.height+32,l[g-1].chartX,l[g-1].chartY,l[g].chartX,l[g].chartY))}!h&&!m||t===d&&!s||(f=e+o.width/2-l[g].chartX,x=r+o.height/2-l[g].chartY,c=Math.min(c,f*f+x*x))}if(!s&&h&&t===d&&(i&&!m||c<Math.pow(n.connectorNeighbourDistance||1,2))){for(g=1;g<l.length;g+=1)(m=Math.min(Math.pow(e+o.width/2-l[g].chartX,2)+Math.pow(r+o.height/2-l[g].chartY,2),Math.pow(e-l[g].chartX,2)+Math.pow(r-l[g].chartY,2),Math.pow(e+o.width-l[g].chartX,2)+Math.pow(r-l[g].chartY,2),Math.pow(e+o.width-l[g].chartX,2)+Math.pow(r+o.height-l[g].chartY,2),Math.pow(e-l[g].chartX,2)+Math.pow(r+o.height-l[g].chartY,2)))<p&&(p=m,b=l[g]);m=!0}}}return!(i&&!m)&&{x:e,y:r,weight:c-(b?p:0),connectorPoint:b}}function h(Y){Y.boxesToAvoid=[];var t=Y.labelSeries||[],i=Y.boxesToAvoid;Y.series.forEach(function(o){return(o.points||[]).forEach(function(t){return(t.dataLabels||[]).forEach(function(t){var e=t.getBBox(),r=t.translateX+(o.xAxis?o.xAxis.pos:o.chart.plotLeft);t=t.translateY+(o.yAxis?o.yAxis.pos:o.chart.plotTop),i.push({left:r,top:t,right:r+e.width,bottom:t+e.height})})})}),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(t){function e(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);p[e]||(p[e]=1,o.push(t))}if(t.xAxis||t.yAxis){var r=t.points,o=[],i=t.graph||t.area,a=i&&i.element,n=t.chart.inverted,s=t.xAxis,h=t.yAxis,l=(n?h:s).pos,c=(n=(n?s:h).pos,s=v((t.options.label||{}).onArea,!!t.area),h.getThreshold(t.options.threshold)),p={};if(t.getPointSpline&&a&&a.getPointAtLength&&!s&&r.length<(t.chart.plotSizeX||0)/16){for(s=i.toD&&i.attr("d"),i.toD&&i.attr({d:i.toD}),h=a.getTotalLength(),t=0;t<h;t+=16)c=a.getPointAtLength(t),e({chartX:l+c.x,chartY:n+c.y,plotX:c.x,plotY:c.y});s&&i.attr({d:s});var u=r[r.length-1];e({chartX:l+(u.plotX||0),chartY:n+(u.plotY||0)})}else for(h=r.length,i=void 0,t=0;t<h;t+=1){u=r[t],a=u.plotX;var d=u.plotY,f=u.plotHigh;if(b(a)&&b(d)){var x={plotX:a,plotY:d,chartX:l+a,chartY:n+d};if(s&&(f&&(x.plotY=f,x.chartY=n+f),x.chartCenterY=n+((f||d)+v(u.yBottom,c))/2),i&&(u=Math.abs(x.chartX-i.chartX),f=Math.abs(x.chartY-i.chartY),16<(u=Math.max(u,f))))for(u=Math.ceil(u/16),f=1;f<u;f+=1)e({chartX:i.chartX+f/u*(x.chartX-i.chartX),chartY:i.chartY+f/u*(x.chartY-i.chartY),chartCenterY:(i.chartCenterY||0)+f/u*((x.chartCenterY||0)-(i.chartCenterY||0)),plotX:(i.plotX||0)+f/u*(a-(i.plotX||0)),plotY:(i.plotY||0)+f/u*(d-(i.plotY||0))});e(x),i=x}}return o}}(t),i.push.apply(i,e.boxesToAvoid||[])}),Y.series.forEach(function(t){function e(t,e,r){var o=Math.max(p,v(a,-1/0)),i=Math.min(p+d,v(n,1/0));return o<t&&t<=i-r.width&&u<=e&&e<=u+f-r.height}var r=t.options.label;if(r&&(t.xAxis||t.yAxis)){var o,a,n,i="highcharts-color-"+v(t.colorIndex,"none"),s=!t.labelBySeries,h=r.minFontSize,l=r.maxFontSize,c=Y.inverted,p=(c?t.yAxis:t.xAxis).pos,u=(c?t.xAxis:t.yAxis).pos,d=(Y.inverted?t.yAxis:t.xAxis).len,f=(Y.inverted?t.xAxis:t.yAxis).len,x=t.interpolatedPoints,b=v(r.onArea,!!t.area),m=[],g=t.xData||[],y=t.labelBySeries;if(b&&!c&&(c=[t.xAxis.toPixels(g[0]),t.xAxis.toPixels(g[g.length-1])],a=Math.min.apply(Math,c),n=Math.max.apply(Math,c)),t.visible&&!t.boosted&&x){for(y||(y=t.name,"string"==typeof r.format?y=S(r.format,t,Y):r.formatter&&(y=r.formatter.call(t)),t.labelBySeries=y=Y.renderer.label(y,0,0,"connector",0,0,r.useHTML).addClass("highcharts-series-label highcharts-series-label-"+t.index+" "+(t.options.className||"")+" "+i),Y.renderer.styledMode||(i="string"==typeof t.color?t.color:"#666666",y.css(M({color:b?Y.renderer.getContrast(i):i},r.style||{})),y.attr({opacity:Y.renderer.forExport?1:0,stroke:t.color,"stroke-width":1})),h&&l&&y.css({fontSize:h+(t.sum||0)/(t.chart.labelSeriesMaxSum||0)*(l-h)+"px"}),y.attr({padding:0,zIndex:3}).add()),(h=y.getBBox()).width=Math.round(h.width),c=x.length-1;0<c;--c)b?e(l=x[c].chartX-h.width/2,i=(x[c].chartCenterY||0)-h.height/2,h)&&(o=X(t,l,i,h)):((o=e(l=x[c].chartX+3,i=x[c].chartY-h.height-3,h)?X(t,l,i,h,!0):o)&&m.push(o),(o=e(l=x[c].chartX+3,i=x[c].chartY+3,h)?X(t,l,i,h,!0):o)&&m.push(o),(o=e(l=x[c].chartX-h.width-3,i=x[c].chartY+3,h)?X(t,l,i,h,!0):o)&&m.push(o),e(l=x[c].chartX-h.width-3,i=x[c].chartY-h.height-3,h)&&(o=X(t,l,i,h,!0))),o&&m.push(o);if(r.connectorAllowed&&!m.length&&!b)for(l=p+d-h.width;p<=l;l-=16)for(i=u;i<u+f-h.height;i+=16)(o=X(t,l,i,h,!0))&&m.push(o);m.length?(m.sort(function(t,e){return e.weight-t.weight}),o=m[0],(Y.boxesToAvoid||[]).push({left:o.x,right:o.x+h.width,top:o.y,bottom:o.y+h.height}),(x=Math.sqrt(Math.pow(Math.abs(o.x-(y.x||0)),2)+Math.pow(Math.abs(o.y-(y.y||0)),2)))&&t.labelBySeries&&(m={opacity:Y.renderer.forExport?1:0,x:o.x,y:o.y},r={opacity:1},x<=10&&(r={x:m.x,y:m.y},m={}),x=void 0,s&&((x=A(t.options.animation)).duration*=.2),t.labelBySeries.attr(M(m,{anchorX:o.connectorPoint&&(o.connectorPoint.plotX||0)+p,anchorY:o.connectorPoint&&(o.connectorPoint.plotY||0)+u})).animate(r,x),t.options.kdNow=!0,t.buildKDTree(),t=t.searchPoint({chartX:o.x,chartY:o.y},!0))&&(y.closest=[t,o.x-(t.plotX||0),o.y-(t.plotY||0)])):y&&(t.labelBySeries=y.destroy())}else y&&(t.labelBySeries=y.destroy())}}),u(Y,"afterDrawSeriesLabels")}function n(i){var a,n;this.renderer&&(n=A((a=this).renderer.globalAnimation).duration,a.labelSeries=[],a.labelSeriesMaxSum=0,a.seriesLabelTimer&&s.clearTimeout(a.seriesLabelTimer),a.series.forEach(function(t){var e=t.options.label||{},r=t.labelBySeries,o=r&&r.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&a.labelSeries&&(a.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&t.yData&&(t.sum=t.yData.reduce(function(t,e){return(t||0)+(e||0)},0),a.labelSeriesMaxSum=Math.max(a.labelSeriesMaxSum||0,t.sum||0)),"load"===i.type&&(n=Math.max(n,A(t.options.animation).duration)),o&&(void 0!==o[0].plotX?r.animate({x:o[0].plotX+o[1],y:o[0].plotY+o[2]}):r.attr({opacity:0})))}),a.seriesLabelTimer=d(function(){a.series&&a.labelSeries&&h(a)},a.renderer.forExport||!n?0:n))}function l(t,e,r,o,i){var a,n,s=i&&i.anchorX,h=(i=i&&i.anchorY,r/2);return b(s)&&b(i)&&(a=[["M",s,i]],(n=(n=e-i)<0?-o-n:n)<r&&(h=s<t+r/2?n:r-n),e+o<i?a.push(["L",t+h,e+o]):i<e?a.push(["L",t+h,e]):s<t?a.push(["L",t,e+o/2]):t+r<s&&a.push(["L",t+r,e+o/2])),a||[]}var y=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var o,i=0,a=e.length;i<a;i++)!o&&i in e||((o=o||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},A=t.animObject,S=e.format,c=o.setOptions,Y=a.boxIntersectLine,w=a.intersectRect,p=s.addEvent,M=s.extend,u=s.fireEvent,b=s.isNumber,v=s.pick,d=s.syncTimeout,f=[];return{compose:function(t,e){s.pushUnique(f,t)&&(p(r,"load",n),p(r,"redraw",n)),s.pushUnique(f,e)&&(e.prototype.symbols.connector=l),s.pushUnique(f,c)&&c({plotOptions:{series:{label:i}}})}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){e.compose(t.Chart,t.SVGRenderer)})});