!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Funnel/FunnelSeries.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,d,i){const k=e["noop"],{series:y,seriesTypes:{pie:s}}=d,{addEvent:a,extend:o,fireEvent:E,isArray:n,merge:l,pick:P}=i;class r extends s{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}alignDataLabel(t,e,i,s,a){let o=t.series,n=o.options.reversed,l=t.dlBox||t.shapeArgs,r=i.align,d=i.verticalAlign,h=((o.options||{}).dataLabels||{}).inside,c=o.center[1],p=n?2*c-t.plotY:t.plotY,u=o.getWidthAt(p-l.height/2+e.height),g="middle"===d?(l.topWidth-l.bottomWidth)/4:(u-l.bottomWidth)/2,f=l.y,b=l.x;var m=P(e.height,e.getBBox().height);"middle"===d?f=l.y-l.height/2+m/2:"top"===d&&(f=l.y-l.height+m+i.padding),("top"===d&&!n||"bottom"===d&&n||"middle"===d)&&("right"===r?b=l.x-i.padding+g:"left"===r&&(b=l.x+i.padding-g)),s={x:b,y:n?f-l.height:f,width:l.bottomWidth,height:l.height},i.verticalAlign="bottom",h&&!t.visible||y.prototype.alignDataLabel.call(this,t,e,i,s,a),h&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}drawDataLabels(){let t=this,e=t.data,i=t.options.dataLabels.distance,s,a,o,n=e.length,l,r;for(t.center[2]-=2*i;n--;)a=(s=(o=e[n]).half)?1:-1,r=o.plotY,o.labelDistance=P(o.options.dataLabels&&o.options.dataLabels.distance,i),t.maxLabelDistance=Math.max(o.labelDistance,t.maxLabelDistance||0),l=t.getX(r,s,o),o.labelPosition={natural:{x:0,y:r},computed:{},alignment:s?"right":"left",connectorPosition:{breakAt:{x:l+(o.labelDistance-5)*a,y:r},touchingSliceAt:{x:l+o.labelDistance*a,y:r}}};d.seriesTypes[t.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)}translate(){let e=0,s=this,t=s.chart,i=s.options,a=i.reversed,o=i.ignoreHiddenPoint,n=t.plotWidth,l=t.plotHeight,r=0,d=i.center,h=H(d[0],n),c=H(d[1],l),p=H(i.width,n),u,g=H(i.height,l),f=H(i.neckWidth,n),b=H(i.neckHeight,l),m=c-g/2+g-b,y=s.data,v,L,x="left"===i.dataLabels.position?1:0,W,A,C,D,S,j,w;function H(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}s.getWidthAt=function(t){var e=c-g/2;return t>m||g===b?f:f+(p-f)*(1-(t-e)/(g-b))},s.getX=function(t,e,i){return h+(e?-1:1)*(s.getWidthAt(a?2*c-t:t)/2+i.labelDistance)},s.center=[h,c,g],s.centerX=h,y.forEach(function(t){!t.y||!t.isValid()||o&&!1===t.visible||(e+=t.y)}),y.forEach(function(t){w=null,L=e?t.y/e:0,A=c-g/2+r*g,S=A+L*g,u=s.getWidthAt(A),W=h-u/2,C=W+u,u=s.getWidthAt(S),D=h-u/2,j=D+u,A>m?(W=D=h-f/2,C=j=h+f/2):S>m&&(w=S,u=s.getWidthAt(m),D=h-u/2,j=D+u,S=m),a&&(A=2*c-A,S=2*c-S,null!==w&&(w=2*c-w)),v=[["M",W,A],["L",C,A],["L",j,S]],null!==w&&v.push(["L",j,w],["L",D,w]),v.push(["L",D,S],["Z"]),t.shapeType="path",t.shapeArgs={d:v},t.percentage=100*L,t.plotX=h,t.plotY=(A+(w||S))/2,t.tooltipPos=[h,t.plotY],t.dlBox={x:D,y:A,topWidth:C-W,bottomWidth:j-D,height:Math.abs(P(w,S)-A),width:NaN},t.slice=k,t.half=x,!t.isValid()||o&&!1===t.visible||(r+=L)}),E(s,"afterTranslate")}sortByAngle(t){t.sort(function(t,e){return t.plotY-e.plotY})}}return r.defaultOptions=l(s.defaultOptions,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}),o(r.prototype,{animate:k}),a(t,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){let e=t.options&&t.options.dataLabels;n(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),d.registerSeriesType("funnel",r),r}),e(t,"Series/Pyramid/PyramidSeries.js",[t["Series/Funnel/FunnelSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){const s=i["merge"];class a extends t{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}}return a.defaultOptions=s(t.defaultOptions,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),e.registerSeriesType("pyramid",a),a}),e(t,"masters/modules/funnel.src.js",[],function(){})});