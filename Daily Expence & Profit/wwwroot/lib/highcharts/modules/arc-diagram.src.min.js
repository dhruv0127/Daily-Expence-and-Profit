!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/ArcDiagram/ArcDiagramPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var{prototype:{pointClass:e}}=e["seriesTypes"]["sankey"];const i=o["extend"];class s extends e{constructor(){super(...arguments),this.fromNode=void 0,this.index=void 0,this.linksFrom=void 0,this.linksTo=void 0,this.options=void 0,this.series=void 0,this.scale=void 0,this.shapeArgs=void 0,this.toNode=void 0}isValid(){return!0}}return i(s.prototype,{setState:t.setNodeState}),s}),e(t,"Series/ArcDiagram/ArcDiagramSeries.js",[t["Series/ArcDiagram/ArcDiagramPoint.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,i,s,n){var a=this&&this.__rest||function(t,e){var o={};for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(o[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(o[s[i]]=t[s[i]]);return o};const{symbols:c}=s["prototype"],{column:r,sankey:m}=i["seriesTypes"],{extend:l,merge:u,pick:g,relativeLength:p}=n;class h extends m{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.nodeColumns=void 0,this.nodes=void 0,this.points=void 0}createNodeColumns(){const d=this,c=d.chart,m=e.compose([],d);return m.sankeyColumn.maxLength=c.inverted?c.plotHeight:c.plotWidth,m.sankeyColumn.getTranslationFactor=t=>{const e=m.slice(),o=this.options.minLinkWidth||0;let i,s=0,n,a,r=0,l=1,h=0,d=(c.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(m.length-1)*t.nodePadding;for(;m.length;){for(s=d/m.sankeyColumn.sum(),i=!1,n=m.length;n--;){a=m[n].getSum()*s*l;var p=Math.min(c.plotHeight,c.plotWidth);a>p?l=Math.min(p/a,l):a<o&&(m.splice(n,1),d-=o,a=o,i=!0),h+=a*(1-l)/2,r=Math.max(r,a)}if(!i)break}return m.length=0,e.forEach(t=>{t.scale=l,m.push(t)}),m.sankeyColumn.maxRadius=r,m.sankeyColumn.scale=l,m.sankeyColumn.additionalSpace=h,s},m.sankeyColumn.offset=function(e,o){var i=e.series.options.equalNodes;let s=m.sankeyColumn.additionalSpace||0,n,a=d.nodePadding,r=Math.min(c.plotWidth,c.plotHeight,(m.sankeyColumn.maxLength||0)/d.nodes.length-a);for(let t=0;t<m.length;t++){var l=m[t].getSum()*(m.sankeyColumn.scale||0),h=i?r:Math.max(l*o,d.options.minLinkWidth||0);if(n=l?h+a:0,m[t]===e)return{relativeLeft:s+p(e.options.offset||0,n)};s+=n}},d.nodes.forEach(function(t){t.column=0,m.push(t)}),[m]}translateLink(o){const t=o.fromNode,e=o.toNode,i=this.chart,s=this.translationFactor,n=o.options,a=this.options,r=g(n.linkWeight,a.linkWeight,Math.max((o.weight||0)*s*t.scale,this.options.minLinkWidth||0)),l=o.series.options.centeredLinks,h=t.nodeY;var d=(t,e)=>{e=(t.offset(o,e)||0)*s;return Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-r)};let p=l?t.nodeX+((t.shapeArgs.height||0)-r)/2:d(t,"linksFrom"),c=l?e.nodeX+((e.shapeArgs.height||0)-r)/2:d(e,"linksTo"),m=h;r;p>c&&([p,c]=[c,p]),a.reversed&&([p,c]=[c,p],m=(i.plotSizeY||0)-m),o.shapeType="path",o.linkBase=[p,p+r,c,c+r];d=(c+r-p)/Math.abs(c+r-p)*g(a.linkRadius,Math.min(Math.abs(c+r-p)/2,t.nodeY-Math.abs(r)));o.shapeArgs={d:[["M",p,m],["A",(c+r-p)/2,d,0,0,1,c+r,m],["L",c,m],["A",(c-p-r)/2,d-r,0,0,0,p+r,m],["Z"]]},o.dlBox={x:p+(c-p)/2,y:m-d,height:r,width:0},o.tooltipPos=i.inverted?[(i.plotSizeY||0)-o.dlBox.y-r/2,(i.plotSizeX||0)-o.dlBox.x]:[o.dlBox.x,o.dlBox.y+r/2],o.y=o.plotY=1,o.x=o.plotX=1,o.color||(o.color=t.color)}translateNode(e,o){var i=this.translationFactor,s=this.chart,n=s.inverted?s.plotWidth:s.plotHeight,a=this.options,n=Math.min(s.plotWidth,s.plotHeight,n/e.series.nodes.length-this.nodePadding),r=e.getSum()*(o.sankeyColumn.scale||0),n=a.equalNodes?n:Math.max(r*i,this.options.minLinkWidth||0),l=Math.round(a.marker&&a.marker.lineWidth||0)%2/2,h=o.sankeyColumn.offset(e,i),i=Math.floor(g(h&&h.absoluteLeft,(o.sankeyColumn.left(i)||0)+(h&&h.relativeLeft||0)))+l,h=u(a.marker,e.options.marker),d=h.symbol,p=h.radius,h=parseInt(a.offset,10)*((s.inverted?s.plotWidth:s.plotHeight)-(Math.floor(this.colDistance*(e.column||0)+(h.lineWidth||0)/2)+l+(o.sankeyColumn.scale||0)*(o.sankeyColumn.maxRadius||0)/2))/100;if(e.sum=r){e.nodeX=i,e.nodeY=h;l=i,o=e.options.width||a.width||n,r=e.options.height||a.height||n;let t=h;a.reversed&&(t=(s.plotSizeY||0)-h,s.inverted&&(t=(s.plotSizeY||0)-h)),this.mapOptionsToLevel&&(e.dlOptions=m.getDLOptions({level:this.mapOptionsToLevel[e.level],optionsPoint:e.options})),e.plotX=1,e.plotY=1,e.tooltipPos=s.inverted?[(s.plotSizeY||0)-t-r/2,(s.plotSizeX||0)-l-o/2]:[l+o/2,t+r/2],e.shapeType="path",e.shapeArgs={d:c[d||"circle"](l,t-(p||r)/2,p||o,p||r),width:p||o,height:p||r},e.dlBox={x:l+o/2,y:t,height:0,width:0}}else e.dlOptions={enabled:!1}}drawDataLabels(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,r.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,r.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=t)}pointAttribs(t,e){return t&&t.isNode?((t=o.prototype.pointAttribs.apply(this,arguments))["opacity"],a(t,["opacity"])):super.pointAttribs.apply(this,arguments)}markerAttribs(t){return t.isNode?super.markerAttribs.apply(this,arguments):{}}}return h.defaultOptions=u(m.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,lineWidth:0,states:{}}}),l(h.prototype,{orderNodes:!1}),h.prototype.pointClass=t,i.registerSeriesType("arcdiagram",h),h}),e(t,"masters/modules/arc-diagram.src.js",[],function(){})});