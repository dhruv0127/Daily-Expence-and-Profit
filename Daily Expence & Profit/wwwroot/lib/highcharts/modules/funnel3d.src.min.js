!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts","highcharts/highcharts-3d","highcharts/modules/cylinder"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,r,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/Funnel3D/Funnel3DComposition.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Renderer/SVG/SVGRenderer3D.js"],e["Core/Utilities.js"]],function(e,o,r,t){const i=e["parse"],m=o["charts"],{error:b,extend:n,merge:C}=t;var d;return(d||(d={})).compose=function(e){r.compose(e),(t=e.prototype.elements3d).funnel3d=C(t.cuboid,{parts:["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],mainParts:["top","bottom"],sideGroups:["upperGroup","lowerGroup"],sideParts:{upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},pathType:"funnel3d",opacitySetter:function(e){const t=this,r=t.parts,i=o.charts[t.renderer.chartIndex],n="group-opacity-"+e+"-"+i.index;return t.parts=t.mainParts,t.singleSetterForParts("opacity",e),t.parts=r,i.renderer.filterId||(i.renderer.definition({tagName:"filter",attributes:{id:n},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+e}}]}]}),t.sideGroups.forEach(function(e){t[e].attr({filter:"url(#"+n+")"})}),t.renderer.styledMode&&(i.renderer.definition({tagName:"style",textContent:".highcharts-"+n+" {filter:url(#"+n+")}"}),t.sideGroups.forEach(function(e){e.addClass("highcharts-"+n)}))),t},fillSetter:function(e){let o=this,n=i(e),t=n.rgba[3],d={top:i(e).brighten(.1).get(),bottom:i(e).brighten(-.2).get()};return t<1?(n.rgba[3]=1,n=n.get("rgb"),o.attr({opacity:t})):n=e,(n=n.linearGradient||n.radialGradient||!o.gradientForSides?n:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,i(e).brighten(-.2).get()],[.5,e],[1,i(e).brighten(-.2).get()]]}).linearGradient?o.sideGroups.forEach(function(e){const t=o[e].gradientBox,r=n.linearGradient,i=C(n,{linearGradient:{x1:t.x+r.x1*t.width,y1:t.y+r.y1*t.height,x2:t.x+r.x2*t.width,y2:t.y+r.y2*t.height}});o.sideParts[e].forEach(function(e){d[e]=i})}):(C(!0,d,{frontUpper:n,backUpper:n,rightUpper:n,frontLower:n,backLower:n,rightLower:n}),n.radialGradient&&o.sideGroups.forEach(function(e){const t=o[e].gradientBox,r=t.x+t.width/2,i=t.y+t.height/2,n=Math.min(t.width,t.height);o.sideParts[e].forEach(function(e){o[e].setRadialReference([r,i,n])})})),o.singleSetterForParts("fill",null,d),o.color=o.fill=e,n.linearGradient&&[o.frontLower,o.frontUpper].forEach(function(e){const t=e.element,r=t&&o.renderer.gradients[t.gradient];r&&"userSpaceOnUse"!==r.attr("gradientUnits")&&r.attr({gradientUnits:"userSpaceOnUse"})}),o},adjustForGradient:function(){let n=this,o;n.sideGroups.forEach(function(e){let r={x:Number.MAX_VALUE,y:Number.MAX_VALUE},i={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};n.sideParts[e].forEach(function(e){const t=n[e];o=t.getBBox(!0),r={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},i={x:Math.max(i.x,o.x+o.width),y:Math.max(i.y,o.y+o.height)}}),n[e].gradientBox={x:r.x,width:i.x-r.x,y:r.y,height:i.y-r.y}})},zIndexSetter:function(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)},onAdd:function(){this.adjustForGradient(),this.finishedOnAdd=!0}});{var t=e;const w=t.prototype;return void n(w,{funnel3d:function(e){const t=this.element3d("funnel3d",e),r=this.styledMode,i={"stroke-width":1,stroke:"none"};return t.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:t.frontUpper.zIndex}).add(t),[t.frontUpper,t.backUpper,t.rightUpper].forEach(function(e){r||e.attr(i),e.add(t.upperGroup)}),t.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:t.frontLower.zIndex}).add(t),[t.frontLower,t.backLower,t.rightLower].forEach(function(e){r||e.attr(i),e.add(t.lowerGroup)}),t.gradientForSides=e.gradientForSides,t},funnel3dPath:function(e){this.getCylinderEnd||b("A required Highcharts module is missing: cylinder.js",!0,m[this.chartIndex]);let t=this,r=m[t.chartIndex],i=e.alphaCorrection=90-Math.abs(r.options.chart.options3d.alpha%180-90),n=w.cuboidPath.call(t,C(e,{depth:e.width,width:(e.width+e.bottom.width)/2})),o=n.isTop,d=!n.isFront,s=!!e.middle,a=t.getCylinderEnd(r,C(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:i})),h=e.bottom.width,l=C(e,{width:h,x:e.x-h/2,z:e.z-h/2,alphaCorrection:i}),p=t.getCylinderEnd(r,l,!0),c=h,u=l,g=p,f=p,y,x;return s&&(c=e.middle.width,u=C(e,{y:e.y+e.middle.fraction*e.height,width:c,x:e.x-c/2,z:e.z-c/2}),g=t.getCylinderEnd(r,u,!1),f=t.getCylinderEnd(r,u,!1)),(y={top:a,bottom:p,frontUpper:t.getCylinderFront(a,g),zIndexes:{group:n.zIndexes.group,top:0!==o?0:3,bottom:1!==o?0:3,frontUpper:d?2:1,backUpper:d?1:2,rightUpper:d?2:1}}).backUpper=t.getCylinderBack(a,g),x=Math.min(c,e.width)/Math.max(c,e.width)!=1,y.rightUpper=t.getCylinderFront(t.getCylinderEnd(r,C(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:x?-i:0}),!1),t.getCylinderEnd(r,C(u,{alphaCorrection:x?-i:0}),!s)),s&&(x=Math.min(c,h)/Math.max(c,h)!=1,C(!0,y,{frontLower:t.getCylinderFront(f,p),backLower:t.getCylinderBack(f,p),rightLower:t.getCylinderFront(t.getCylinderEnd(r,C(l,{alphaCorrection:x?-i:0}),!0),t.getCylinderEnd(r,C(u,{alphaCorrection:x?-i:0}),!1)),zIndexes:{frontLower:d?2:1,backLower:d?1:2,rightLower:d?1:2}})),y}})}},d}),t(e,"Series/Funnel3D/Funnel3DPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var e=e["seriesTypes"]["column"];const r=t["extend"];class i extends e.prototype.pointClass{constructor(){super(...arguments),this.dlBoxRaw=void 0,this.options=void 0,this.series=void 0,this.y=void 0}}return r(i.prototype,{shapeType:"funnel3d"}),i}),t(e,"Series/Funnel3D/Funnel3DSeries.js",[e["Series/Funnel3D/Funnel3DComposition.js"],e["Series/Funnel3D/Funnel3DPoint.js"],e["Core/Globals.js"],e["Core/Math3D.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,r,i,n,o){r=r.noop;const F=i["perspective"],{series:G,seriesTypes:{column:h}}=n,{extend:A,merge:d,pick:j,relativeLength:k}=o;class s extends h{constructor(){super(...arguments),this.center=void 0,this.data=void 0,this.options=void 0,this.points=void 0}alignDataLabel(e,t,r){const i=this,n=e.dlBoxRaw,o=i.chart.inverted,d=e.plotY>j(i.translatedThreshold,i.yAxis.len),s=j(r.inside,!!i.options.stacking),a={x:n.x,y:n.y,height:0};r.align=j(r.align,!o||s?"center":d?"right":"left"),r.verticalAlign=j(r.verticalAlign,o||s?"middle":d?"top":"bottom"),"top"!==r.verticalAlign&&(a.y+=n.bottom/("bottom"===r.verticalAlign?1:2)),a.width=i.getWidthAt(a.y),i.options.reversed&&(a.width=n.fullWidth-a.width),s?a.x-=a.width/2:"left"===r.align?(r.align="right",a.x-=1.5*a.width):"right"===r.align?(r.align="left",a.x+=a.width/2):a.x-=a.width/2,e.dlBox=a,h.prototype.alignDataLabel.apply(i,arguments)}bindAxes(){G.prototype.bindAxes.apply(this,arguments),A(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),d(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})}translate(){G.prototype.translate.apply(this,arguments);let t=0,e=this,r=e.chart,i=e.options,n=i.reversed,o=i.ignoreHiddenPoint,d=r.plotWidth,s=r.plotHeight,a=0,h=i.center,l=k(h[0],d),p=k(h[1],s),c=k(i.width,d),u,g,f=k(i.height,s),y=k(i.neckWidth,d),x=k(i.neckHeight,s),w=p-f/2+f-x,m=e.data,b,C,v,L,S,U,E;e.getWidthAt=g=function(e){var t=p-f/2;return e>w||f===x?y:y+(c-y)*(1-(e-t)/(f-x))},e.center=[l,p,f],e.centerX=l,m.forEach(function(e){o&&!1===e.visible||(t+=e.y)}),m.forEach(function(e){S=null,b=t?e.y/t:0,v=p-f/2+a*f,L=v+b*f,u=g(v),U=L-v,E={gradientForSides:j(e.options.gradientForSides,i.gradientForSides),x:l,y:v,height:U,width:u,z:1,top:{width:u}},u=g(L),E.bottom={fraction:b,width:u},v>=w?E.isCylinder=!0:L>w&&(S=L,u=g(w),L=w,E.bottom.width=u,E.middle={fraction:U?(w-v)/U:0,width:u}),n&&(E.y=v=p+f/2-(a+b)*f,E.middle&&(E.middle.fraction=1-(U?E.middle.fraction:0)),u=E.width,E.width=E.bottom.width,E.bottom.width=u),e.shapeArgs=A(e.shapeArgs,E),e.percentage=100*b,e.plotX=l,n?e.plotY=p+f/2-(a+b/2)*f:e.plotY=(v+(S||L))/2,C=F([{x:l,y:e.plotY,z:n?-(c-g(e.plotY))/2:-g(e.plotY)/2}],r,!0)[0],e.tooltipPos=[C.x,C.y],e.dlBoxRaw={x:l,width:g(e.plotY),y:v,bottom:E.height||0,fullWidth:c},o&&!1===e.visible||(a+=b)})}}return s.compose=e.compose,s.defaultOptions=d(h.defaultOptions,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}),A(s.prototype,{pointClass:t,translate3dShapes:r}),n.registerSeriesType("funnel3d",s),s}),t(e,"masters/modules/funnel3d.src.js",[e["Core/Renderer/RendererRegistry.js"],e["Series/Funnel3D/Funnel3DSeries.js"]],function(e,t){return t.compose(e.getRendererType()),t})});