!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,s,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/DependencyWheel/DependencyWheelPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var{prototype:{pointClass:e}}=e["seriesTypes"]["sankey"];const a=t["wrap"];class s extends e{constructor(){super(...arguments),this.angle=void 0,this.fromNode=void 0,this.index=void 0,this.linksFrom=void 0,this.linksTo=void 0,this.options=void 0,this.series=void 0,this.shapeArgs=void 0,this.toNode=void 0}getDataLabelPath(t){const e=this.series.chart.renderer,s=this.shapeArgs,i=this.angle<0||this.angle>Math.PI,n=s.start||0,o=s.end||0;return this.dataLabelPath?(this.dataLabelPath=this.dataLabelPath.destroy(),delete this.dataLabelPath):a(t,"destroy",e=>(this.dataLabelPath&&(this.dataLabelPath=this.dataLabelPath.destroy()),e.call(t))),this.dataLabelPath=e.arc({open:!0,longArc:Math.abs(Math.abs(n)-Math.abs(o))<Math.PI?0:1}).attr({x:s.x,y:s.y,r:s.r+(this.dataLabel.options.distance||0),start:i?n:o,end:i?o:n,clockwise:+i}).add(e.defs),this.dataLabelPath}isValid(){return!0}}return s}),t(e,"Series/DependencyWheel/DependencyWheelSeriesDefaults.js",[],function(){return{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}}),t(e,"Series/DependencyWheel/DependencyWheelSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/DependencyWheel/DependencyWheelPoint.js"],e["Series/DependencyWheel/DependencyWheelSeriesDefaults.js"],e["Core/Globals.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,s,i,n,o,a){const r=e["animObject"],h=i["deg2rad"],{pie:d,sankey:c}=o["seriesTypes"],{extend:l,merge:p}=a;class u extends c{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.nodeColumns=void 0,this.nodes=void 0,this.points=void 0}animate(e){if(!e){const t=r(this.options.animation).duration,i=t/2/this.nodes.length;this.nodes.forEach(function(e,t){const s=e.graphic;s&&(s.attr({opacity:0}),setTimeout(function(){e.graphic&&e.graphic.animate({opacity:1},{duration:i})},i*t))},this),this.points.forEach(function(e){const t=e.graphic;!e.isNode&&t&&t.attr({opacity:0}).animate({opacity:1},this.options.animation)},this)}}createNode(e){const a=c.prototype.createNode.call(this,e);return a.getSum=function(){return a.linksFrom.concat(a.linksTo).reduce(function(e,t){return e+t.weight},0)},a.offset=function(e){let t=0,s,i=a.linksFrom.concat(a.linksTo),n;function o(e){return e.fromNode===a?e.toNode:e.fromNode}for(i.sort(function(e,t){return o(e).index-o(t).index}),s=0;s<i.length;s++)if(o(i[s]).index>a.index){i=i.slice(0,s).reverse().concat(i.slice(s).reverse()),n=!0;break}for(n||i.reverse(),s=0;s<i.length;s++){if(i[s]===e)return t;t+=i[s].weight}},a}createNodeColumns(){const t=[n.compose([],this)];return this.nodes.forEach(function(e){e.column=0,t[0].push(e)}),t}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){const l=this.options,p=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),o=this.getCenter(),u=(l.startAngle-90)*h,e=l.borderRadius,a="object"==typeof e?e.radius:e;c.prototype.translate.call(this),this.nodeColumns[0].forEach(function(e){if(e.sum){const t=e.shapeArgs,h=o[0],d=o[1],s=o[2]/2,c=s-l.nodeWidth,i=u+p*(t.y||0),n=u+p*((t.y||0)+(t.height||0));e.angle=i+(n-i)/2,e.shapeType="arc",e.shapeArgs={x:h,y:d,r:s,innerR:c,start:i,end:n,borderRadius:a},e.dlBox={x:h+Math.cos((i+n)/2)*(s+c)/2,y:d+Math.sin((i+n)/2)*(s+c)/2,width:1,height:1},e.linksFrom.forEach(function(r){if(r.linkBase){let a;var e=r.linkBase.map(function(e,t){let s=p*e,i=Math.cos(u+s)*(1+c),n=Math.sin(u+s)*(1+c),o=l.curveFactor||0;return(a=Math.abs(r.linkBase[3-t]*p-s))>Math.PI&&(a=2*Math.PI-a),(a*=c)<c&&(o*=a/c),{x:h+i,y:d+n,cpX:h+(1-o)*i,cpY:d+(1-o)*n}});r.shapeArgs={d:[["M",e[0].x,e[0].y],["A",c,c,0,0,1,e[1].x,e[1].y],["C",e[1].cpX,e[1].cpY,e[2].cpX,e[2].cpY,e[2].x,e[2].y],["A",c,c,0,0,1,e[3].x,e[3].y],["C",e[3].cpX,e[3].cpY,e[0].cpX,e[0].cpY,e[0].x,e[0].y]]}}})}})}}return u.defaultOptions=p(c.defaultOptions,s),l(u.prototype,{orderNodes:!1,getCenter:d.prototype.getCenter}),u.prototype.pointClass=t,o.registerSeriesType("dependencywheel",u),u}),t(e,"masters/modules/dependency-wheel.src.js",[],function(){})});