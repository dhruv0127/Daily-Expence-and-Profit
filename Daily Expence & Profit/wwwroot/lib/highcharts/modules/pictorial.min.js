"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/pictorial",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Extensions/PatternFill.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,i,r,o,s,a,c){function n(e,i){var r=(e=JSON.stringify(e)).length||0;let s=0,t=0;if(i){i=Math.max(Math.floor(r/500),1);for(let t=0;t<r;t+=i)s+=e.charCodeAt(t);s&=s}for(;t<r;++t)i=e.charCodeAt(t),s=(s<<5)-s+i,s&=s;return s.toString(16).replace("-","1")}const l=t["animObject"],h=r["getOptions"],{addEvent:d,defined:p,erase:f,merge:u,pick:g,removeEvent:m,wrap:x}=c,w=i.patterns=(()=>{const i=[],r=h().colors;return["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"].forEach((t,e)=>{i.push({path:t,color:r[e],width:5,height:5,patternTransform:"scale(1.4 1.4)"})}),["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"].forEach((t,e)=>{i.push({path:t,color:r[e+5],width:10,height:10})}),i})();o.prototype.calculatePatternDimensions=function(t){if(!t.width||!t.height){var e=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},i=this.shapeArgs;if(i&&(e.width=i.width||e.width,e.height=i.height||e.height,e.x=i.x||e.x,e.y=i.y||e.y),t.image){if(!e.width||!e.height)return t._width="defer",t._height="defer",e=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(p(e)&&e<0&&(t._inverted=!0));t.aspectRatio&&(e.aspectRatio=e.width/e.height,t.aspectRatio>e.aspectRatio?e.aspectWidth=e.height*t.aspectRatio:e.aspectHeight=e.width/t.aspectRatio),t._width=t.width||Math.ceil(e.aspectWidth||e.width),t._height=t.height||Math.ceil(e.aspectHeight||e.height)}t.width||(t._x=t.x||0,t._x+=e.x-Math.round(e.aspectWidth?Math.abs(e.aspectWidth-e.width)/2:0)),t.height||(t._y=t.y||0,t._y+=e.y-Math.round(e.aspectHeight?Math.abs(e.aspectHeight-e.height)/2:0))}},a.prototype.addPattern=function(e,t){let i,r=(t=g(t,!0),l(t)),s=e.width||e._width||32,a=e.height||e._height||32,o=e.color||"#343434",n=e.id,h=this;var d,p=function(t){h.rect(0,0,s,a).attr({fill:t}).add(i)};if(n||(this.idCounter=this.idCounter||0,n="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(n+="-export"),this.defIds=this.defIds||[],!(-1<this.defIds.indexOf(n)))return this.defIds.push(n),d={id:n,patternUnits:"userSpaceOnUse",patternContentUnits:e.patternContentUnits||"userSpaceOnUse",width:s,height:a,x:e._x||e.x||0,y:e._y||e.y||0},e._inverted&&(d.patternTransform="scale(1, -1)",e.patternTransform&&(e.patternTransform+=" scale(1, -1)")),e.patternTransform&&(d.patternTransform=e.patternTransform),(i=this.createElement("pattern").attr(d).add(this.defs)).id=n,e.path?(d=c.isObject(e.path)?e.path:{d:e.path},e.backgroundColor&&p(e.backgroundColor),p={d:d.d},this.styledMode||(p.stroke=d.stroke||o,p["stroke-width"]=g(d.strokeWidth,2),p.fill=d.fill||"none"),d.transform&&(p.transform=d.transform),this.createElement("path").attr(p).add(i),i.color=o):e.image&&(t?this.image(e.image,0,0,s,a,function(){this.animate({opacity:g(e.opacity,1)},r),m(this.element,"load")}).attr({opacity:0}):this.image(e.image,0,0,s,a)).add(i),e.image&&t||void 0===e.opacity||[].forEach.call(i.element.childNodes,function(t){t.setAttribute("opacity",e.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[n]=i},x(s.prototype,"getColor",function(t){const e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,Array.prototype.slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,Array.prototype.slice.call(arguments,1))}),d(s,"render",function(){const i=this.chart.isResizing;!this.isDirtyData&&!i&&this.chart.hasRendered||(this.points||[]).forEach(function(t){const e=t.options&&t.options.color;e&&e.pattern&&(!i||t.shapeArgs&&t.shapeArgs.width&&t.shapeArgs.height?t.calculatePatternDimensions(e.pattern):(e.pattern._width="defer",e.pattern._height="defer"))})}),d(o,"afterInit",function(){const t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=u(this.series.options.color,t))}),d(a,"complexColor",function(e){const t=e.args[0],i=e.args[1];e=e.args[2];var r=this.chartIndex||0;let s=t.pattern,a="#343434";if(!(s=void 0!==t.patternIndex&&w?w[t.patternIndex]:s))return!0;if(s.image||"string"==typeof s.path||s.path&&s.path.d){let t=e.parentNode&&e.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==s._width&&"defer"!==s._height||o.prototype.calculatePatternDimensions.call({graphic:{element:e}},s),!t&&s.id||((s=u({},s)).id="highcharts-pattern-"+r+"-"+n(s)+n(s,!0)),this.addPattern(s,!this.forExport&&g(s.animation,this.globalAnimation,{duration:100})),a=`url(${this.url}#${s.id+(this.forExport?"-export":"")})`}else a=s.color||a;return e.setAttribute(i,a),!(t.toString=function(){return a})}),d(e,"endResize",function(){(this.renderer&&this.renderer.defIds||[]).filter(function(t){return t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")}).length&&(this.series.forEach(function(t){t.visible&&t.points.forEach(function(t){(t=t.options&&t.options.color)&&t.pattern&&(t.pattern._width="defer",t.pattern._height="defer")})}),this.redraw(!1))}),d(e,"redraw",function(){const e={},i=this.renderer,t=(i.defIds||[]).filter(function(t){return t.indexOf&&0===t.indexOf("highcharts-pattern-")});t.length&&([].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),function(t){(t=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke"))&&(t=t.replace(i.url,"").replace("url(#","").replace(")",""),e[t]=!0)}),t.forEach(function(t){e[t]||(f(i.defIds,t),i.patternElements[t]&&(i.patternElements[t].destroy(),delete i.patternElements[t]))}))})}),e(t,"Series/Pictorial/PictorialUtilities.js",[t["Core/Utilities.js"]],function(t){const s=t["defined"];return{rescalePatternFill:function(e,i,r,s,a=1){var o=e&&e.attr("fill");if((o=o&&o.match(/url\(([^)]+)\)/))&&(o=document.querySelector(o[1]+" path"))){let t=o.getBBox();0===t.width&&(n=o.parentElement,e.renderer.box.appendChild(o),t=o.getBBox(),n.appendChild(o)),e=1/(t.width+a),s=i/s/t.height,n=t.width/t.height,i=r/i;var n,h=-t.width/2;o.setAttribute("stroke-width",a/(r*(e=n<i?e*n/i:e))),o.setAttribute("transform","translate(0.5, 0)"+`scale(${e} ${s}) `+`translate(${h+a*e/2}, ${-t.y})`)}},invertShadowGroup:function(t,e){(e=e.chart.inverted)&&t.attr({rotation:e?90:0,scaleX:e?-1:1})},getStackMetrics:function(t,e){let i=t.len,r=0;return e&&s(e.max)&&(r=t.toPixels(e.max,!0),i=t.len-r),{height:i,y:r}}}}),e(t,"Series/Pictorial/PictorialPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Series/Pictorial/PictorialUtilities.js"]],function(t,e){t=t.seriesTypes.column.prototype.pointClass;const{rescalePatternFill:i,getStackMetrics:r}=e;class s extends t{constructor(){super(...arguments),this.pathDef=this.series=this.options=void 0}setState(){super.setState.apply(this,arguments);var t=this.series,e=t.options.paths;this.graphic&&this.shapeArgs&&e&&i(this.graphic,r(t.yAxis,e[this.index%e.length]).height,this.shapeArgs.width||0,this.shapeArgs.height||1/0,this.series.options.borderWidth||0)}}return s}),e(t,"Series/Pictorial/PictorialSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Series/Pictorial/PictorialPoint.js"],t["Series/Pictorial/PictorialUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(t,e,i,r,s,a,o){function n(t){var e=Object.keys(t.points).filter(t=>1<t.split(",").length);const i=t.axis.chart.series;let r=-1;if(e.map(t=>parseFloat(t.split(",")[0])).forEach(t=>{i[t]&&i[t].visible&&(r=t)}),(e=t.axis.chart.series[r])&&e.is("pictorial")&&t.axis.hasData()&&e.xAxis.hasData()){const i=e.xAxis;var s=t.axis.options;const d=t.axis.chart,p=t.shadow;var a=i.toPixels(t.x,!0),a=d.inverted?i.len-a:a,o=(n=e.options.paths||[])[t.x%n.length],n=e.getColumnMetrics&&e.getColumnMetrics().width;const{height:r,y:c}=l(e.yAxis,o);var h=s.stackShadow,s=y(h&&h.borderWidth,e.options.borderWidth,1);!p&&h&&h.enabled&&o?(t.shadowGroup||(t.shadowGroup=d.renderer.g("shadow-group").add()),t.shadowGroup.attr({translateX:(d.inverted?t.axis:i).pos,translateY:(d.inverted?i:t.axis).pos}),t.shadow=d.renderer.rect(a,c,n,r).attr({fill:{pattern:{path:{d:o.definition,fill:h.color||"#dedede",strokeWidth:s,stroke:h.borderColor||"transparent"},x:a,y:c,width:n,height:r,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#dedede"}}}).add(t.shadowGroup),f(t.shadowGroup,t.axis),u(t.shadow,r,n,r,s),t.setOffset(e.pointXOffset||0,e.barW||0)):p&&t.shadowGroup&&(p.animate({x:a,y:c,width:n,height:r}),o=/url\(([^)]+)\)/,(o=(h=p.attr("fill"))&&h.match(o))&&d.renderer.patternElements&&d.renderer.patternElements[o[1].slice(1)].animate({x:a,y:c,width:n,height:r}),t.shadowGroup.animate({translateX:(d.inverted?t.axis:i).pos,translateY:(d.inverted?i:t.axis).pos}),f(t.shadowGroup,t.axis),u(p,r,n,r,s),t.setOffset(e.pointXOffset||0,e.barW||0))}else t.shadow&&t.shadowGroup&&(t.shadow.destroy(),t.shadow=void 0,t.shadowGroup.destroy(),t.shadowGroup=void 0)}function h(t,e){t.axes&&t.axes.forEach(function(t){t.stacking&&w(t.stacking.stacks,function(t){w(t,function(t){e(t)})})})}function d(t){h(t,function(t){t.shadow&&t.shadowGroup&&(t.shadow.destroy(),t.shadowGroup.destroy(),delete t.shadow,delete t.shadowGroup)})}const p=s.seriesTypes.column,c=t["animObject"],{getStackMetrics:l,invertShadowGroup:f,rescalePatternFill:u}=r,{addEvent:g,defined:m,merge:x,objectEach:w,pick:y}=o;class C extends p{constructor(){super(...arguments),this.points=this.options=this.data=this.paths=void 0}animate(t){const{chart:e,group:i}=this;var r=c(this.options.animation),s=[this.getSharedClipKey(),r.duration,r.easing,r.defer].join();let a=e.sharedClips[s];t&&i?(r=this.getClipBox(),a||(r.y=r.height,r.height=0,a=e.renderer.clipRect(r),e.sharedClips[s]=a),i.clip(a)):a&&!a.hasClass("highcharts-animating")&&(s=this.getClipBox(),a.addClass("highcharts-animating").animate(s,r))}animateDrilldown(){}animateDrillupFrom(){}pointAttribs(t){const e=super.pointAttribs.apply(this,arguments);var i,r,s=this.options.paths;return t&&t.shapeArgs&&s&&(s=s[t.index%s.length],{y:i,height:r}=l(this.yAxis,s),(s=s.definition)!==t.pathDef?(t.pathDef=s,e.fill={pattern:{path:{d:s,fill:e.fill,strokeWidth:e["stroke-width"],stroke:e.stroke},x:t.shapeArgs.x,y:i,width:t.shapeArgs.width||0,height:r,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#ff0000"}}):t.pathDef&&t.graphic&&delete e.fill),delete e.stroke,delete e.strokeWidth,e}getExtremes(){const e=super.getExtremes.apply(this,arguments),t=this.options.paths;return t&&t.forEach(function(t){m(t.max)&&m(e.dataMax)&&t.max>e.dataMax&&(e.dataMax=t.max)}),e}}return C.defaultOptions=x(p.defaultOptions,{borderWidth:0}),g(C,"afterRender",function(){const a=this,o=a.options.paths,n=/url\(([^)]+)\)/;a.points.forEach(function(t){var e,i,r,s;t.graphic&&t.shapeArgs&&o&&(e=o[t.index%o.length],i=(i=t.graphic.attr("fill"))&&i.match(n),{y:r,height:s}=l(a.yAxis,e),i&&a.chart.renderer.patternElements&&(i=a.chart.renderer.patternElements[i[1].slice(1)])&&i.animate({x:t.shapeArgs.x,y:r,width:t.shapeArgs.width||0,height:s}),u(t.graphic,l(a.yAxis,e).height,t.shapeArgs.width||0,t.shapeArgs.height||1/0,a.options.borderWidth||0))})}),g(e,"render",function(){h(this,n)}),g(a,"afterSetOffset",function(t){var e,i,r;this.shadow&&({chart:e,len:i}=this.axis,{xOffset:t,width:r}=t,this.shadow.attr({translateX:e.inverted?t-e.xAxis[0].len:t,translateY:e.inverted?-i:0}),this.shadow.animate({width:r}))}),g(e,"afterDrilldown",function(t){d(this)}),g(e,"afterDrillUp",function(t){d(this)}),C.prototype.pointClass=i,s.registerSeriesType("pictorial",C),C}),e(t,"masters/modules/pictorial.src.js",[],function(){})});