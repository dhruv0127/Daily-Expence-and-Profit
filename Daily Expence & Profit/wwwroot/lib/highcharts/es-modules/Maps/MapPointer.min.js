"use strict";import Pointer from"../Core/Pointer.js";import U from"../Core/Utilities.js";const{defined,extend,pick,wrap}=U,normalize=Pointer.prototype.normalize;let totalWheelDelta=0,totalWheelDeltaTimer;extend(Pointer.prototype,{normalize:function(t,e){const o=this.chart;return t=normalize.call(this,t,e),o&&o.mapView&&((e=o.mapView.pixelsToLonLat({x:t.chartX-o.plotLeft,y:t.chartY-o.plotTop}))&&extend(t,e)),t},onContainerDblClick:function(t){const e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,void 0,void 0,t.chartX,t.chartY)},onContainerMouseWheel:function(t){const e=this.chart;t=this.normalize(t);var o=defined(t.wheelDelta)&&-t.wheelDelta/120||t.deltaY||t.detail;1<=Math.abs(o)&&(totalWheelDelta+=Math.abs(o),totalWheelDeltaTimer&&clearTimeout(totalWheelDeltaTimer),totalWheelDeltaTimer=setTimeout(()=>{totalWheelDelta=0},50)),totalWheelDelta<10&&e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapView&&e.mapView.zoomBy((e.options.mapNavigation.mouseWheelSensitivity-1)*-o,void 0,[t.chartX,t.chartY],!(Math.abs(o)<1)&&void 0)}}),wrap(Pointer.prototype,"zoomOption",function(t){var e=this.chart.options.mapNavigation;pick(e.enableTouchZoom,e.enabled)&&(this.chart.options.chart.zooming.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}),wrap(Pointer.prototype,"pinchTranslate",function(t,e,o,a,i,l,n){t.call(this,e,o,a,i,l,n),"map"===this.chart.options.chart.type&&this.hasZoom&&(t=a.scaleX>a.scaleY,this.pinchTranslateDirection(!t,e,o,a,i,l,n,t?a.scaleX:a.scaleY))});