"use strict";import DataPoolDefaults from"./DataPoolDefaults.js";import DataConnector from"./Connectors/DataConnector.js";class DataPool{constructor(o=DataPoolDefaults){o.connectors=o.connectors||[],this.options=o,this.connectors={}}getConnector(o){var t=this.connectors[o];if(t)return Promise.resolve(t);t=this.getConnectorOptions(o);if(t)return this.loadConnector(t);throw new Error(`Connector not found. (${o})`)}getConnectorOptions(n){var e=this.options.connectors;for(let o=0,t=e.length;o<t;++o)if(e[o].name===n)return e[o]}getConnectorTable(o){return this.getConnector(o).then(o=>o.table)}loadConnector(r){return new Promise((o,t)=>{const n=DataConnector.types[r.type];if(!n)throw new Error(`Connector type not found. (${r.type})`);const e=new n(r.options);(this.connectors[r.name]=e).load().then(o).catch(t)})}setConnectorOptions(n){const e=this.options.connectors;for(let o=0,t=e.length;o<t;++o)if(e[o].name===n.name)return void e.splice(o,1,n);e.push(n)}}export default DataPool;