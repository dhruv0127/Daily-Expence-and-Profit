"use strict";import D from"../../Core/Defaults.js";const{defaultOptions,setOptions}=D;import H from"../../Core/Globals.js";const isTouchDevice=H["isTouchDevice"];import NavigatorAxisAdditions from"../../Core/Axis/NavigatorAxisComposition.js";import NavigatorDefaults from"./NavigatorDefaults.js";import NavigatorSymbols from"./NavigatorSymbols.js";import RendererRegistry from"../../Core/Renderer/RendererRegistry.js";const getRendererType=RendererRegistry["getRendererType"];import U from"../../Core/Utilities.js";const{addEvent,extend,merge,pick}=U,composedMembers=[];let NavigatorConstructor;function compose(t,e,o,i){if(NavigatorAxisAdditions.compose(t),NavigatorConstructor=o,U.pushUnique(composedMembers,e)){const r=e.prototype;r.callbacks.push(onChartCallback),addEvent(e,"afterAddSeries",onChartAfterAddSeries),addEvent(e,"afterSetChartSize",onChartAfterSetChartSize),addEvent(e,"afterUpdate",onChartAfterUpdate),addEvent(e,"beforeRender",onChartBeforeRender),addEvent(e,"beforeShowResetZoom",onChartBeforeShowResetZoom),addEvent(e,"update",onChartUpdate)}U.pushUnique(composedMembers,i)&&addEvent(i,"afterUpdate",onSeriesAfterUpdate),U.pushUnique(composedMembers,getRendererType)&&extend(getRendererType().prototype.symbols,NavigatorSymbols),U.pushUnique(composedMembers,setOptions)&&extend(defaultOptions,{navigator:NavigatorDefaults})}function onChartAfterAddSeries(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function onChartAfterSetChartSize(){var t,e;const o=this.legend,i=this.navigator;let r,s,a;i&&(r=o&&o.options,s=i.xAxis,a=i.yAxis,{scrollbarHeight:t,scrollButtonSize:e}=i,this.inverted?(i.left=i.opposite?this.chartWidth-t-i.height:this.spacing[3]+t,i.top=this.plotTop+e):(i.left=pick(s.left,this.plotLeft+e),i.top=i.navigatorOptions.top||this.chartHeight-i.height-t-((null==(e=this.scrollbar)?void 0:e.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(r&&"bottom"===r.verticalAlign&&"proximate"!==r.layout&&r.enabled&&!r.floating?o.legendHeight+pick(r.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),s&&a&&(this.inverted?s.options.left=a.options.left=i.left:s.options.top=a.options.top=i.top,s.setAxisSize(),a.setAxisSize()))}function onChartAfterUpdate(t){this.navigator||this.scroller||!this.options.navigator.enabled&&!this.options.scrollbar.enabled||(this.scroller=this.navigator=new NavigatorConstructor(this),pick(t.redraw,!0)&&this.redraw(t.animation))}function onChartBeforeRender(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=this.navigator=new NavigatorConstructor(this))}function onChartBeforeShowResetZoom(){var t=this.options,e=t.navigator,o=t.rangeSelector;if((e&&e.enabled||o&&o.enabled)&&(!isTouchDevice&&"x"===t.chart.zooming.type||isTouchDevice&&"x"===t.chart.zooming.pinchType))return!1}function onChartCallback(t){const e=t.navigator;e&&t.xAxis[0]&&(t=t.xAxis[0].getExtremes(),e.render(t.min,t.max))}function onChartUpdate(t){var e=t.options.navigator||{},o=t.options.scrollbar||{};this.navigator||this.scroller||!e.enabled&&!o.enabled||(merge(!0,this.options.navigator,e),merge(!0,this.options.scrollbar,o),delete t.options.navigator,delete t.options.scrollbar)}function onSeriesAfterUpdate(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}const NavigatorComposition={compose:compose};export default NavigatorComposition;