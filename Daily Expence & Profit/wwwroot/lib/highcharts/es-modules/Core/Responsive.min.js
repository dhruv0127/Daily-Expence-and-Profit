"use strict";import U from"./Utilities.js";const{extend,find,isArray,isObject,merge,objectEach,pick,splat,uniqueKey}=U;var Responsive;!function(i){const t=[];function e(i){const r=this,t={};return function e(i,s,n,o){let c;objectEach(i,function(i,t){if(!o&&-1<r.collectionsWithUpdate.indexOf(t)&&s[t])for(i=splat(i),n[t]=[],c=0;c<Math.max(i.length,s[t].length);c++)s[t][c]&&(void 0===i[c]?n[t][c]=s[t][c]:(n[t][c]={},e(i[c],s[t][c],n[t][c],o+1)));else isObject(i)?(n[t]=isArray(i)?[]:{},e(i,s[t]||{},n[t],o+1)):void 0===s[t]?n[t]=null:n[t]=s[t]})}(i,this.options,t,0),t}function s(i,t){const e=i.condition,s=e.callback||function(){return this.chartWidth<=pick(e.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(e.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(e.minWidth,0)&&this.chartHeight>=pick(e.minHeight,0)};s.call(this)&&t.push(i._id)}function n(i,t){const e=this.options.responsive,s=this.currentResponsive;let n=[],o;!t&&e&&e.rules&&e.rules.forEach(i=>{void 0===i._id&&(i._id=uniqueKey()),this.matchResponsiveRule(i,n)},this);const c=merge(...n.map(t=>find((e||{}).rules||[],i=>i._id===t)).map(i=>i&&i.chartOptions));c.isResponsiveOptions=!0,n=n.toString()||void 0;t=s&&s.ruleIds;n!==t&&(s&&this.update(s.undoOptions,i,!0),n?((o=this.currentOptions(c)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:n,mergedOptions:c,undoOptions:o},this.update(c,i,!0)):this.currentResponsive=void 0)}i.compose=function(i){return U.pushUnique(t,i)&&extend(i.prototype,{currentOptions:e,matchResponsiveRule:s,setResponsive:n}),i}}(Responsive=Responsive||{});export default Responsive;