"use strict";import D from"./Defaults.js";const{defaultOptions,defaultTime}=D;import U from"./Utilities.js";const{getNestedProperty,isNumber,pick,pInt}=U;function dateFormat(t,e,i){return defaultTime.dateFormat(t,e,i)}function format(t,e,i){let o="{",r=!1,n,a,s,m;const l=/f$/;var u,p=/\.([0-9])/,d=defaultOptions.lang;const f=i&&i.time||defaultTime,c=i&&i.numberFormatter||numberFormat,h=[];for(;t&&-1!==(m=t.indexOf(o));)n=t.slice(0,m),r?(a=n.split(":"),s=getNestedProperty(a.shift()||"",e),a.length&&"number"==typeof s&&(n=a.join(":"),l.test(n)?(u=parseInt((n.match(p)||["","-1"])[1],10),null!==s&&(s=c(s,u,d.decimalPoint,-1<n.indexOf(",")?d.thousandsSep:""))):s=f.dateFormat(n,s)),h.push(s)):h.push(n),t=t.slice(m+1),r=!r,o=r?"}":"{";return h.push(t),h.join("")}function numberFormat(t,e,i,o){t=+t||0,e=+e;let r,n;const a=defaultOptions.lang,s=(t.toString().split(".")[1]||"").split("e")[0].length,m=t.toString().split("e"),l=e,u=(-1===e?e=Math.min(s,20):isNumber(e)?e&&m[1]&&m[1]<0&&(0<=(n=e+ +m[1])?(m[0]=(+m[0]).toExponential(n).split("e")[0],e=n):(m[0]=m[0].split(".")[0]||0,t=e<20?(m[0]*Math.pow(10,m[1])).toFixed(e):0,m[1]=0)):e=2,(Math.abs(m[1]?m[0]:t)+Math.pow(10,-Math.max(e,s)-1)).toFixed(e)),p=String(pInt(u));var d=3<p.length?p.length%3:0;return i=pick(i,a.decimalPoint),o=pick(o,a.thousandsSep),r=t<0?"-":"",r+=d?p.substr(0,d)+o:"",+m[1]<0&&!l?r="0":r+=p.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+o),e&&(r+=i+u.slice(-e)),m[1]&&0!=+r&&(r+="e"+m[1]),r}const FormatUtilities={dateFormat:dateFormat,format:format,numberFormat:numberFormat};export default FormatUtilities;