"use strict";import StackItem from"./Stacking/StackItem.js";import U from"../Utilities.js";const{addEvent,objectEach}=U;var WaterfallAxis;!function(t){class a{constructor(t){this.axis=t,this.stacks={changed:!1}}renderStackTotals(){const t=this.axis,a=t.waterfall.stacks,e=t.stacking&&t.stacking.stackTotalGroup,s=new StackItem(t,t.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=s,e&&objectEach(a,function(t){objectEach(t,function(t,a){s.total=t.stackTotal,s.x=+a,t.label&&(s.label=t.label),StackItem.prototype.render.call(s,e),t.label=s.label,delete s.label})}),s.total=null}}function e(){const t=this.waterfall.stacks;t&&(t.changed=!1,delete t.alreadyChanged)}function s(){var t=this,a=t.options.stackLabels;a&&a.enabled&&t.waterfall.stacks&&t.waterfall.renderStackTotals()}function l(){let t=this.axes,a=this.series,e=a.length;for(;e--;)a[e].options.stacking&&(t.forEach(function(t){t.isXAxis||(t.waterfall.stacks.changed=!0)}),e=0)}function c(){var t=this;t.waterfall||(t.waterfall=new a(t))}t.Composition=a,t.compose=function(t,a){addEvent(t,"init",c),addEvent(t,"afterBuildStacks",e),addEvent(t,"afterRender",s),addEvent(a,"beforeRedraw",l)}}(WaterfallAxis=WaterfallAxis||{});export default WaterfallAxis;